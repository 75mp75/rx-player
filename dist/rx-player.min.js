var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,b,a){e!=Array.prototype&&e!=Object.prototype&&(e[b]=a.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var b=0;return $jscomp.iteratorPrototype(function(){return b<e.length?{done:!1,value:e[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,b){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var a=0,g={next:function(){if(a<e.length){var l=a++;return{value:b(l,e[l]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill=function(e,b,a,g){if(b){a=$jscomp.global;e=e.split(".");for(g=0;g<e.length-1;g++){var l=e[g];l in a||(a[l]={});a=a[l]}e=e[e.length-1];g=a[e];b=b(g);b!=g&&null!=b&&$jscomp.defineProperty(a,e,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");$jscomp.polyfill("Object.getOwnPropertySymbols",function(e){return e?e:function(){return[]}},"es6","es5");
$jscomp.owns=function(e,b){return Object.prototype.hasOwnProperty.call(e,b)};$jscomp.polyfill("Object.assign",function(e){return e?e:function(b,a){for(var g=1;g<arguments.length;g++){var l=arguments[g];if(l)for(var f in l)$jscomp.owns(l,f)&&(b[f]=l[f])}return b}},"es6","es3");$jscomp.polyfill("Object.setPrototypeOf",function(e){return e?e:"object"!=typeof"".__proto__?null:function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}},"es6","es5");
$jscomp.makeIterator=function(e){$jscomp.initSymbolIterator();var b=e[Symbol.iterator];return b?b.call(e):$jscomp.arrayIterator(e)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(e){function b(){this.batch_=null}function a(a){return a instanceof l?a:new l(function(c,d){c(a)})}if(e&&!$jscomp.FORCE_POLYFILL_PROMISE)return e;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var g=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){g(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var d=a[c];delete a[c];try{d()}catch(h){this.asyncThrow_(h)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var l=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(d){c.reject(d)}};l.prototype.createResolveAndReject_=
function(){function a(h){return function(a){d||(d=!0,h.call(c,a))}}var c=this,d=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};l.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof l)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};l.prototype.resolveToNonPromiseObj_=function(a){var c=
void 0;try{c=a.then}catch(d){this.reject_(d);return}"function"==typeof c?this.settleSameAsThenable_(c,a):this.fulfill_(a)};l.prototype.reject_=function(a){this.settle_(2,a)};l.prototype.fulfill_=function(a){this.settle_(1,a)};l.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};l.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,c=0;c<a.length;++c)a[c].call(),a[c]=null;this.onSettledCallbacks_=null}};var f=new b;l.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};l.prototype.settleSameAsThenable_=function(a,c){var d=this.createResolveAndReject_();try{a.call(c,d.resolve,d.reject)}catch(h){d.reject(h)}};l.prototype.then=function(a,c){function d(c,d){return"function"==typeof c?function(d){try{h(c(d))}catch(r){k(r)}}:d}var h,k,f=new l(function(c,
d){h=c;k=d});this.callWhenSettled_(d(a,h),d(c,k));return f};l.prototype.catch=function(a){return this.then(void 0,a)};l.prototype.callWhenSettled_=function(a,c){function d(){switch(h.state_){case 1:a(h.result_);break;case 2:c(h.result_);break;default:throw Error("Unexpected state: "+h.state_);}}var h=this;null==this.onSettledCallbacks_?f.asyncExecute(d):this.onSettledCallbacks_.push(function(){f.asyncExecute(d)})};l.resolve=a;l.reject=function(a){return new l(function(c,d){d(a)})};l.race=function(k){return new l(function(c,
d){for(var h=$jscomp.makeIterator(k),n=h.next();!n.done;n=h.next())a(n.value).callWhenSettled_(c,d)})};l.all=function(k){var c=$jscomp.makeIterator(k),d=c.next();return d.done?a([]):new l(function(h,k){function n(c){return function(d){f[c]=d;l--;0==l&&h(f)}}var f=[],l=0;do f.push(void 0),l++,a(d.value).callWhenSettled_(n(f.length-1),k),d=c.next();while(!d.done)})};return l},"es6","es3");
$jscomp.polyfill("WeakMap",function(e){function b(a){$jscomp.owns(a,g)||$jscomp.defineProperty(a,g,{value:{}})}function a(a){var c=Object[a];c&&(Object[a]=function(d){b(d);return c(d)})}if(function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),c=Object.seal({}),d=new e([[a,2],[c,3]]);if(2!=d.get(a)||3!=d.get(c))return!1;d.delete(a);d.set(c,4);return!d.has(a)&&4==d.get(c)}catch(h){return!1}}())return e;var g="$jscomp_hidden_"+Math.random().toString().substring(2);a("freeze");a("preventExtensions");
a("seal");var l=0,f=function(a){this.id_=(l+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};f.prototype.set=function(a,c){b(a);if(!$jscomp.owns(a,g))throw Error("WeakMap key fail: "+a);a[g][this.id_]=c;return this};f.prototype.get=function(a){return $jscomp.owns(a,g)?a[g][this.id_]:void 0};f.prototype.has=function(a){return $jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)};f.prototype.delete=
function(a){return $jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)?delete a[g][this.id_]:!1};return f},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(e){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),d=new e($jscomp.makeIterator([[c,"s"]]));if("s"!=d.get(c)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var a=d.entries(),k=a.next();if(k.done||k.value[0]!=c||"s"!=k.value[1])return!1;k=a.next();return k.done||4!=k.value[0].x||"t"!=k.value[1]||!a.next().done?!1:!0}catch(m){return!1}}())return e;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var b=new WeakMap,a=function(c){this.data_={};this.head_=f();this.size=0;if(c){c=$jscomp.makeIterator(c);for(var d;!(d=c.next()).done;)d=d.value,this.set(d[0],d[1])}};a.prototype.set=function(c,d){var a=g(this,c);a.list||(a.list=this.data_[a.id]=[]);a.entry?a.entry.value=d:(a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:d},a.list.push(a.entry),this.head_.previous.next=a.entry,this.head_.previous=a.entry,this.size++);return this};a.prototype.delete=
function(c){c=g(this,c);return c.entry&&c.list?(c.list.splice(c.index,1),c.list.length||delete this.data_[c.id],c.entry.previous.next=c.entry.next,c.entry.next.previous=c.entry.previous,c.entry.head=null,this.size--,!0):!1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(c){return!!g(this,c).entry};a.prototype.get=function(c){return(c=g(this,c).entry)&&c.value};a.prototype.entries=function(){return l(this,function(c){return[c.key,
c.value]})};a.prototype.keys=function(){return l(this,function(c){return c.key})};a.prototype.values=function(){return l(this,function(c){return c.value})};a.prototype.forEach=function(c,d){for(var a=this.entries(),k;!(k=a.next()).done;)k=k.value,c.call(d,k[1],k[0],this)};a.prototype[Symbol.iterator]=a.prototype.entries;var g=function(c,d){var a=d&&typeof d;"object"==a||"function"==a?b.has(d)?a=b.get(d):(a=""+ ++k,b.set(d,a)):a="p_"+d;var f=c.data_[a];if(f&&$jscomp.owns(c.data_,a))for(c=0;c<f.length;c++){var m=
f[c];if(d!==d&&m.key!==m.key||d===m.key)return{id:a,list:f,index:c,entry:m}}return{id:a,list:f,index:-1,entry:void 0}},l=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){for(;a.head!=c.head_;)a=a.previous;for(;a.next!=a.head;)return a=a.next,{done:!1,value:d(a)};a=null}return{done:!0,value:void 0}})},f=function(){var c={};return c.previous=c.next=c.head=c},k=0;return a},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})}},"es6","es3");$jscomp.findInternal=function(e,b,a){e instanceof String&&(e=String(e));for(var g=e.length,l=0;l<g;l++){var f=e[l];if(b.call(a,f,l,e))return{i:l,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6","es3");
$jscomp.polyfill("Set",function(e){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),b=new e($jscomp.makeIterator([a]));if(!b.has(a)||1!=b.size||b.add(a)!=b||1!=b.size||b.add({x:4})!=b||2!=b.size)return!1;var l=b.entries(),f=l.next();if(f.done||f.value[0]!=a||f.value[1]!=a)return!1;f=l.next();return f.done||f.value[0]==a||4!=f.value[0].x||f.value[1]!=f.value[0]?!1:l.next().done}catch(k){return!1}}())return e;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size};b.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};b.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};b.prototype.clear=function(){this.map_.clear();this.size=0};b.prototype.has=function(a){return this.map_.has(a)};b.prototype.entries=function(){return this.map_.entries()};
b.prototype.values=function(){return this.map_.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,b){var l=this;this.map_.forEach(function(f){return a.call(b,f,f,l)})};return b},"es6","es3");
(function(e,b){"object"===typeof exports&&"object"===typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):"object"===typeof exports?exports.RxPlayer=b():e.RxPlayer=b()})("undefined"!==typeof self?self:this,function(){return function(e){function b(g){if(a[g])return a[g].exports;var l=a[g]={i:g,l:!1,exports:{}};e[g].call(l.exports,l,l.exports,b);l.l=!0;return l.exports}var a={};b.m=e;b.c=a;b.d=function(a,l,f){b.o(a,l)||Object.defineProperty(a,l,{configurable:!1,enumerable:!0,
get:f})};b.n=function(a){var l=a&&a.__esModule?function(){return a["default"]}:function(){return a};b.d(l,"a",l);return l};b.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)};b.p="";return b(b.s=116)}([function(e,b,a){var g=a(15),l=a(120),f=a(45),k=a(122);e=function(){function c(c){this._isScalar=!1;c&&(this._subscribe=c)}c.prototype.lift=function(d){var a=new c;a.source=this;a.operator=d;return a};c.prototype.subscribe=function(c,a,k){var d=this.operator;c=l.toSubscriber(c,a,k);d?
d.call(c,this.source):c.add(this.source||!c.syncErrorThrowable?this._subscribe(c):this._trySubscribe(c));if(c.syncErrorThrowable&&(c.syncErrorThrowable=!1,c.syncErrorThrown))throw c.syncErrorValue;return c};c.prototype._trySubscribe=function(c){try{return this._subscribe(c)}catch(h){c.syncErrorThrown=!0,c.syncErrorValue=h,c.error(h)}};c.prototype.forEach=function(c,a){var d=this;a||(g.root.Rx&&g.root.Rx.config&&g.root.Rx.config.Promise?a=g.root.Rx.config.Promise:g.root.Promise&&(a=g.root.Promise));
if(!a)throw Error("no Promise impl found");return new a(function(a,h){var k=d.subscribe(function(a){if(k)try{c(a)}catch(r){h(r),k.unsubscribe()}else c(a)},h,a)})};c.prototype._subscribe=function(c){return this.source.subscribe(c)};c.prototype[f.observable]=function(){return this};c.prototype.pipe=function(){for(var c=[],a=0;a<arguments.length;a++)c[a-0]=arguments[a];return 0===c.length?this:k.pipeFromArray(c)(this)};c.prototype.toPromise=function(c){var a=this;c||(g.root.Rx&&g.root.Rx.config&&g.root.Rx.config.Promise?
c=g.root.Rx.config.Promise:g.root.Promise&&(c=g.root.Promise));if(!c)throw Error("no Promise impl found");return new c(function(c,d){var h;a.subscribe(function(c){return h=c},function(c){return d(c)},function(){return c(h)})})};c.create=function(a){return new c(a)};return c}();b.Observable=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(24),l={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4},f=Object.keys(l)[0];e={LEVELS:Object.keys(l),error:g.default,warn:g.default,info:g.default,
debug:g.default,setLevel:function(a){var c;(c=l[a])?f=a:(c=0,f="NONE");this.error=c>=l.ERROR?console.error.bind(console):g.default;this.warn=c>=l.WARNING?console.warn.bind(console):g.default;this.info=c>=l.INFO?console.info.bind(console):g.default;this.debug=c>=l.DEBUG?console.log.bind(console):g.default},getLevel:function(){return f}};b.default=e},function(e,b,a){var g=this&&this.__extends||function(c,a){function d(){this.constructor=c}for(var h in a)a.hasOwnProperty(h)&&(c[h]=a[h]);c.prototype=
null===a?Object.create(a):(d.prototype=a.prototype,new d)},l=a(42);e=a(16);var f=a(67),k=a(44);a=function(a){function d(h,k,l){a.call(this);this.syncErrorValue=null;this.isStopped=this.syncErrorThrowable=this.syncErrorThrown=!1;switch(arguments.length){case 0:this.destination=f.empty;break;case 1:if(!h){this.destination=f.empty;break}if("object"===typeof h){h instanceof d?(this.syncErrorThrowable=h.syncErrorThrowable,this.destination=h,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=
new c(this,h));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,h,k,l)}}g(d,a);d.prototype[k.rxSubscriber]=function(){return this};d.create=function(c,a,h){c=new d(c,a,h);c.syncErrorThrowable=!1;return c};d.prototype.next=function(c){this.isStopped||this._next(c)};d.prototype.error=function(c){this.isStopped||(this.isStopped=!0,this._error(c))};d.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())};d.prototype.unsubscribe=function(){this.closed||
(this.isStopped=!0,a.prototype.unsubscribe.call(this))};d.prototype._next=function(c){this.destination.next(c)};d.prototype._error=function(c){this.destination.error(c);this.unsubscribe()};d.prototype._complete=function(){this.destination.complete();this.unsubscribe()};d.prototype._unsubscribeAndRecycle=function(){var c=this._parent,a=this._parents;this._parents=this._parent=null;this.unsubscribe();this.isStopped=this.closed=!1;this._parent=c;this._parents=a;return this};return d}(e.Subscription);
b.Subscriber=a;var c=function(c){function a(a,d,h,k){c.call(this);this._parentSubscriber=a;a=this;if(l.isFunction(d))var n=d;else d&&(n=d.next,h=d.error,k=d.complete,d!==f.empty&&(a=Object.create(d),l.isFunction(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this)));this._context=a;this._next=n;this._error=h;this._complete=k}g(a,c);a.prototype.next=function(c){if(!this.isStopped&&this._next){var a=this._parentSubscriber;a.syncErrorThrowable?this.__tryOrSetError(a,
this._next,c)&&this.unsubscribe():this.__tryOrUnsub(this._next,c)}};a.prototype.error=function(c){if(!this.isStopped){var a=this._parentSubscriber;if(this._error)a.syncErrorThrowable?this.__tryOrSetError(a,this._error,c):this.__tryOrUnsub(this._error,c),this.unsubscribe();else if(a.syncErrorThrowable)a.syncErrorValue=c,a.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),c;}};a.prototype.complete=function(){var c=this;if(!this.isStopped){var a=this._parentSubscriber;if(this._complete){var d=
function(){return c._complete.call(c._context)};a.syncErrorThrowable?this.__tryOrSetError(a,d):this.__tryOrUnsub(d)}this.unsubscribe()}};a.prototype.__tryOrUnsub=function(c,a){try{c.call(this._context,a)}catch(p){throw this.unsubscribe(),p;}};a.prototype.__tryOrSetError=function(c,a,d){try{a.call(this._context,d)}catch(u){return c.syncErrorValue=u,c.syncErrorThrown=!0}return!1};a.prototype._unsubscribe=function(){var c=this._parentSubscriber;this._parentSubscriber=this._context=null;c.unsubscribe()};
return a}(a)},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default={DEFAULT_UNMUTED_VOLUME:.1,DEFAULT_TEXT_TRACK_MODE:"native",DEFAULT_AUTO_PLAY:!1,DEFAULT_SHOW_NATIVE_SUBTITLE:!0,DEFAULT_WANTED_BUFFER_AHEAD:30,DEFAULT_MAX_BUFFER_AHEAD:Infinity,DEFAULT_MAX_BUFFER_BEHIND:Infinity,DEFAULT_INITIAL_BITRATES:{audio:0,video:0,other:0},DEFAULT_MAX_BITRATES:{audio:Infinity,video:Infinity,other:Infinity},DEFAULT_ADAPTIVE_BUFFER_THRESHOLD:.3,INACTIVITY_DELAY:6E4,DEFAULT_THROTTLE_WHEN_HIDDEN:!1,
DEFAULT_LIMIT_VIDEO_WIDTH:!1,DEFAULT_LIVE_GAP:10,DEFAULT_SUGGESTED_PRESENTATION_DELAY:{SMOOTH:10,DASH:10},DISCONTINUITY_THRESHOLD:1,BITRATE_REBUFFERING_RATIO:1.5,BUFFER_GC_GAPS:{CALM:240,BEEFY:30},DEFAULT_MAX_MANIFEST_REQUEST_RETRY:4,DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR:4,DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE:Infinity,INITIAL_BACKOFF_DELAY_BASE:200,MAX_BACKOFF_DELAY_BASE:3E3,SAMPLING_INTERVAL_MEDIASOURCE:1E3,SAMPLING_INTERVAL_NO_MEDIASOURCE:500,ABR_MINIMUM_TOTAL_BYTES:35E4,ABR_MINIMUM_CHUNK_SIZE:16E3,
ABR_STARVATION_FACTOR:.72,ABR_REGULAR_FACTOR:.9,ABR_STARVATION_GAP:5,OUT_OF_STARVATION_GAP:7,RESUME_GAP_AFTER_SEEKING:1.5,RESUME_GAP_AFTER_NOT_ENOUGH_DATA:.5,RESUME_GAP_AFTER_BUFFERING:5,STALL_GAP:.5,MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT:.12,MAX_BUFFERED_DISTANCE:.1,MINIMUM_SEGMENT_SIZE:.2,MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL:50,BUFFER_PADDING:{audio:{high:1,low:1},video:{high:8,low:2},other:{high:1,low:1}},SEGMENT_PRIORITIES_STEPS:[6,14],EME_DEFAULT_WIDEVINE_ROBUSTNESSES:["HW_SECURE_ALL","HW_SECURE_DECODE",
"HW_SECURE_CRYPTO","SW_SECURE_DECODE","SW_SECURE_CRYPTO"],EME_KEY_SYSTEMS:{clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.microsoft.playready","com.chromecast.playready","com.youtube.playready"]},FORCED_ENDED_THRESHOLD:.001}},function(e,b,a){function g(a,k){if(!a)throw new l.default(k||"invalid assertion");}Object.defineProperty(b,"__esModule",{value:!0});var l=a(253);b.default=g;b.assertInterface=function(a,k,c){void 0===c&&(c="object");g(null!=
a,c+" should be an object");for(var d in k)k.hasOwnProperty(d)&&g(typeof a[d]===k[d],c+" should have property "+d+" as a "+k[d])}},function(e,b,a){var g=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var c={};for(a=0;10>a;a++)c["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(c).map(function(a){return c[a]}).join(""))return!1;
var d={};"abcdefghijklmnopqrst".split("").forEach(function(c){d[c]=c});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},d)).join("")?!1:!0}catch(h){return!1}}()?Object.assign:function(a,c){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var d=Object(a);for(var h,k=1;k<arguments.length;k++){var m=Object(arguments[k]);for(var p in m)l.call(m,p)&&(d[p]=m[p]);if(g){h=g(m);for(var b=0;b<h.length;b++)f.call(m,h[b])&&(d[h[b]]=m[h[b]])}}return d}},
function(e,b,a){var g=this&&this.__extends||function(c,a){function d(){this.constructor=c}for(var h in a)a.hasOwnProperty(h)&&(c[h]=a[h]);c.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)},l=a(0);e=a(2);var f=a(16),k=a(51),c=a(81),d=a(44),h=function(c){function a(a){c.call(this,a);this.destination=a}g(a,c);return a}(e.Subscriber);b.SubjectSubscriber=h;a=function(a){function m(){a.call(this);this.observers=[];this.hasError=this.isStopped=this.closed=!1;this.thrownError=null}g(m,
a);m.prototype[d.rxSubscriber]=function(){return new h(this)};m.prototype.lift=function(c){var a=new n(this,this);a.operator=c;return a};m.prototype.next=function(c){if(this.closed)throw new k.ObjectUnsubscribedError;if(!this.isStopped){var a=this.observers,d=a.length;a=a.slice();for(var h=0;h<d;h++)a[h].next(c)}};m.prototype.error=function(c){if(this.closed)throw new k.ObjectUnsubscribedError;this.hasError=!0;this.thrownError=c;this.isStopped=!0;var a=this.observers,d=a.length;a=a.slice();for(var h=
0;h<d;h++)a[h].error(c);this.observers.length=0};m.prototype.complete=function(){if(this.closed)throw new k.ObjectUnsubscribedError;this.isStopped=!0;var c=this.observers,a=c.length;c=c.slice();for(var d=0;d<a;d++)c[d].complete();this.observers.length=0};m.prototype.unsubscribe=function(){this.closed=this.isStopped=!0;this.observers=null};m.prototype._trySubscribe=function(c){if(this.closed)throw new k.ObjectUnsubscribedError;return a.prototype._trySubscribe.call(this,c)};m.prototype._subscribe=function(a){if(this.closed)throw new k.ObjectUnsubscribedError;
if(this.hasError)return a.error(this.thrownError),f.Subscription.EMPTY;if(this.isStopped)return a.complete(),f.Subscription.EMPTY;this.observers.push(a);return new c.SubjectSubscription(this,a)};m.prototype.asObservable=function(){var c=new l.Observable;c.source=this;return c};m.create=function(c,a){return new n(c,a)};return m}(l.Observable);b.Subject=a;var n=function(c){function a(a,d){c.call(this);this.destination=a;this.source=d}g(a,c);a.prototype.next=function(c){var a=this.destination;a&&a.next&&
a.next(c)};a.prototype.error=function(c){var a=this.destination;a&&a.error&&this.destination.error(c)};a.prototype.complete=function(){var c=this.destination;c&&c.complete&&this.destination.complete()};a.prototype._subscribe=function(c){return this.source?this.source.subscribe(c):f.Subscription.EMPTY};return a}(a);b.AnonymousSubject=n},function(e,b,a){function g(c){c.src="";c.removeAttribute("src")}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0);e=a(30);var f=a(1),k=a(52),c=a(53);b.isFirefox=
c.isFirefox;b.isIE=c.isIE;b.MediaSource_=c.MediaSource_;b.VTTCue_=c.VTTCue_;var d=a(18);b.events=d;var h=a(254);b.exitFullscreen=h.exitFullscreen;b.isFullscreen=h.isFullscreen;b.requestFullscreen=h.requestFullscreen;var n=a(255);b.KeySystemAccess=n.KeySystemAccess;b.requestMediaKeySystemAccess=n.requestMediaKeySystemAccess;b.setMediaKeys=n.setMediaKeys;b.isCodecSupported=function(a){return c.MediaSource_?"function"===typeof c.MediaSource_.isTypeSupported?c.MediaSource_.isTypeSupported(a):!0:!1};b.hasEMEAPIs=
function(){return"function"===typeof n.requestMediaKeySystemAccess};b.shouldRenewMediaKeys=function(){return c.isIE};b.shouldUnsetMediaKeys=function(){return c.isIE};b.onSourceOpen$=function(c){return"open"===c.readyState?l.Observable.of(null):d.onSourceOpen$(c).take(1)};b.hasLoadedMetadata=function(a){return a.readyState>=c.READY_STATES.HAVE_METADATA?l.Observable.of(void 0):d.onLoadedMetadata$(a).take(1).mapTo(void 0)};b.canPlay=function(a){return a.readyState>=c.READY_STATES.HAVE_ENOUGH_DATA?l.Observable.of(void 0):
k.default(a,"canplay").take(1).mapTo(void 0)};if(window.WebKitSourceBuffer&&!window.WebKitSourceBuffer.prototype.addEventListener){a=window.WebKitSourceBuffer.prototype;for(var m in e.default.prototype)e.default.prototype.hasOwnProperty(m)&&(a[m]=e.default.prototype[m]);a._listeners=[];a.__emitUpdate=function(c,a){var d=this;setTimeout(function(){d.trigger(c,a);d.updating=!1;d.trigger("updateend")},0)};a.appendBuffer=function(c){if(this.updating)throw Error("updating");this.trigger("updatestart");
this.updating=!0;try{this.append(c)}catch(u){this.__emitUpdate("error",u);return}this.__emitUpdate("update")}}b.addTextTrack=function(a,d){if(c.isIE){var h=a.textTracks.length;a=0<h?a.textTracks[h-1]:a.addTextTrack("subtitles");a.mode=d?a.HIDDEN:a.SHOWING}else{var k=document.createElement("track");a.appendChild(k);a=k.track;k.kind="subtitles";a.mode=d?"hidden":"showing"}return{track:a,trackElement:k}};b.isPlaybackStuck=function(a,d,h,k){return c.isFirefox&&k&&"timeupdate"===h&&!!d&&10<d.end-a};b.clearElementSrc=
g;b.setElementSrc$=function(a,c){return l.Observable.create(function(d){f.default.info("Setting URL to Element",c,a);a.src=c;d.next(void 0);return function(){g(a)}})};b.isOffline=function(){return!1===navigator.onLine};b.makeCue=function(a,d,h){if(!c.VTTCue_)throw Error("VTT cues not supported in your target");return a>=d?(f.default.warn("Invalid cue times: "+a+" - "+d),null):new c.VTTCue_(a,d,h)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(25);b.ErrorCodes=g.ErrorCodes;
b.ErrorTypes=g.ErrorTypes;b.RequestErrorTypes=g.RequestErrorTypes;e=a(87);b.EncryptedMediaError=e.default;e=a(257);b.IndexError=e.default;e=a(31);b.MediaError=e.default;e=a(258);b.OtherError=e.default;e=a(259);b.NetworkError=e.default;a=a(260);b.RequestError=a.default;b.isKnownError=function(a){return!!a&&!!a.type&&0<=Object.keys(g.ErrorTypes).indexOf(a.type)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(4),l=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,
f=/([0-9]+)-([0-9]+)/,k=/([0-9]+)(\/([0-9]+))?/;b.parseString=function(a){return a};b.parseBoolean=function(a){return"true"===a};b.parseIntOrBoolean=function(a){return"true"===a?!0:"false"===a?!1:parseInt(a,10)};b.parseDateTime=function(a){return(new Date(Date.parse(a))).getTime()/1E3};b.parseDuration=function(a){if(!a)return 0;var c=l.exec(a);g.default(!!c,a+" is not a valid ISO8601 duration");return 31536E3*parseFloat(c[2]||"0")+2592E3*parseFloat(c[4]||"0")+86400*parseFloat(c[6]||"0")+3600*parseFloat(c[8]||
"0")+60*parseFloat(c[10]||"0")+parseFloat(c[12]||"0")};b.parseFrameRate=function(a){var c=k.exec(a);if(!c)return-1;a=parseInt(c[1],10)||0;c=parseInt(c[2],10)||0;return 0<c?a/c:a};b.parseRatio=function(a){return a};b.parseByteRange=function(a){return(a=f.exec(a))?[+a[1],+a[2]]:null};b.isVisuallyImpaired=function(a){return a?"urn:tva:metadata:cs:AudioPurposeCS:2007"===a.schemeIdUri&&"1"===a.value:!1};b.isHardOfHearing=function(a){return a?"urn:tva:metadata:cs:AudioPurposeCS:2007"===a.schemeIdUri&&"2"===
a.value:!1};b.parseScheme=function(a){for(var c,h,k=0;k<a.attributes.length;k++){var f=a.attributes[k];switch(f.name){case "schemeIdUri":c=f.value;break;case "value":h=f.value}}return{schemeIdUri:c,value:h}}},function(e,b,a){var g=this&&this.__extends||function(a,f){function k(){this.constructor=a}for(var c in f)f.hasOwnProperty(c)&&(a[c]=f[c]);a.prototype=null===f?Object.create(f):(k.prototype=f.prototype,new k)};e=function(a){function f(){a.apply(this,arguments)}g(f,a);f.prototype.notifyNext=function(a,
c,d,h,f){this.destination.next(c)};f.prototype.notifyError=function(a,c){this.destination.error(a)};f.prototype.notifyComplete=function(a){this.destination.complete()};return f}(a(2).Subscriber);b.OuterSubscriber=e},function(e,b,a){var g=a(15),l=a(68),f=a(69),k=a(66),c=a(0),d=a(48),h=a(125),n=a(45);b.subscribeToResult=function(a,b,e,q){var m=new h.InnerSubscriber(a,e,q);if(m.closed)return null;if(b instanceof c.Observable)if(b._isScalar)m.next(b.value),m.complete();else return m.syncErrorThrowable=
!0,b.subscribe(m);else if(l.isArrayLike(b)){a=0;for(e=b.length;a<e&&!m.closed;a++)m.next(b[a]);m.closed||m.complete()}else{if(f.isPromise(b))return b.then(function(a){m.closed||(m.next(a),m.complete())},function(a){return m.error(a)}).then(null,function(a){g.root.setTimeout(function(){throw a;})}),m;if(b&&"function"===typeof b[d.iterator]){b=b[d.iterator]();do{a=b.next();if(a.done){m.complete();break}m.next(a.value);if(m.closed)break}while(1)}else if(b&&"function"===typeof b[n.observable])if(b=b[n.observable](),
"function"!==typeof b.subscribe)m.error(new TypeError("Provided object does not correctly implement Symbol.observable"));else return b.subscribe(new h.InnerSubscriber(a,e,q));else b=k.isObject(b)?"an invalid object":"'"+b+"'",m.error(new TypeError("You provided "+b+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}return null}},function(e,b,a){e.exports=function(a,l,f){if("function"===typeof Array.prototype.find)return a.find(l,f);f=f||this;var k=a.length,
c;if("function"!==typeof l)throw new TypeError(l+" is not a function");for(c=0;c<k;c++)if(l.call(f,a[c],c,a))return a[c]}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(0);a(73);b.default=function(a){return a instanceof g.Observable?a:a&&"function"===typeof a.subscribe?new g.Observable(function(f){var k=a.subscribe(function(a){f.next(a)},function(a){f.error(a)},function(){f.complete()});return function(){k&&k.dispose?k.dispose():k&&k.unsubscribe&&k.unsubscribe()}}):a&&"function"===
typeof a.then?g.Observable.fromPromise(a):g.Observable.of(a)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b,f){if("function"===typeof Array.prototype.includes)return a.includes(b,f);var k=a.length>>>0;if(0===k)return!1;f|=0;for(f=Math.max(0<=f?f:k-Math.abs(f),0);f<k;){var c=a[f],d=b;if(c===d||"number"===typeof c&&"number"===typeof d&&isNaN(c)&&isNaN(d))return!0;f++}return!1}},function(e,b,a){e=a(119);a="undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&
self instanceof WorkerGlobalScope&&self;e="undefined"!==typeof window&&window||"undefined"!==typeof e&&e||a;b.root=e;if(!e)throw Error("RxJS could not find any global context (window, self, global)");},function(e,b,a){function g(a){return a.reduce(function(a,c){return a.concat(c instanceof h.UnsubscriptionError?c.errors:c)},[])}var l=a(28),f=a(66),k=a(42),c=a(43),d=a(35),h=a(121);e=function(){function a(a){this.closed=!1;this._subscriptions=this._parents=this._parent=null;a&&(this._unsubscribe=a)}
a.prototype.unsubscribe=function(){var a=!1;if(!this.closed){var n=this._parent;var b=this._parents,e=this._unsubscribe,r=this._subscriptions;this.closed=!0;this._subscriptions=this._parents=this._parent=null;for(var t=-1,x=b?b.length:0;n;)n.remove(this),n=++t<x&&b[t]||null;if(k.isFunction(e)&&(n=c.tryCatch(e).call(this),n===d.errorObject)){a=!0;var v=v||(d.errorObject.e instanceof h.UnsubscriptionError?g(d.errorObject.e.errors):[d.errorObject.e])}if(l.isArray(r))for(t=-1,x=r.length;++t<x;)n=r[t],
f.isObject(n)&&(n=c.tryCatch(n.unsubscribe).call(n),n===d.errorObject&&(a=!0,v=v||[],n=d.errorObject.e,n instanceof h.UnsubscriptionError?v=v.concat(g(n.errors)):v.push(n)));if(a)throw new h.UnsubscriptionError(v);}};a.prototype.add=function(c){if(!c||c===a.EMPTY)return a.EMPTY;if(c===this)return this;var d=c;switch(typeof c){case "function":d=new a(c);case "object":if(d.closed||"function"!==typeof d.unsubscribe)return d;if(this.closed)return d.unsubscribe(),d;"function"!==typeof d._addParent&&(c=
d,d=new a,d._subscriptions=[c]);break;default:throw Error("unrecognized teardown "+c+" added to Subscription.");}(this._subscriptions||(this._subscriptions=[])).push(d);d._addParent(this);return d};a.prototype.remove=function(a){var c=this._subscriptions;c&&(a=c.indexOf(a),-1!==a&&c.splice(a,1))};a.prototype._addParent=function(a){var c=this._parent,d=this._parents;c&&c!==a?d?-1===d.indexOf(a)&&d.push(a):this._parents=[a]:this._parent=a};a.EMPTY=function(a){a.closed=!0;return a}(new a);return a}();
b.Subscription=e},function(e,b,a){function g(a,c){return{start:Math.min(a.start,c.start),end:Math.max(a.end,c.end)}}function l(a){for(var c=0;c<a.length;c++){var d=a[c];d.start===d.end&&a.splice(c++,1)}return a}function f(a){for(var c=1;c<a.length;c++){var d=a[c-1],h=a[c];if(Math.abs(h.start-d.end)<n||Math.abs(h.end-d.start)<n)d=g(d,h),a.splice(--c,2,d)}return a}function k(a,c){return a.end<=c.start}function c(a,c){var d=a.end;return a.start<=c&&c<d}function d(a,d){return c(a,d.start)||a.start<d.end&&
d.end<a.end||c(d,a.start)}function h(a,c){for(var d=a.length-1;0<=d;d--){var h=a.start(d);if(c>=h){var k=a.end(d);if(c<k)return{start:h,end:k}}}return null}Object.defineProperty(b,"__esModule",{value:!0});var n=1/60;b.createRange=function(a,c){return{start:a,end:c}};b.removeEmptyRanges=l;b.mergeContiguousRanges=f;b.isAfter=function(a,c){return a.start>=c.end};b.isBefore=k;b.isTimeInRange=c;b.convertToRanges=function(a){for(var c=[],d=0;d<a.length;d++)c.push({start:a.start(d),end:a.end(d)});return c};
b.getRange=h;b.getNextRangeGap=function(a,c){for(var d=a.length,h=0;h<d;h++){var k=a.start(h);if(c<k)return k-c}return Infinity};b.getInnerAndOuterTimeRanges=function(a,c){for(var d=null,h=[],k=0;k<a.length;k++){var f=a.start(k),n=a.end(k);c<f||c>=n?h.push({start:f,end:n}):d={start:f,end:n}}return{outerRanges:h,innerRange:d}};b.getSizeOfRange=function(a,c){return(a=h(a,c))?a.end-a.start:0};b.getPlayedSizeOfRange=function(a,c){return(a=h(a,c))?c-a.start:0};b.getLeftSizeOfRange=function(a,c){return(a=
h(a,c))?a.end-c:Infinity};b.insertInto=function(a,c){if(c.start===c.end)return a;for(var h=0;h<a.length;h++){var b=a[h],m=d(c,b),p=Math.abs(b.start-c.end)<n||Math.abs(b.end-c.start)<n;if(m||p)c=g(c,b),a.splice(h--,1);else if(0===h){if(k(c,a[0]))break}else if(k(a[h-1],c)&&k(c,b))break}a.splice(h,0,c);return f(l(a))};b.keepRangeIntersection=function(a,c){for(var h=0;h<a.length;h++){var k=a[h];a:{var f=k;for(var n=c,b=0;b<n.length;b++)if(d(f,n[b])){f=n[b];break a}f=null}f?f.start>k.start?k.start=f.start:
f.end<k.end&&(k.end=f.end):a.splice(h--,1)}return a}},function(e,b,a){function g(a,c){return c.filter(function(c){var d=document.createElement(a.tagName);c="on"+c;c in d?d=!0:(d.setAttribute(c,"return;"),d="function"===typeof d[c]);return d})[0]}function l(a,c){return a.reduce(function(a,d){return a.concat((c||h.BROWSER_PREFIXES).map(function(a){return a+d}))},[])}function f(a,k){var f,n=l(a,k);return function(a){return a instanceof h.HTMLElement_?("undefined"===typeof f&&(f=g(a,n)),f?c.Observable.fromEvent(a,
f):c.Observable.never()):d.default(a,n)}}function k(){var a;null!=document.hidden?a="":null!=document.mozHidden?a="moz":null!=document.msHidden?a="ms":null!=document.webkitHidden&&(a="webkit");var c=a?a+"Hidden":"hidden";return d.default(document,a+"visibilitychange").map(function(){return document[c]})}Object.defineProperty(b,"__esModule",{value:!0});var c=a(0);e=a(3);a(1);var d=a(52),h=a(53);a=e.default.INACTIVITY_DELAY;var n=window.devicePixelRatio||1,m=k().filter(function(a){return!a}),p=k().debounceTime(a).filter(function(a){return a});
b.isInBackground$=function(){return c.Observable.merge(m,p).startWith(!1)};b.videoWidth$=function(a){return c.Observable.merge(c.Observable.interval(2E4),d.default(window,"resize").debounceTime(500)).startWith(0).map(function(){return a.clientWidth*n}).distinctUntilChanged()};a=f(["loadedmetadata"]);b.onLoadedMetadata$=a;a=f(["seeking"]);b.onSeeking$=a;a=f(["seeked"]);b.onSeeked$=a;a=f(["ended"]);b.onEnded$=a;a=f(["timeupdate"]);b.onTimeUpdate$=a;a=f(["fullscreenchange","FullscreenChange"],h.BROWSER_PREFIXES.concat("MS"));
b.onFullscreenChange$=a;b.onPlayPause$=function(a){return c.Observable.merge(f(["play"])(a),f(["pause"])(a))};b.onTextTrackChanges$=function(a){return c.Observable.merge(f(["addtrack"])(a),f(["removetrack"])(a))};a=f(["sourceopen","webkitsourceopen"]);b.onSourceOpen$=a;a=f(["encrypted","needkey"]);b.onEncrypted$=a;a=f(["keymessage","message"]);b.onKeyMessage$=a;a=f(["keyadded","ready"]);b.onKeyAdded$=a;a=f(["keyerror","error"]);b.onKeyError$=a;a=f(["keystatuseschange"]);b.onKeyStatusesChange$=a},
function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=/^(?:[a-z]+:)?\/\//i,l=/\/\.{1,2}\//;b.resolveURL=function(){for(var a=[],k=0;k<arguments.length;k++)a[k]=arguments[k];k=a.length;if(0===k)return"";for(var c="",d=0;d<k;d++){var h=a[d];"string"===typeof h&&""!==h&&(g.test(h)?c=h:("/"===h[0]&&(h=h.substr(1)),"/"===c[c.length-1]&&(c=c.substr(0,c.length-1)),c=c+"/"+h))}k=c;if(l.test(k)){a=[];k=k.split("/");c=0;for(d=k.length;c<d;c++)".."===k[c]?a.pop():"."!==k[c]&&a.push(k[c]);a=
a.join("/")}else a=k;return a};b.normalizeBaseURL=function(a){var k=a.lastIndexOf("/");return 0<=k?a.substring(0,k+1):a}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=0;b.default=function(){var a=0;g<Number.MAX_VALUE&&(a=g+1);g=a;return""+a}},function(e,b,a){b.isScheduler=function(a){return a&&"function"===typeof a.schedule}},function(e,b,a){var g=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var k in d)d.hasOwnProperty(k)&&(a[k]=d[k]);a.prototype=
null===d?Object.create(d):(c.prototype=d.prototype,new c)};e=a(0);var l=a(47),f=a(29),k=a(21);a=function(a){function c(c,d){a.call(this);this.array=c;this.scheduler=d;d||1!==c.length||(this._isScalar=!0,this.value=c[0])}g(c,a);c.create=function(a,d){return new c(a,d)};c.of=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];d=a[a.length-1];k.isScheduler(d)?a.pop():d=null;var b=a.length;return 1<b?new c(a,d):1===b?new l.ScalarObservable(a[0],d):new f.EmptyObservable(d)};c.dispatch=
function(a){var c=a.array,d=a.index,h=a.subscriber;d>=a.count?h.complete():(h.next(c[d]),h.closed||(a.index=d+1,this.schedule(a)))};c.prototype._subscribe=function(a){var d=this.array,h=d.length,k=this.scheduler;if(k)return k.schedule(c.dispatch,0,{array:d,index:0,count:h,subscriber:a});for(k=0;k<h&&!a.closed;k++)a.next(d[k]);a.complete()};return c}(e.Observable);b.ArrayObservable=a},function(e,b,a){e=a(75);a=a(76);b.async=new a.AsyncScheduler(e.AsyncAction)},function(e,b,a){Object.defineProperty(b,
"__esModule",{value:!0});b.default=function(){}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.ErrorTypes={NETWORK_ERROR:"NETWORK_ERROR",MEDIA_ERROR:"MEDIA_ERROR",ENCRYPTED_MEDIA_ERROR:"ENCRYPTED_MEDIA_ERROR",INDEX_ERROR:"INDEX_ERROR",OTHER_ERROR:"OTHER_ERROR"};b.RequestErrorTypes={TIMEOUT:"TIMEOUT",ERROR_EVENT:"ERROR_EVENT",ERROR_HTTP_CODE:"ERROR_HTTP_CODE",PARSE_ERROR:"PARSE_ERROR"};b.ErrorCodes={PIPELINE_RESOLVE_ERROR:"PIPELINE_RESOLVE_ERROR",PIPELINE_LOAD_ERROR:"PIPELINE_LOAD_ERROR",
PIPELINE_PARSING_ERROR:"PIPELINE_PARSING_ERROR",MANIFEST_PARSE_ERROR:"MANIFEST_PARSE_ERROR",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"MANIFEST_INCOMPATIBLE_CODECS_ERROR",MANIFEST_UNSUPPORTED_ADAPTATION_TYPE:"MANIFEST_UNSUPPORTED_ADAPTATION_TYPE",UNAVAILABLE_MEDIA_SOURCE:"UNAVAILABLE_MEDIA_SOURCE",MEDIA_STARTING_TIME_NOT_FOUND:"MEDIA_STARTING_TIME_NOT_FOUND",MEDIA_TIME_NOT_FOUND:"MEDIA_TIME_NOT_FOUND",MEDIA_IS_ENCRYPTED_ERROR:"MEDIA_IS_ENCRYPTED_ERROR",KEY_ERROR:"KEY_ERROR",KEY_STATUS_CHANGE_ERROR:"KEY_STATUS_CHANGE_ERROR",
KEY_UPDATE_ERROR:"KEY_UPDATE_ERROR",KEY_LOAD_ERROR:"KEY_LOAD_ERROR",KEY_LOAD_TIMEOUT:"KEY_LOAD_TIMEOUT",KEY_GENERATE_REQUEST_ERROR:"KEY_GENERATE_REQUEST_ERROR",INCOMPATIBLE_KEYSYSTEMS:"INCOMPATIBLE_KEYSYSTEMS",LICENSE_SERVER_CERTIFICATE_ERROR:"LICENSE_SERVER_CERTIFICATE_ERROR",BUFFER_APPEND_ERROR:"BUFFER_APPEND_ERROR",BUFFER_FULL_ERROR:"BUFFER_FULL_ERROR",BUFFER_TYPE_UNKNOWN:"BUFFER_TYPE_UNKNOWN",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",
MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_UNKNOWN:"MEDIA_ERR_UNKNOWN",MEDIA_SOURCE_NOT_SUPPORTED:"MEDIA_SOURCE_NOT_SUPPORTED",MEDIA_KEYS_NOT_SUPPORTED:"MEDIA_KEYS_NOT_SUPPORTED",OUT_OF_INDEX_ERROR:"OUT_OF_INDEX_ERROR",UNKNOWN_INDEX:"UNKNOWN_INDEX",UNKNOWN_ERROR:"UNKNOWN_ERROR"}},function(e,b,a){function g(a){for(var c=a.length,d=new Uint8Array(c),h=0;h<c;h++)d[h]=a.charCodeAt(h)&255;return d}function l(a,c){void 0===c&&(c="");for(var d="",h=0;h<a.byteLength;h++)d+=(a[h]>>>
4).toString(16),d+=(a[h]&15).toString(16),c.length&&h<a.byteLength-1&&(d+=c);return d}Object.defineProperty(b,"__esModule",{value:!0});var f=a(4);b.strToBytes=g;b.bytesToStr=function(a){return String.fromCharCode.apply(null,a)};b.bytesToUTF16Str=function(a){for(var c="",d=a.length,h=0;h<d;h+=2)c+=String.fromCharCode(a[h]);return c};b.hexToBytes=function(a){for(var c=a.length,d=new Uint8Array(c/2),h=0,k=0;h<c;h+=2,k++)d[k]=parseInt(a.substr(h,2),16)&255;return d};b.bytesToHex=l;b.concat=function(){for(var a=
[],c=0;c<arguments.length;c++)a[c]=arguments[c];c=a.length;for(var d=-1,h=0,f;++d<c;)f=a[d],h+="number"===typeof f?f:f.length;h=new Uint8Array(h);var b=0;for(d=-1;++d<c;)f=a[d],"number"===typeof f?b+=f:0<f.length&&(h.set(f,b),b+=f.length);return h};b.be2toi=function(a,c){return(a[c+0]<<8)+(a[c+1]<<0)};b.be3toi=function(a,c){return 65536*a[c+0]+256*a[c+1]+a[c+2]};b.be4toi=function(a,c){return 16777216*a[c+0]+65536*a[c+1]+256*a[c+2]+a[c+3]};b.be8toi=function(a,c){return 4294967296*(16777216*a[c+0]+
65536*a[c+1]+256*a[c+2]+a[c+3])+16777216*a[c+4]+65536*a[c+5]+256*a[c+6]+a[c+7]};b.itobe2=function(a){return new Uint8Array([a>>>8&255,a&255])};b.itobe4=function(a){return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255])};b.itobe8=function(a){var c=a%4294967296;a=(a-c)/4294967296;return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255])};b.le2toi=function(a,c){return(a[c+0]<<0)+(a[c+1]<<8)};b.le4toi=function(a,c){return a[c+0]+256*a[c+1]+65536*a[c+
2]+16777216*a[c+3]};b.le8toi=function(a,c){return a[c+0]+256*a[c+1]+65536*a[c+2]+16777216*a[c+3]+4294967296*(a[c+4]+256*a[c+5]+65536*a[c+6]+16777216*a[c+7])};b.itole2=function(a){return new Uint8Array([a&255,a>>>8&255])};b.itole4=function(a){return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255])};b.itole8=function(a){var c=a%4294967296;a=(a-c)/4294967296;return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255,c&255,c>>>8&255,c>>>16&255,c>>>24&255])};b.guidToUuid=function(a){f.default(16===
a.length,"UUID length should be 16");var c=g(a);a=c[0];var d=c[1],h=c[2],k=c[3],b=c[4],p=c[5],e=c[6],q=c[7],r=c.subarray(8,10);c=c.subarray(10,16);var t=new Uint8Array(16);t[0]=k;t[1]=h;t[2]=d;t[3]=a;t[4]=p;t[5]=b;t[6]=q;t[7]=e;t.set(r,8);t.set(c,10);return l(t)};b.toBase64URL=function(a){return btoa(a).replace(/\=+$/,"")}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(0),l=a(8);b.default=function(a){var f=a.url,c=a.body,d=a.headers,h=null==a.method?"GET":a.method,n=null==
a.responseType?"json":a.responseType,b=null==a.timeout?3E4:a.timeout;return g.Observable.create(function(k){var m=new XMLHttpRequest;m.open(h,f,!0);0<=b&&(m.timeout=b);m.responseType=n;"document"===m.responseType&&m.overrideMimeType("text/xml");if(d)for(var p in d)d.hasOwnProperty(p)&&m.setRequestHeader(p,d[p]);var e=Date.now();m.onerror=function(){k.error(new l.RequestError(m,f,l.RequestErrorTypes.ERROR_EVENT))};m.ontimeout=function(){k.error(new l.RequestError(m,f,l.RequestErrorTypes.TIMEOUT))};
a.ignoreProgressEvents||(m.onprogress=function(a){var c=Date.now();k.next({type:"progress",value:{url:f,duration:c-e,sentTime:e,currentTime:c,size:a.loaded,totalSize:a.total}})});m.onload=function(a){if(4===m.readyState)if(200<=m.status&&300>m.status){var c=Date.now();var d=a.total,h=m.status,n=m.responseType;a=m.responseURL||f;if("json"===n)if("string"!==m.response)var b=m.response;else try{b=JSON.parse(m.responseText)}catch(B){b=null}else b=m.response;null==b?(c=l.RequestErrorTypes.PARSE_ERROR,
k.error(new l.RequestError(m,a,c))):(k.next({type:"response",value:{status:h,url:a,responseType:n,sentTime:e,receivedTime:c,duration:c-e,size:d,responseData:b}}),k.complete())}else c=l.RequestErrorTypes.ERROR_HTTP_CODE,k.error(new l.RequestError(m,f,c))};void 0!==c?m.send(c):m.send();return function(){m&&4!==m.readyState&&m.abort()}})}},function(e,b,a){b.isArray=Array.isArray||function(a){return a&&"number"===typeof a.length}},function(e,b,a){var g=this&&this.__extends||function(a,f){function k(){this.constructor=
a}for(var c in f)f.hasOwnProperty(c)&&(a[c]=f[c]);a.prototype=null===f?Object.create(f):(k.prototype=f.prototype,new k)};e=function(a){function f(f){a.call(this);this.scheduler=f}g(f,a);f.create=function(a){return new f(a)};f.dispatch=function(a){a.subscriber.complete()};f.prototype._subscribe=function(a){var c=this.scheduler;if(c)return c.schedule(f.dispatch,0,{subscriber:a});a.complete()};return f}(a(0).Observable);b.EmptyObservable=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});
var g=a(1);e=function(){function a(){this._listeners={}}a.prototype.addEventListener=function(a,k){var c=this._listeners[a];c?c.push(k):this._listeners[a]=[k]};a.prototype.removeEventListener=function(a,k){if(null==a)this._listeners={};else{var c=this._listeners[a];c&&(null==k?delete this._listeners[a]:(k=c.indexOf(k),~k&&c.splice(k,1),c.length||delete this._listeners[a]))}};a.prototype.trigger=function(a,k){(a=this._listeners[a])&&a.slice().forEach(function(a){try{a(k)}catch(d){g.default.error(d,
d.stack)}})};return a}();b.default=e},function(e,b,a){var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c])};return function(c,d){function h(){this.constructor=c}a(c,d);c.prototype=null===d?Object.create(d):(h.prototype=d.prototype,new h)}}();Object.defineProperty(b,"__esModule",{value:!0});var l=a(25),f=a(32);e=function(a){function c(d,h,k){var n=a.call(this)||
this;Object.setPrototypeOf(n,c.prototype);n.name="MediaError";n.type=l.ErrorTypes.MEDIA_ERROR;n.reason=h;n.code=l.ErrorCodes.hasOwnProperty(d)?l.ErrorCodes[d]:"";n.fatal=!!k;n.message=f.default(n.name,n.code,n.reason);return n}g(c,a);return c}(Error);b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b,f){return null==f?a+" ("+b+")":"string"===typeof f?a+" ("+b+") "+f:a+" ("+b+") "+(f instanceof Event?f.type:f.message)}},function(e,b,a){function g(a,
c){for(var d=a.length,h=0,b,l=0;h+8<d&&(l=k.be4toi(a,h),b=k.be4toi(a,h+4),f.default(0<l,"out of range size"),b!==c);)h+=l;if(h>=d)return-1;f.default(h+l<=d,"atom out of range");return h}function l(a){var c=a.privateData;a=a.systemId.replace(/-/g,"");f.default(32===a.length);c=k.concat(4,k.hexToBytes(a),k.itobe4(c.length),c);return k.concat(k.itobe4(c.length+8),k.strToBytes("pssh"),c)}Object.defineProperty(b,"__esModule",{value:!0});var f=a(4),k=a(26),c=a(264);b.getMDAT=c.getMDAT;b.getMDIA=c.getMDIA;
b.getTRAF=c.getTRAF;b.parseSidx=function(a,c){var d=g(a,1936286840);if(-1===d)return null;var h=k.be4toi(a,d);d=d+4+4;var f=a[d];d+=8;var b=k.be4toi(a,d);d+=4;if(0===f)f=k.be4toi(a,d),d+=4,c+=k.be4toi(a,d)+h,d+=4;else if(1===f)f=k.be8toi(a,d),d+=8,c+=k.be8toi(a,d)+h,d+=8;else return null;h=[];d+=2;var l=k.be2toi(a,d);for(d+=2;0<=--l;){var e=k.be4toi(a,d);d+=4;var t=e&2147483647;if(1===(e&2147483648)>>>31)throw Error("not implemented");e=k.be4toi(a,d);d+=4;d+=4;h.push({time:f,duration:e,count:0,timescale:b,
range:[c,c+t-1]});f+=e;c+=t}return h};b.parseTfdt=function(a){a=c.getTRAF(a);if(!a)return-1;var d=g(a,1952867444);if(-1===d)return-1;d=d+4+4;var f=a[d];d+=4;return 1<f?-1:f?k.be8toi(a,d):k.be4toi(a,d)};b.getDurationFromTrun=function(a){a=c.getTRAF(a);if(!a)return-1;var d=g(a,1953658222);if(-1===d)return-1;d=d+4+4;var f=a[d];d+=1;if(1<f)return-1;var b=k.be3toi(a,d);d+=3;f=b&256;var l=0;if(!f)return d=g(a,1952868452),-1===d?l=-1:(d=d+4+4+1,f=k.be3toi(a,d),f&8?(d+=4,f&1&&(d+=8),f&2&&(d+=4),l=k.be4toi(a,
d)):l=-1),0<=l?l:-1;var e=b&1,q=b&4,r=b&512,t=b&1024;b&=2048;var x=k.be4toi(a,d);d+=4;e&&(d+=4);q&&(d+=4);e=x;for(q=0;e--;)f?(q+=k.be4toi(a,d),d+=4):q+=l,r&&(d+=4),t&&(d+=4),b&&(d+=4);return q};b.getMDHDTimescale=function(a){a=c.getMDIA(a);if(!a)return-1;var d=g(a,1835296868);if(-1===d)return-1;d=d+4+4;var f=a[d];d+=4;return 1===f?k.be4toi(a,d+16):0===f?k.be4toi(a,d+8):-1};b.patchPssh=function(a,c){if(!c||!c.length)return a;var d=g(a,1836019574);if(-1===d)return a;for(var h=k.be4toi(a,d),f=[a.subarray(d,
d+h)],b=0;b<c.length;b++)f.push(l(c[b]));c=k.concat.apply(void 0,f);c.set(k.itobe4(c.length),0);return k.concat(a.subarray(0,d),c,a.subarray(d+h))}},function(e,b,a){function g(a){if(null==a||""===a)return"";a=(""+a).toLowerCase().split("-");var c=a[0];switch(c.length){case 2:var d=l.default[c];break;case 3:d=f.default[c]}(d=d||c)&&(a[0]=d);return a.join("-")}Object.defineProperty(b,"__esModule",{value:!0});var l=a(266),f=a(267);b.normalize=g;b.normalizeTextTrack=function(a){if(null!=a){if("string"===
typeof a){var c=a;a=!1}else c=a.language,a=!!a.closedCaption;return{language:c,closedCaption:a,normalized:g(c)}}return a};b.normalizeAudioTrack=function(a){if(null!=a){if("string"===typeof a){var c=a;a=!1}else c=a.language,a=!!a.audioDescription;return{language:c,audioDescription:a,normalized:g(c)}}return a}},function(e,b,a){b.errorObject={e:{}}},function(e,b,a){var g=a(0),l=a(22),f=a(21),k=a(77);b.merge=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];d=Number.POSITIVE_INFINITY;
var h=null,b=a[a.length-1];f.isScheduler(b)?(h=a.pop(),1<a.length&&"number"===typeof a[a.length-1]&&(d=a.pop())):"number"===typeof b&&(d=a.pop());return null===h&&1===a.length&&a[0]instanceof g.Observable?a[0]:k.mergeAll(d)(new l.ArrayObservable(a,h))}},function(e,b,a){var g=a(21),l=a(78),f=a(70),k=a(80);b.concat=function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];return 1===a.length||2===a.length&&g.isScheduler(a[1])?f.from(a[0]):k.concatAll()(l.of.apply(void 0,a))}},function(e,
b,a){var g=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var h in c)c.hasOwnProperty(h)&&(a[h]=c[h]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(6);var l=a(250),f=a(16),k=a(72),c=a(51),d=a(81);a=function(a){function b(c,d,h){void 0===c&&(c=Number.POSITIVE_INFINITY);void 0===d&&(d=Number.POSITIVE_INFINITY);a.call(this);this.scheduler=h;this._events=[];this._bufferSize=1>c?1:c;this._windowTime=1>d?1:d}g(b,a);b.prototype.next=function(c){var d=
this._getNow();this._events.push(new h(d,c));this._trimBufferThenGetEvents();a.prototype.next.call(this,c)};b.prototype._subscribe=function(a){var h=this._trimBufferThenGetEvents(),b=this.scheduler;if(this.closed)throw new c.ObjectUnsubscribedError;if(this.hasError)var n=f.Subscription.EMPTY;else this.isStopped?n=f.Subscription.EMPTY:(this.observers.push(a),n=new d.SubjectSubscription(this,a));b&&a.add(a=new k.ObserveOnSubscriber(a,b));b=h.length;for(var l=0;l<b&&!a.closed;l++)a.next(h[l].value);
this.hasError?a.error(this.thrownError):this.isStopped&&a.complete();return n};b.prototype._getNow=function(){return(this.scheduler||l.queue).now()};b.prototype._trimBufferThenGetEvents=function(){for(var a=this._getNow(),c=this._bufferSize,d=this._windowTime,h=this._events,f=h.length,k=0;k<f&&!(a-h[k].time<d);)k++;f>c&&(k=Math.max(k,f-c));0<k&&h.splice(0,k);return h};return b}(e.Subject);b.ReplaySubject=a;var h=function(){return function(a,c){this.time=a;this.value=c}}()},function(e,b,a){function g(a,
f,k){var c=a.presentationTimeOffset||0;a=a.timescale||1;return{up:f*a-c,to:(f+k)*a-c}}Object.defineProperty(b,"__esModule",{value:!0});b.normalizeRange=g;b.getTimelineRangeStart=function(a){var f=a.ts,k=a.d;a=a.r;return-1===k?f:f+a*k};b.getTimelineRangeEnd=function(a){var f=a.ts,k=a.d;a=a.r;return-1===k?f:f+(a+1)*k};b.getInitSegment=function(a){var f=a.initialization;f=void 0===f?{}:f;return{id:"init",isInit:!0,time:0,range:f.range||void 0,indexRange:a.indexRange||void 0,media:f.media,timescale:a.timescale}};
b.getSegmentsFromTimeline=function(a,f,k){k=g(a,f,k);f=k.up;k=k.to;var c=a.timeline,d=a.timescale,h=a.media;a=a.startNumber;a=null!=a?a:void 0;for(var b=[],m=c.length,l=c.length&&c[0].d||0,e=0;e<m;e++){var q=c[e],r=q.d,t=q.ts,x=q.range;l=Math.max(l,r);if(0>r){if(t+l<k){var v={id:""+t,time:t,isInit:!1,range:x,duration:void 0,timescale:d,media:h,number:null!=a?a:void 0};b.push(v)}break}var w=c[e+1];v=q.r||0;0>v&&(v=Math.ceil(((w?w.ts:Infinity)-q.ts)/q.d)-1);q=v;w=f-t;w=0<w?Math.floor(w/r):0;for(v=t+
w*r;v<k&&w<=q;)v={id:""+v,time:v,isInit:!1,range:x,duration:r,timescale:d,media:h,number:null!=a?a+w:void 0},b.push(v),w++,v=t+w*r;if(v>=k)break;null!=a&&(a+=q+1)}return b}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(5),l=a(1),f=a(9),k=a(283);b.default=function(a){for(var c={},h=a.childNodes,b=0;b<h.length;b++){var m=h[b];"Initialization"===m.nodeName&&(c.initialization=k.default(m))}for(b=0;b<a.attributes.length;b++)switch(h=a.attributes[b],h.name){case "timescale":m=
parseInt(h.value,10);isNaN(m)?l.default.warn('DASH: invalid timescale ("'+h.value+'")'):c.timescale=m;break;case "timeShiftBufferDepth":m=f.parseDuration(h.value);isNaN(m)?l.default.warn('DASH: invalid timeShiftBufferDepth ("'+h.value+'")'):c.timeShiftBufferDepth=m;break;case "presentationTimeOffset":m=parseFloat(h.value);isNaN(m)?l.default.warn('DASH: invalid presentationTimeOffset ("'+h.value+'")'):c.presentationTimeOffset=m;break;case "indexRange":c.indexRange=f.parseByteRange(h.value)||void 0;
break;case "indexRangeExact":c.indexRangeExact=f.parseBoolean(h.value);break;case "availabilityTimeOffset":m=parseFloat(h.value);isNaN(m)?l.default.warn('DASH: invalid availabilityTimeOffset ("'+h.value+'")'):c.availabilityTimeOffset=m;break;case "availabilityTimeComplete":c.availabilityTimeComplete=f.parseBoolean(h.value);break;case "duration":m=parseInt(h.value,10);isNaN(m)?l.default.warn('DASH: invalid duration ("'+h.value+'")'):c.duration=m;break;case "startNumber":m=parseInt(h.value,10),isNaN(m)?
l.default.warn('DASH: invalid startNumber ("'+h.value+'")'):c.startNumber=m}return g(c,{availabilityTimeComplete:null==c.availabilityTimeComplete?!0:c.availabilityTimeComplete,indexRangeExact:!!c.indexRangeExact,timeline:[],timescale:null==c.timescale?1:c.timescale})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default={activePeriodChanged:function(a){return{type:"activePeriodChanged",value:{period:a}}},adaptationChange:function(a,b,f){return{type:"adaptationChange",value:{type:a,
adaptation:b,period:f}}},bufferComplete:function(a){return{type:"complete-buffer",value:{type:a}}},endOfStream:function(){return{type:"end-of-stream",value:void 0}},loaded:function(){return{type:"loaded",value:!0}},manifestReady:function(a,b){return{type:"manifestReady",value:{abrManager:a,manifest:b}}},manifestUpdate:function(a){return{type:"manifestUpdate",value:{manifest:a}}},nullRepresentation:function(a,b){return{type:"representationChange",value:{type:a,representation:null,period:b}}},periodBufferCleared:function(a,
b){return{type:"periodBufferCleared",value:{type:a,period:b}}},periodBufferReady:function(a,b,f){return{type:"periodBufferReady",value:{type:a,period:b,adaptation$:f}}},speedChanged:function(a){return{type:"speed",value:a}},stalled:function(a){return{type:"stalled",value:a}},warning:function(a){return{type:"warning",value:a}}}},function(e,b,a){b.isFunction=function(a){return"function"===typeof a}},function(e,b,a){function g(){try{return f.apply(this,arguments)}catch(k){return l.errorObject.e=k,l.errorObject}}
var l=a(35),f;b.tryCatch=function(a){f=a;return g}},function(e,b,a){e=a(15).root.Symbol;b.rxSubscriber="function"===typeof e&&"function"===typeof e.for?e.for("rxSubscriber"):"@@rxSubscriber";b.$$rxSubscriber=b.rxSubscriber},function(e,b,a){function g(a){var f=a.Symbol;"function"===typeof f?f.observable?a=f.observable:(a=f("observable"),f.observable=a):a="@@observable";return a}e=a(15);b.getSymbolObservable=g;b.observable=g(e.root);b.$$observable=b.observable},function(e,b,a){b.noop=function(){}},
function(e,b,a){var g=this&&this.__extends||function(a,f){function k(){this.constructor=a}for(var c in f)f.hasOwnProperty(c)&&(a[c]=f[c]);a.prototype=null===f?Object.create(f):(k.prototype=f.prototype,new k)};e=function(a){function f(f,c){a.call(this);this.value=f;this.scheduler=c;this._isScalar=!0;c&&(this._isScalar=!1)}g(f,a);f.create=function(a,c){return new f(a,c)};f.dispatch=function(a){var c=a.value,d=a.subscriber;a.done?d.complete():(d.next(c),d.closed||(a.done=!0,this.schedule(a)))};f.prototype._subscribe=
function(a){var c=this.value,d=this.scheduler;if(d)return d.schedule(f.dispatch,0,{done:!1,value:c,subscriber:a});a.next(c);a.closed||a.complete()};return f}(a(0).Observable);b.ScalarObservable=e},function(e,b,a){function g(a){var f=a.Symbol;if("function"===typeof f)return f.iterator||(f.iterator=f("iterator polyfill")),f.iterator;if((f=a.Set)&&"function"===typeof(new f)["@@iterator"])return"@@iterator";if(a=a.Map){f=Object.getOwnPropertyNames(a.prototype);for(var k=0;k<f.length;++k){var c=f[k];if("entries"!==
c&&"size"!==c&&a.prototype[c]===a.prototype.entries)return c}}return"@@iterator"}e=a(15);b.symbolIteratorPonyfill=g;b.iterator=g(e.root);b.$$iterator=b.iterator},function(e,b,a){var g=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var f in d)d.hasOwnProperty(f)&&(a[f]=d[f]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},l=a(11);e=a(10);b.mergeMap=function(a,d,h){void 0===h&&(h=Number.POSITIVE_INFINITY);return function(c){"number"===typeof d&&(h=d,d=
null);return c.lift(new f(a,d,h))}};var f=function(){function a(a,c,f){void 0===f&&(f=Number.POSITIVE_INFINITY);this.project=a;this.resultSelector=c;this.concurrent=f}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.project,this.resultSelector,this.concurrent))};return a}();b.MergeMapOperator=f;var k=function(a){function c(c,d,f,k){void 0===k&&(k=Number.POSITIVE_INFINITY);a.call(this,c);this.project=d;this.resultSelector=f;this.concurrent=k;this.hasCompleted=!1;this.buffer=[];this.index=
this.active=0}g(c,a);c.prototype._next=function(a){this.active<this.concurrent?this._tryNext(a):this.buffer.push(a)};c.prototype._tryNext=function(a){var c=this.index++;try{var d=this.project(a,c)}catch(p){this.destination.error(p);return}this.active++;this._innerSub(d,a,c)};c.prototype._innerSub=function(a,c,d){this.add(l.subscribeToResult(this,a,c,d))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyNext=
function(a,c,d,f,k){this.resultSelector?this._notifyResultSelector(a,c,d,f):this.destination.next(c)};c.prototype._notifyResultSelector=function(a,c,d,f){try{var h=this.resultSelector(a,c,d,f)}catch(q){this.destination.error(q);return}this.destination.next(h)};c.prototype.notifyComplete=function(a){var c=this.buffer;this.remove(a);this.active--;0<c.length?this._next(c.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(e.OuterSubscriber);b.MergeMapSubscriber=k},function(e,
b,a){var g=a(205);b.multicast=function(a,k){return function(c){var d="function"===typeof a?a:function(){return a};if("function"===typeof k)return c.lift(new l(d,k));var h=Object.create(c,g.connectableObservableDescriptor);h.source=c;h.subjectFactory=d;return h}};var l=function(){function a(a,c){this.subjectFactory=a;this.selector=c}a.prototype.call=function(a,c){var d=this.selector,h=this.subjectFactory();a=d(h).subscribe(a);a.add(c.subscribe(h));return a};return a}();b.MulticastOperator=l},function(e,
b,a){var g=this&&this.__extends||function(a,f){function k(){this.constructor=a}for(var c in f)f.hasOwnProperty(c)&&(a[c]=f[c]);a.prototype=null===f?Object.create(f):(k.prototype=f.prototype,new k)};e=function(a){function f(){var f=a.call(this,"object unsubscribed");this.name=f.name="ObjectUnsubscribedError";this.stack=f.stack;this.message=f.message}g(f,a);return f}(Error);b.ObjectUnsubscribedError=e},function(e,b,a){function g(a,c){if(Array.isArray(c)){var d=c.map(function(c){return g(a,c)});return l.Observable.merge.apply(l.Observable,
d)}return a instanceof f.default?l.Observable.create(function(d){var h=function(a){d.next(a)};a.addEventListener(c,h);return function(){a.removeEventListener(c,h)}}):l.Observable.fromEvent(a,c)}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(30);b.default=g},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(31);b.BROWSER_PREFIXES=["","webkit","moz","ms"];e=window;b.HTMLElement_=e.HTMLElement;b.VTTCue_=e.VTTCue||e.TextTrackCue;b.MediaSource_=e.MediaSource||e.MozMediaSource||
e.WebKitMediaSource||e.MSMediaSource;e=e.MediaKeys||e.MozMediaKeys||e.WebKitMediaKeys||e.MSMediaKeys;b.MediaKeys_=e;if(!e){var l=function(){throw new g.default("MEDIA_KEYS_NOT_SUPPORTED",null,!0);};b.MediaKeys_=e=function(){return function(){this.setServerCertificate=this.isTypeSupported=this.createSession=this.create=l}}()}e="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/(Trident|Edge)\//.test(navigator.userAgent);b.isIE=e;e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");
b.isFirefox=e;b.READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4}},function(e,b,a){function g(a){if(!a.isLive)return[a.minimumTime||0,a.getDuration()];var f=a.availabilityStartTime||0,k=a.presentationLiveGap||0,c=a.timeShiftBufferDepth||0;f=Date.now()/1E3-f-k;return[Math.min(f,Math.max(null!=a.minimumTime?a.minimumTime:0,f-c+5)),f]}Object.defineProperty(b,"__esModule",{value:!0});b.toWallClockTime=function(a,f){return new Date(1E3*(a+(f.availabilityStartTime||
0)))};b.fromWallClockTime=function(a,f){if(f.isLive){var k=f.suggestedPresentationDelay||0;var c=f.presentationLiveGap||0,d=f.timeShiftBufferDepth||0;a="number"===typeof a?a:+a;var h=Date.now();k=Math.max(Math.min(a,h-1E3*(c+k)),h-1E3*d)}else k=+a;return k/1E3-(f.availabilityStartTime||0)};b.getMinimumBufferPosition=function(a){return g(a)[0]};b.getMaximumBufferPosition=function(a){if(!a.isLive)return a.getDuration();var f=a.availabilityStartTime||0;a=a.presentationLiveGap||0;return Date.now()/1E3-
f-a};b.getBufferLimits=g},function(e,b,a){function g(a){if(u[a])return u[a];var c=m.strToBytes(a);return u[a]=c}function l(a,c){return m.concat(m.itobe4(c.length+8),g(a),c)}function f(a,c,d,h,f){for(var k=a.length,b=0,n;b<k;){n=m.be4toi(a,b);if(1970628964===m.be4toi(a,b+4)&&m.be4toi(a,b+8)===c&&m.be4toi(a,b+12)===d&&m.be4toi(a,b+16)===h&&m.be4toi(a,b+20)===f)return a.subarray(b+24,b+n);b+=n}}function k(a,c,d,h){var f=[a,c,d];h.forEach(function(a){a=q.pssh(a.systemId,a.privateData,a.keyIds);f.push(a)});
return f}function c(a,c,d,h){var f=a.length,k=c.length;d=d.length;a=a.subarray(d,f);f=new Uint8Array(k+(f-d));f.set(c,0);f.set(a,k);f.set(m.itobe4(c.length+8),h+16);return f}function d(a,c,d,h,f,b,n){d=q.mult("stbl",[d,l("stts",new Uint8Array(8)),l("stsc",new Uint8Array(8)),l("stsz",new Uint8Array(12)),l("stco",new Uint8Array(8))]);var e=l("url ",new Uint8Array([0,0,0,1]));e=q.dref(e);e=q.mult("dinf",[e]);h=q.mult("minf",[h,e,d]);c=q.hdlr(c);d=q.mdhd(a);c=q.mult("mdia",[d,c,h]);f=q.tkhd(f,b,1);f=
q.mult("trak",[f,c]);b=q.trex(1);b=q.mult("mvex",[b]);a=q.mvhd(a,1);n=q.mult("moov",k(a,b,f,n));a=q.ftyp("isom",["isom","iso2","iso6","avc1","dash"]);return m.concat(a,n)}Object.defineProperty(b,"__esModule",{value:!0});var h=a(7);e=a(33);var n=a(4),m=a(26),p=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],u={},q={mult:function(a,c){return l(a,m.concat.apply(null,c))},avc1encv:function(a,c,d,h,f,k,b,n,e,p){return l(a,m.concat(6,m.itobe2(c),16,m.itobe2(d),m.itobe2(h),m.itobe2(f),
2,m.itobe2(k),6,[0,1,b.length],m.strToBytes(b),31-b.length,m.itobe2(n),[255,255],e,"encv"===a?p||[]:[]))},avcc:function(a,c,d){return l("avcC",m.concat([1,a[1],a[2],a[3],252|(2===d?1:4===d?3:0),225],m.itobe2(a.length),a,[1],m.itobe2(c.length),c))},dref:function(a){return l("dref",m.concat(7,[1],a))},esds:function(a,c){return l("esds",m.concat(4,[3,25],m.itobe2(a),[0,4,17,64,21],11,[5,2],m.hexToBytes(c),[6,1,2]))},frma:function(a){return l("frma",m.strToBytes(a))},free:function(a){return l("free",
new Uint8Array(a-8))},ftyp:function(a,c){return l("ftyp",m.concat.apply(null,[m.strToBytes(a),[0,0,0,1]].concat(c.map(m.strToBytes))))},hdlr:function(a){switch(a){case "video":a="vide";var c="VideoHandler";break;case "audio":a="soun";c="SoundHandler";break;default:a="hint",c=""}return l("hdlr",m.concat(8,m.strToBytes(a),12,m.strToBytes(c),1))},mdhd:function(a){return l("mdhd",m.concat(12,m.itobe4(a),8))},moof:function(a,c){return q.mult("moof",[a,c])},mp4aenca:function(a,c,d,h,f,k,b,n){return l(a,
m.concat(6,m.itobe2(c),8,m.itobe2(d),m.itobe2(h),2,m.itobe2(f),m.itobe2(k),2,b,"enca"===a?n||[]:[]))},mvhd:function(a,c){return l("mvhd",m.concat(12,m.itobe4(a),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,m.itobe2(c+1)))},pssh:function(a,c,d){void 0===c&&(c=new Uint8Array(0));void 0===d&&(d=new Uint8Array(0));a=a.replace(/-/g,"");n.default(32===a.length,"wrong system id length");var h=d.length;if(0<h){var f=1;d=m.concat.apply(void 0,[m.itobe4(h)].concat(d))}else f=0,d=[];return l("pssh",m.concat([f,
0,0,0],m.hexToBytes(a),d,m.itobe4(c.length),c))},saio:function(a,c,d,h){return l("saio",m.concat(4,[0,0,0,1],m.itobe4(a.length+c.length+d.length+h.length+8+8+8+8)))},saiz:function(a){if(0===a.length)return l("saiz",new Uint8Array(0));var c=m.be4toi(a,0),d=m.be4toi(a,4),h=new Uint8Array(d+9);h.set(m.itobe4(d),5);d=9;for(var f=8,k,b;f<a.length;)f+=8,2===(c&2)?(b=2,k=m.be2toi(a,f),f+=6*k+2):b=k=0,h[d]=6*k+8+b,d++;return l("saiz",h)},schm:function(a,c){return l("schm",m.concat(4,m.strToBytes(a),m.itobe4(c)))},
senc:function(a){return l("senc",a)},smhd:function(){return l("smhd",new Uint8Array(8))},stsd:function(a){return l("stsd",m.concat.apply(void 0,[7,[a.length]].concat(a)))},tkhd:function(a,c,d){return l("tkhd",m.concat(m.itobe4(7),8,m.itobe4(d),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],m.itobe2(a),2,m.itobe2(c),2))},trex:function(a){return l("trex",m.concat(4,m.itobe4(a),[0,0,0,1],12))},tfdt:function(a){return l("tfdt",m.concat([1,0,0,0],m.itobe8(a)))},tenc:function(a,c,d){return l("tenc",
m.concat(6,[a,c],m.hexToBytes(d)))},traf:function(a,c,d,h,f){var k=[a,c,d];f&&k.push(q.senc(f),q.saiz(f),q.saio(h,a,c,d));return q.mult("traf",k)},trun:function(a){if(a[11]&1)return a;var c=new Uint8Array(a.length+4);c.set(m.itobe4(a.length+4),0);c.set(a.subarray(4,16),4);c[11]|=1;c.set([0,0,0,0],16);c.set(a.subarray(16,a.length),20);return c},vmhd:function(){var a=new Uint8Array(12);a[3]=1;return l("vmhd",a)}},r={senc:function(a){return f(a,2721664850,1520127764,2722393154,2086964724)},tfxd:function(a){return f(a,
1830656773,1121273062,2162299933,2952222642)},tfrf:function(a){return f(a,3565190898,3392751253,2387879627,2655430559)}};b.default={getMdat:e.getMDAT,getTraf:e.getTRAF,parseTfrf:function(a){a=r.tfrf(a);if(!a)return[];for(var c=[],d=a[0],h=a[4],f=0;f<h;f++){if(1===d){var k=m.be8toi(a,16*f+5);var b=m.be8toi(a,16*f+13)}else k=m.be4toi(a,8*f+5),b=m.be4toi(a,8*f+9);c.push({time:k,duration:b})}return c},parseTfxd:function(a){if(a=r.tfxd(a))return{duration:m.be8toi(a,12),time:m.be8toi(a,4)}},createVideoInitSegment:function(a,
c,h,f,k,b,n,l,e){e=e||[];var p=n.split("00000001");n=p[2];p=m.hexToBytes(p[1]);n=m.hexToBytes(n);b=q.avcc(p,n,b);e.length&&null!=l?(l=q.tenc(1,8,l),l=q.mult("schi",[l]),n=q.schm("cenc",65536),p=q.frma("avc1"),l=q.mult("sinf",[p,n,l]),f=q.avc1encv("encv",1,c,h,f,k,"AVC Coding",24,b,l)):f=q.avc1encv("avc1",1,c,h,f,k,"AVC Coding",24,b);f=q.stsd([f]);return d(a,"video",f,q.vmhd(),c,h,e)},createAudioInitSegment:function(a,c,h,f,k,b,n,l){l=l||[];b||(b=(32|p.indexOf(k)&31)<<4,b=m.bytesToHex(m.itobe2((b|
c&31)<<3)));b=q.esds(1,b);if(l.length&&null!=n){n=q.tenc(1,8,n);n=q.mult("schi",[n]);var e=q.schm("cenc",65536),g=q.frma("mp4a");n=q.mult("sinf",[g,e,n]);c=q.mp4aenca("enca",1,c,h,f,k,b,n)}else c=q.mp4aenca("mp4a",1,c,h,f,k,b);c=q.stsd([c]);return d(a,"audio",c,q.smhd(),0,0,l)},patchSegment:function(a,d){var f=a.subarray(0,m.be4toi(a,0)),k=q.tfdt(d);d=k.length;var b=m.be4toi(f,8),n=m.be4toi(f,b+8),l=m.be4toi(f,b+8+8),e=m.be4toi(f,b+8+8+l),p=f.subarray(8,b+8),g=f.subarray(b+8+8,b+8+8+n-8);n=g.subarray(0,
l);e=g.subarray(l,l+e);n.set([0,0,0,1],12);g=r.senc(g);e=q.trun(e);k=q.traf(n,k,e,p,g);p=q.moof(p,k);d=b+8+8+l+d;return h.isIE?c(a,p,f,d):8<=f.length-p.length?(f=f.length-p.length,a.set(p,0),a.set(q.free(f),p.length),a.set(m.itobe4(p.length+8+f),d+16),a):c(a,p,f,d)}}},function(e,b,a){function g(a,b){a=a.toString();return a.length>=b?a:(Array(b+1).join("0")+a).slice(-b)}function l(a){return function(f,c,d){f=d?parseInt(d,10):1;return g(""+a,f)}}Object.defineProperty(b,"__esModule",{value:!0});b.addNextSegments=
function(a,b,c){a.index._addSegments(b,c)};b.pad=g;b.processFormatedToken=l;b.replaceTokens=function(a,b,c){return-1===a.indexOf("$")?a:a.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,String(c.id)).replace(/\$Bandwidth(|\%0(\d+)d)\$/g,l(c.bitrate)).replace(/\$Number(|\%0(\d+)d)\$/g,function(a,c,f){if(null==b.number)throw Error("Segment number not defined in a $Number$ scheme");return l(b.number)(a,c,f)}).replace(/\$Time(|\%0(\d+)d)\$/g,function(a,c,f){if(null==b.time)throw Error("Segment time not defined in a $Time$ scheme");
return l(b.time)(a,c,f)})};b.isMP4EmbeddedTrack=function(a){return"application/mp4"===a.mimeType};b.byteRange=function(a){var f=a[0];return(a=a[1])&&Infinity!==a?"bytes="+ +f+"-"+ +a:"bytes="+ +f+"-"}},function(e,b,a){function g(a){return c.Observable.defer(function(){return m.default(a.createMediaKeys())})}function l(a,d,h,f){return c.Observable.defer(function(){p.default.info("eme: encrypted event",a);if(null==a.initData)throw new n.EncryptedMediaError("INVALID_ENCRYPTED_EVENT",Error("no init data found on media encrypted event."),
!0);var b=d.mediaKeys,k=d.keySystem,m=d.keySystemAccess.getConfiguration(),l=new Uint8Array(a.initData),e=v.default(b,m,h,k,w);b=x.default(b,m,k,a.initDataType,l,f);return c.Observable.merge(e,b)})}function f(a,d,f){d=r.default(d,w).mergeMap(function(a){return g(a.keySystemAccess).mergeMap(function(d){var h=a.keySystem,b=h.serverCertificate;if(h.persistentLicense)if(h.licenseStorage)p.default.info("set the given license storage"),q.$storedSessions.setStorage(h.licenseStorage);else throw new n.EncryptedMediaError("INVALID_KEY_SYSTEM",
Error("no license storage found for persistent license."),!0);h=c.Observable.of(k({mediaKeys:d},a));return null!=b&&"function"===typeof d.setServerCertificate?t.trySettingServerCertificate(d,b,f).concat(h):h})});return c.Observable.combineLatest(h.onEncrypted$(a).take(1),d).mergeMap(function(c){return l(c[0],c[1],a,f)})}Object.defineProperty(b,"__esModule",{value:!0});var k=a(5),c=a(0),d=a(7),h=a(18),n=a(8);a(4);var m=a(13),p=a(1),u=a(24),q=a(58),r=a(292),t=a(293),x=a(294),v=a(296),w={$mediaKeys:null,
$mediaKeySystemConfiguration:null,$keySystem:null,$videoElement:null};b.createEME=f;b.dispose=function(){v.disposeMediaKeys(w.$videoElement).subscribe(u.default);w.$mediaKeys=null;w.$keySystem=null;w.$videoElement=null;w.$mediaKeySystemConfiguration=null;q.$loadedSessions.dispose()};b.clearEME=function(){return c.Observable.defer(function(){var a=[];if(w.$videoElement&&d.shouldUnsetMediaKeys()){var h=v.disposeMediaKeys(w.$videoElement).ignoreElements().finally(function(){w.$videoElement=null});a.push(h)}w.$keySystem&&
w.$keySystem.closeSessionsOnStop&&a.push(q.$loadedSessions.dispose().ignoreElements());return a.length?c.Observable.merge.apply(c.Observable,a):c.Observable.empty()})};b.getCurrentKeySystem=function(){return r.getKeySystem(w)};b.default=function(a,c,b){return c&&c.length?d.hasEMEAPIs()?f(a,c,b):h.onEncrypted$(a).map(function(){p.default.error("eme: encrypted event but no EME API available");throw new n.EncryptedMediaError("MEDIA_IS_ENCRYPTED_ERROR",null,!0);}):h.onEncrypted$(a).map(function(){p.default.error("eme: ciphered media and no keySystem passed");
throw new n.EncryptedMediaError("MEDIA_IS_ENCRYPTED_ERROR",null,!0);})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(24);a=a(289);e=new a.PersistedSessionsSet({load:function(){return[]},save:e.default});b.$storedSessions=e;a=new a.InMemorySessionsSet;b.$loadedSessions=a},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(0);b.default=function(a,f){try{return a(f)}catch(k){return g.Observable.throw(k)}}},function(e,b,a){function g(a){return"audio"===a||
"video"===a}Object.defineProperty(b,"__esModule",{value:!0});var l=a(31),f=a(1),k=a(327),c=a(328);b.QueuedSourceBuffer=c.default;var d=a(329);e=a(106);b.ICustomTimeRanges=e.default;b.BUFFER_TYPES=["audio","video","text","image"];e=function(){function a(a,c){this._videoElement=a;this._mediaSource=c;this._initializedNativeSourceBuffers={};this._initializedCustomSourceBuffers={}}a.isNative=function(a){return g(a)};a.prototype.has=function(a){return g(a)?!!this._initializedNativeSourceBuffers[a]:!!this._initializedCustomSourceBuffers[a]};
a.prototype.get=function(a){var c=g(a)?this._initializedNativeSourceBuffers[a]:this._initializedCustomSourceBuffers[a];if(!c)throw Error("SourceBufferManager: no "+a+" initialized yet");return c.sourceBuffer};a.prototype.createSourceBuffer=function(a,h,b){void 0===b&&(b={});if(g(a)){if(b=this._initializedNativeSourceBuffers[a])return b.codec!==h?f.default.warn("reusing native SourceBuffer with codec",b.codec,"for codec",h):f.default.info("reusing native SourceBuffer with codec",h),b.sourceBuffer;
f.default.info("adding native SourceBuffer with codec",h);b=this._mediaSource.addSourceBuffer(h);b=new c.default(b);this._initializedNativeSourceBuffers[a]={codec:h,sourceBuffer:b};return b}var n=this._initializedCustomSourceBuffers[a];if(n)return f.default.info("reusing a previous custom SourceBuffer for the type",a),n.sourceBuffer;if("text"===a)return f.default.info("creating a new text SourceBuffer with codec",h),a="html"===b.textTrackMode?new d.HTMLTextSourceBuffer(this._videoElement,b.textTrackElement):
new d.NativeTextSourceBuffer(this._videoElement,b.hideNativeSubtitle),a=new c.default(a),this._initializedCustomSourceBuffers.text={codec:h,sourceBuffer:a},a;if("image"===a)return f.default.info("creating a new image SourceBuffer with codec",h),a=new k.default,a=new c.default(a),this._initializedCustomSourceBuffers.image={codec:h,sourceBuffer:a},a;f.default.error("unknown buffer type:",a);throw new l.default("BUFFER_TYPE_UNKNOWN",null,!0);};a.prototype.disposeSourceBuffer=function(a){if(g(a)){var c=
this._initializedNativeSourceBuffers[a];if(null!=c){f.default.info("aborting native source buffer",a);if("open"===this._mediaSource.readyState)try{c.sourceBuffer.abort()}catch(p){f.default.warn("failed to abort a SourceBuffer:",p)}delete this._initializedNativeSourceBuffers[a]}}else if("text"===a||"image"===a){if(c=this._initializedCustomSourceBuffers[a],null!=c){f.default.info("aborting custom source buffer",a);try{c.sourceBuffer.abort()}catch(p){f.default.warn("failed to abort a SourceBuffer:",
p)}delete this._initializedCustomSourceBuffers[a]}}else f.default.error("cannot dispose an unknown buffer type",a)};a.prototype.disposeAll=function(){var a=this;b.BUFFER_TYPES.forEach(function(c){a.has(c)&&a.disposeSourceBuffer(c)})};return a}();b.default=e},function(e,b,a){var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return function(c,d){function h(){this.constructor=
c}a(c,d);c.prototype=null===d?Object.create(d):(h.prototype=d.prototype,new h)}}();Object.defineProperty(b,"__esModule",{value:!0});var l=a(4),f=a(13);e=a(30);var k=a(59),c=a(106);a=function(a){function d(){var d=a.call(this)||this;d.updating=!1;d.readyState="opened";d.buffered=new c.default;return d}g(d,a);d.prototype.appendBuffer=function(a){var c=this;this._lock(function(){return c._append(a)})};d.prototype.remove=function(a,c){var d=this;this._lock(function(){return d._remove(a,c)})};d.prototype.abort=
function(){this.remove(0,Infinity);this.updating=!1;this.readyState="closed";this._abort()};d.prototype._lock=function(a){var c=this;l.default(!this.updating,"updating");this.updating=!0;this.trigger("updatestart",void 0);k.default(function(){return f.default(a())}).subscribe(function(){return setTimeout(function(){c._unlock("update")},0)},function(a){return setTimeout(function(){c._unlock("error",a)},0)})};d.prototype._unlock=function(a,c){this.updating=!1;this.trigger(a,c);this.trigger("updateend",
void 0)};return d}(e.default);b.default=a},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){function f(a){var c=[];a.tagName.toLowerCase()===b.toLowerCase()&&c.push(a);a=a.parentNode;a instanceof Element&&c.push.apply(c,f(a));return c}return a.parentNode instanceof Element?f(a.parentNode):[]}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(12),l=a(14),f=a(335);b.getStylingAttributes=function(a,c,d,h){var f={},b=a.slice();a=function(a){var k=
c[a];if(k){for(var n,m,e=0;e<=k.attributes.length-1;e++){a=k.attributes[e];var p=a.name;if("style"===p)n=a.value;else if("region"===p)m=a.value;else if(p=p.substr(4),l.default(b,p)&&(f[p]=a.value,b.splice(e,1),!b.length))return{value:f}}if(n&&(k=g(d,function(a){return a.id===n})))for(e=0;e<=b.length-1;e++)if(a=b[e],!f[a]&&k.style[a]){f[a]=k.style[a];b.splice(e,1);if(!b.length)return{value:f};e--}if(m&&(k=g(h,function(a){return a.id===m})))for(e=0;e<=b.length-1;e++)if(a=b[e],!f[a]&&k.style[a]){f[a]=
k.style[a];b.splice(e,1);if(!b.length)return{value:f};e--}}};for(var k=0;k<=c.length-1;k++){var e=a(k);if("object"===typeof e)return e.value}return f};b.getStylingFromElement=function(a){for(var c={},d=0;d<=a.attributes.length-1;d++){var h=a.attributes[d];if(f.default(h.name,"tts")){var b=h.name.substr(4);c[b]=h.value}}return c}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.REGXP_TIME_COLON_FRAMES=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/;b.REGXP_TIME_COLON=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/;
b.REGXP_TIME_COLON_MS=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/;b.REGXP_TIME_FRAMES=/^(\d*\.?\d*)f$/;b.REGXP_TIME_TICK=/^(\d*\.?\d*)t$/;b.REGXP_TIME_HMS=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/;b.REGXP_PERCENT_VALUES=/^(\d{1,2}|100)% (\d{1,2}|100)%$/;b.REGXP_8_HEX_COLOR=/^#([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})$/;b.REGXP_4_HEX_COLOR=/^#([0-9A-f])([0-9A-f])([0-9A-f])([0-9A-f])$/},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(12),
l=a(14);e=function(){function a(a){this._array=[];this._sortingFn=a}a.prototype.get=function(a){if(0>a||a>=this._array.length)throw Error("Invalid index.");return this._array[a]};a.prototype.unwrap=function(){return this._array};a.prototype.find=function(a){return g(this._array,a)};a.prototype.indexOf=function(a){return this._array.indexOf(a)};a.prototype.has=function(a){return l.default(this._array,a)};a.prototype.length=function(){return this._array.length};a.prototype.add=function(){for(var a=
[],c=0;c<arguments.length;c++)a[c]=arguments[c];a.sort(this._sortingFn);for(var d=c=0;d<a.length;d++){for(var h=a[d],f=!1;!f&&c<this._array.length;)0>this._sortingFn(h,this._array[c])?(this._array.splice(c,0,h),f=!0):c++;f||this._array.push(h)}};a.prototype.removeFirst=function(a){a=this._array.indexOf(a);if(0<=a)return this._array.splice(a,1),a};a.prototype.head=function(){return this._array[0]};a.prototype.last=function(){return this._array[this._array.length-1]};a.prototype.shift=function(){return this._array.shift()};
a.prototype.pop=function(){return this._array.pop()};a.prototype.isBefore=function(a){return this._array.length?0>this._sortingFn(a,this._array[0]):!0};a.prototype.isAfter=function(a){return this._array.length?0<=this._sortingFn(a,this._array[this._array.length-1]):!0};a.prototype.checkSort=function(){for(var a=0;a<this._array.length-1;a++)if(0<this._sortingFn(this._array[a],this._array[a+1]))return!1;return!0};a.prototype.forceSort=function(){this._array.sort(this._sortingFn)};return a}();b.default=
e},function(e,b,a){b.isObject=function(a){return null!=a&&"object"===typeof a}},function(e,b,a){b.empty={closed:!0,next:function(a){},error:function(a){throw a;},complete:function(){}}},function(e,b,a){b.isArrayLike=function(a){return a&&"number"===typeof a.length}},function(e,b,a){b.isPromise=function(a){return a&&"function"!==typeof a.subscribe&&"function"===typeof a.then}},function(e,b,a){e=a(132);b.from=e.FromObservable.create},function(e,b,a){function g(a){var c=a.value;a=a.subscriber;a.closed||
(a.next(c),a.complete())}function l(a){var c=a.err;a=a.subscriber;a.closed||a.error(c)}var f=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var f in d)d.hasOwnProperty(f)&&(a[f]=d[f]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},k=a(15);e=function(a){function c(c,d){a.call(this);this.promise=c;this.scheduler=d}f(c,a);c.create=function(a,d){return new c(a,d)};c.prototype._subscribe=function(a){var c=this,d=this.promise,h=this.scheduler;if(null==h)this._isScalar?
a.closed||(a.next(this.value),a.complete()):d.then(function(d){c.value=d;c._isScalar=!0;a.closed||(a.next(d),a.complete())},function(c){a.closed||a.error(c)}).then(null,function(a){k.root.setTimeout(function(){throw a;})});else if(this._isScalar){if(!a.closed)return h.schedule(g,0,{value:this.value,subscriber:a})}else d.then(function(d){c.value=d;c._isScalar=!0;a.closed||a.add(h.schedule(g,0,{value:d,subscriber:a}))},function(c){a.closed||a.add(h.schedule(l,0,{err:c,subscriber:a}))}).then(null,function(a){k.root.setTimeout(function(){throw a;
})})};return c}(a(0).Observable);b.PromiseObservable=e},function(e,b,a){var g=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var h in c)c.hasOwnProperty(h)&&(a[h]=c[h]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(2);var l=a(135);b.observeOn=function(a,c){void 0===c&&(c=0);return function(d){return d.lift(new f(a,c))}};var f=function(){function a(a,c){void 0===c&&(c=0);this.scheduler=a;this.delay=c}a.prototype.call=function(a,c){return c.subscribe(new k(a,
this.scheduler,this.delay))};return a}();b.ObserveOnOperator=f;var k=function(a){function d(c,d,h){void 0===h&&(h=0);a.call(this,c);this.scheduler=d;this.delay=h}g(d,a);d.dispatch=function(a){a.notification.observe(a.destination);this.unsubscribe()};d.prototype.scheduleMessage=function(a){this.add(this.scheduler.schedule(d.dispatch,this.delay,new c(a,this.destination)))};d.prototype._next=function(a){this.scheduleMessage(l.Notification.createNext(a))};d.prototype._error=function(a){this.scheduleMessage(l.Notification.createError(a))};
d.prototype._complete=function(){this.scheduleMessage(l.Notification.createComplete())};return d}(e.Subscriber);b.ObserveOnSubscriber=k;var c=function(){return function(a,c){this.notification=a;this.destination=c}}();b.ObserveOnMessage=c},function(e,b,a){e=a(0);a=a(139);e.Observable.fromPromise=a.fromPromise},function(e,b,a){var g=a(28);b.isNumeric=function(a){return!g.isArray(a)&&0<=a-parseFloat(a)+1}},function(e,b,a){var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&
(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},l=a(15);e=function(a){function f(c,d){a.call(this,c,d);this.scheduler=c;this.work=d;this.pending=!1}g(f,a);f.prototype.schedule=function(a,d){void 0===d&&(d=0);if(this.closed)return this;this.state=a;this.pending=!0;a=this.id;var c=this.scheduler;null!=a&&(this.id=this.recycleAsyncId(c,a,d));this.delay=d;this.id=this.id||this.requestAsyncId(c,this.id,d);return this};f.prototype.requestAsyncId=function(a,d,h){void 0===
h&&(h=0);return l.root.setInterval(a.flush.bind(a,this),h)};f.prototype.recycleAsyncId=function(a,d,h){void 0===h&&(h=0);return null!==h&&this.delay===h&&!1===this.pending?d:(l.root.clearInterval(d),void 0)};f.prototype.execute=function(a,d){if(this.closed)return Error("executing a cancelled action");this.pending=!1;if(a=this._execute(a,d))return a;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))};f.prototype._execute=function(a,d){d=!1;var c=void 0;try{this.work(a)}catch(n){d=
!0,c=!!n&&n||Error(n)}if(d)return this.unsubscribe(),c};f.prototype._unsubscribe=function(){var a=this.id,d=this.scheduler,f=d.actions,b=f.indexOf(this);this.state=this.work=null;this.pending=!1;this.scheduler=null;-1!==b&&f.splice(b,1);null!=a&&(this.id=this.recycleAsyncId(d,a,null));this.delay=null};return f}(a(143).Action);b.AsyncAction=e},function(e,b,a){var g=this&&this.__extends||function(a,f){function b(){this.constructor=a}for(var c in f)f.hasOwnProperty(c)&&(a[c]=f[c]);a.prototype=null===
f?Object.create(f):(b.prototype=f.prototype,new b)};e=function(a){function f(){a.apply(this,arguments);this.actions=[];this.active=!1;this.scheduled=void 0}g(f,a);f.prototype.flush=function(a){var c=this.actions;if(this.active)c.push(a);else{var d;this.active=!0;do if(d=a.execute(a.state,a.delay))break;while(a=c.shift());this.active=!1;if(d){for(;a=c.shift();)a.unsubscribe();throw d;}}};return f}(a(144).Scheduler);b.AsyncScheduler=e},function(e,b,a){var g=a(49),l=a(146);b.mergeAll=function(a){void 0===
a&&(a=Number.POSITIVE_INFINITY);return g.mergeMap(l.identity,null,a)}},function(e,b,a){e=a(22);b.of=e.ArrayObservable.of},function(e,b,a){b.isDate=function(a){return a instanceof Date&&!isNaN(+a)}},function(e,b,a){var g=a(77);b.concatAll=function(){return g.mergeAll(1)}},function(e,b,a){var g=this&&this.__extends||function(a,f){function b(){this.constructor=a}for(var c in f)f.hasOwnProperty(c)&&(a[c]=f[c]);a.prototype=null===f?Object.create(f):(b.prototype=f.prototype,new b)};e=function(a){function f(f,
c){a.call(this);this.subject=f;this.subscriber=c;this.closed=!1}g(f,a);f.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var a=this.subject,c=a.observers;this.subject=null;!c||0===c.length||a.isStopped||a.closed||(a=c.indexOf(this.subscriber),-1!==a&&c.splice(a,1))}};return f}(a(16).Subscription);b.SubjectSubscription=e},function(e,b,a){var g=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):
(d.prototype=c.prototype,new d)};e=a(2);b.refCount=function(){return function(a){return a.lift(new l(a))}};var l=function(){function a(a){this.connectable=a}a.prototype.call=function(a,d){var c=this.connectable;c._refCount++;a=new f(a,c);d=d.subscribe(a);a.closed||(a.connection=c.connect());return d};return a}(),f=function(a){function c(c,f){a.call(this,c);this.connectable=f}g(c,a);c.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var c=a._refCount;0>=c?this.connection=
null:(a._refCount=c-1,1<c?this.connection=null:(c=this.connection,a=a._connection,this.connection=null,!a||c&&a!==c||a.unsubscribe()))}else this.connection=null};return c}(e.Subscriber)},function(e,b,a){var g=this&&this.__extends||function(a,f){function b(){this.constructor=a}for(var c in f)f.hasOwnProperty(c)&&(a[c]=f[c]);a.prototype=null===f?Object.create(f):(b.prototype=f.prototype,new b)};e=function(a){function f(){var f=a.call(this,"Timeout has occurred");this.name=f.name="TimeoutError";this.stack=
f.stack;this.message=f.message}g(f,a);return f}(Error);b.TimeoutError=e},function(e,b,a){var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(6);var l=a(51);a=function(a){function f(c){a.call(this);this._value=c}g(f,a);Object.defineProperty(f.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0});f.prototype._subscribe=function(c){var d=
a.prototype._subscribe.call(this,c);d&&!d.closed&&c.next(this._value);return d};f.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new l.ObjectUnsubscribedError;return this._value};f.prototype.next=function(c){a.prototype.next.call(this,this._value=c)};return f}(e.Subject);b.BehaviorSubject=a},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=function(){function a(a,f,b){this._keyType=a;this._mediaKeys=f;this._configuration=b}Object.defineProperty(a.prototype,
"keySystem",{get:function(){return this._keyType},enumerable:!0,configurable:!0});a.prototype.createMediaKeys=function(){var a=this;return new Promise(function(f){return f(a._mediaKeys)})};a.prototype.getConfiguration=function(){return this._configuration};return a}();b.default=e},function(e,b,a){var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return function(c,
d){function f(){this.constructor=c}a(c,d);c.prototype=null===d?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(6),k=a(26),c=a(13);e=a(30);var d=a(53),h=a(18),n=a(85),m;b.requestMediaKeySystemAccess=m;var p=function(a){return function(c,d){var f=this;return new Promise(function(h,b){try{a.call(f,c,d),h()}catch(A){b(A)}})}},u=function(a){function c(c,d){var b=a.call(this)||this;b._closeSession$=new f.Subject;b._vid=c;b._key=d;b.sessionId=
"";b.closed=new Promise(function(a){b._closeSession$.subscribe(a)});b.keyStatuses=new Map;b.expiration=NaN;l.Observable.merge(h.onKeyMessage$(c),h.onKeyAdded$(c),h.onKeyError$(c)).takeUntil(b._closeSession$).subscribe(function(a){return b.trigger(a.type,a)});b.update=p(function(a,c){if(0<=b._key.indexOf("clearkey")){var d=JSON.parse(k.bytesToStr(a));a=k.strToBytes(atob(d.keys[0].k));d=k.strToBytes(atob(d.keys[0].kid));b._vid.webkitAddKey(b._key,a,d,c)}else b._vid.webkitAddKey(b._key,a,null,c);b.sessionId=
c});return b}g(c,a);c.prototype.generateRequest=function(a,c){var d=this;return new Promise(function(a){if("function"!==typeof d._vid.webkitGenerateKeyRequest)throw Error("impossible to generate a key request");d._vid.webkitGenerateKeyRequest(d._key,c);a()})};c.prototype.close=function(){var a=this;return new Promise(function(c){a._closeSession$.next();a._closeSession$.complete();c()})};c.prototype.load=function(){return new Promise(function(a){a(!1)})};c.prototype.remove=function(){return new Promise(function(a){a()})};
return c}(e.default),q=function(a){function c(c){var d=a.call(this)||this;d.sessionId="";d.expiration=NaN;d.keyStatuses=new Map;d._mk=c;d._closeSession$=new f.Subject;d.closed=new Promise(function(a){d._closeSession$.subscribe(a)});d.update=p(function(a,c){if(!d._ss)throw Error("MediaKeySession not set");d._ss.update(a,c);d.sessionId=c});return d}g(c,a);c.prototype.generateRequest=function(a,c){var d=this;return new Promise(function(a){d._ss=d._mk.memCreateSession("video/mp4",c);l.Observable.merge(h.onKeyMessage$(d._ss),
h.onKeyAdded$(d._ss),h.onKeyError$(d._ss)).takeUntil(d._closeSession$).subscribe(function(a){return d.trigger(a.type,a)});a()})};c.prototype.close=function(){var a=this;return new Promise(function(c){a._ss&&(a._ss.close(),a._ss=void 0);a._closeSession$.next();a._closeSession$.complete();c()})};c.prototype.load=function(){return new Promise(function(a){a(!1)})};c.prototype.remove=function(){return new Promise(function(a){a()})};return c}(e.default),r=function(){function a(){}a.prototype._setVideo=
function(){throw Error("MediaKeys is not implemented in your browser");};a.prototype.createSession=function(){throw Error("MediaKeys is not implemented in your browser");};a.prototype.setServerCertificate=function(){throw Error("MediaKeys is not implemented in your browser");};return a}();b.MockMediaKeys=r;if(navigator.requestMediaKeySystemAccess)b.requestMediaKeySystemAccess=m=function(a,d){return c.default(navigator.requestMediaKeySystemAccess(a,d))};else if(HTMLVideoElement.prototype.webkitGenerateKeyRequest){b.MockMediaKeys=
r=function(){function a(a){this.ks_=a}a.prototype._setVideo=function(a){this._vid=a};a.prototype.createSession=function(){if(!this._vid)throw Error("Video not attached to the MediaKeys");return new u(this._vid,this.ks_)};a.prototype.setServerCertificate=function(){throw Error("Server certificate is not implemented in your browser");};return a}();var t=function(a){var c=document.querySelector("video")||document.createElement("video");return c&&c.canPlayType?!!c.canPlayType("video/mp4",a):!1};b.requestMediaKeySystemAccess=
m=function(a,c){if(!t(a))return l.Observable.throw(void 0);for(var d=0;d<c.length;d++){var f=c[d],h=f.videoCapabilities,b=f.audioCapabilities,k=f.initDataTypes,m=f.sessionTypes,e=f.distinctiveIdentifier;f=f.persistentState;var p=!0;if(p=(p=(p=(p=p&&(!k||!!k.filter(function(a){return"cenc"===a})[0]))&&(!m||m.filter(function(a){return"temporary"===a}).length===m.length))&&"required"!==e)&&"required"!==f)return c={videoCapabilities:h,audioCapabilities:b,initDataTypes:["cenc"],sessionTypes:["temporary"],
distinctiveIdentifier:"not-allowed",persistentState:"not-allowed"},l.Observable.of(new n.default(a,new r(a),c))}return l.Observable.throw(void 0)}}else d.MediaKeys_&&d.MediaKeys_.prototype&&"function"===typeof d.MediaKeys_.prototype.createSession&&"function"===typeof d.MediaKeys_.isTypeSupported?(d.MediaKeys_.prototype.alwaysRenew=!0,d.MediaKeys_.prototype.memCreateSession=d.MediaKeys_.prototype.createSession,d.MediaKeys_.prototype.createSession=function(){return new q(this)},b.requestMediaKeySystemAccess=
m=function(a,c){if(!d.MediaKeys_.isTypeSupported(a))return l.Observable.throw(void 0);for(var f=0;f<c.length;f++){var h=c[f],b=h.videoCapabilities,k=h.audioCapabilities,m=h.initDataTypes;h=h.distinctiveIdentifier;var e=!0;if(e=(e=e&&(!m||!!m.filter(function(a){return"cenc"===a})[0]))&&"required"!==h)return c={videoCapabilities:b,audioCapabilities:k,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"required",sessionTypes:["temporary","persistent-license"]},l.Observable.of(new n.default(a,
new d.MediaKeys_(a),c))}return l.Observable.throw(void 0)}):b.requestMediaKeySystemAccess=m=null},function(e,b,a){var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c])};return function(c,d){function f(){this.constructor=c}a(c,d);c.prototype=null===d?Object.create(d):(f.prototype=d.prototype,new f)}}();Object.defineProperty(b,"__esModule",{value:!0});var l=a(25),
f=a(32);e=function(a){function c(d,h,b){var k=a.call(this)||this;Object.setPrototypeOf(k,c.prototype);k.name="EncryptedMediaError";k.type=l.ErrorTypes.ENCRYPTED_MEDIA_ERROR;k.reason=h;k.code=l.ErrorCodes.hasOwnProperty(d)?l.ErrorCodes[d]:"";k.fatal=!!b;k.message=f.default(k.name,k.code,k.reason);return k}g(c,a);return c}(Error);b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(26);b.default=function(a){var f=0,b=a.length,c=g.bytesToStr(a.subarray(f,f+8));f+=8;var d=
a[f];f+=1;var h=a[f];f+=1;var n=a[f];f+=1;var m=a[f];f+=1;d=[d,h,n,m].join(".");h=a[f]+g.le4toi(a,f+1);f+=4;n=g.le4toi(a,f);f+=4;m=g.bytesToStr(a.subarray(f,f+4));f+=4;var l=g.le2toi(a,f);f+=2;var e=g.le2toi(a,f);f+=2;var q=[a[f],a[f+1]].join(":"),r=1===a[f+2];f=64;var t=[],x=0;if(!h)throw Error("bif: no images to parse");for(;f<b;){var v=g.le4toi(a,f);f+=4;var w=g.le4toi(a,f);f+=4;if(A){var y=A.index,z=n,B=x;var A=a.subarray(A.offset,w);t.push({index:y,duration:z,ts:B,data:A});x+=n}if(4294967295===
v)break;A={index:v,offset:w}}return{fileFormat:c,version:d,imageCount:h,timescale:n,format:m,width:l,height:e,aspectRatio:q,isVod:r,thumbs:t}}},function(e,b,a){function g(a){for(var f="",b=0;b<a.length;b+=16E3){var c=a.subarray(b,b+16E3);f+=String.fromCharCode.apply(null,c)}return f}Object.defineProperty(b,"__esModule",{value:!0});b.stringFromCharCode=g;b.stringFromUTF8=function(a){if(!a)return"";a=new Uint8Array(a);239===a[0]&&187===a[1]&&191===a[2]&&(a=a.subarray(3));a=g(a);a=escape(a);return decodeURIComponent(a)}},
function(e,b,a){function g(a,c){return f.default({url:a,responseType:"document",ignoreProgressEvents:c})}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(27);b.default=function(a){return function(c){var d=a.customManifestLoader,f=a.ignoreProgressEvents;return d?l.Observable.create(function(a){var f=!1,h=!1,b=d(c,{reject:function(c){void 0===c&&(c={});h||(f=!0,a.error(c))},resolve:function(c){h||(f=!0,a.next({type:"response",value:{responseData:c.data,size:c.size,duration:c.duration}}),
a.complete())},fallback:function(){h=!0;g(c).subscribe(a)}});return function(){f||h||"function"!==typeof b||b()}}):g(c,f)}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=/\.(isml?)(\?token=\S+)?$/,l=/\?token=(\S+)/;b.byteRange=function(a){var f=a[0];return(a=a[1])&&Infinity!==a?"bytes="+ +f+"-"+ +a:"bytes="+ +f+"-"};b.extractISML=function(a){return a.getElementsByTagName("media")[0].getAttribute("src")};b.extractToken=function(a){return(a=a.match(l))&&a[1]||""};b.replaceToken=
function(a,b){return b?a.replace(l,"?token="+b):a.replace(l,"")};b.resolveManifest=function(a){var f=a.match(g);return f?a.replace(f[1],f[1]+"/manifest"):a};b.buildSegmentURL=function(a,b,c){return a.replace(/\{bitrate\}/g,String(b.bitrate)).replace(/\{start time\}/g,String(c.time))}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(4);var g=a(33);b.default=function(a,f,b,c){b=b||[];var d,h,k=g.parseTfdt(f);f=g.getDurationFromTrun(f);c=c&&c.timescale?c.timescale:a.timescale;if(c===
a.timescale){var m=Math.min(.9*c,null!=a.duration?a.duration/4:.25);var l=a.time;a=a.duration}else m=Math.min(.9*c,null!=a.duration?a.duration/a.timescale*c/4:.25),l=(a.time||0)/a.timescale*c,a=null!=a.duration?a.duration/a.timescale*c:void 0;0<=k&&(d=k);0<=f&&(null==a||Math.abs(f-a)<=m)&&(h=f);null==d&&(d=b[0].time,0<=d?(k=b[0].timescale,d=null!=k&&k!==c?d/k*c:d):d=l);null==h&&(b.length?(h=b.reduce(function(a,c){return a+(c.duration||0)},0),h=0<=h?h:a):h=a);return{timescale:c,time:d||0,duration:h||
0}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(5),l=a(40),f=a(284);b.default=function(a){var c=l.default(a),d=[];a=a.childNodes;for(var h=0;h<a.length;h++){var b=a[h];"SegmentURL"===b.nodeName&&(b=f.default(b),d.push(b))}a=c.duration;if(null==a)throw Error("Invalid SegmentList: no duration");return g(c,{list:d,duration:a})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(5),l=a(9),f=a(40),k=a(285);b.default=function(a){for(var c=f.default(a),
b,n,m,e,u=0;u<a.childNodes.length;u++){var q=a.childNodes[u];"SegmentTimeline"===q.nodeName&&(e=k.default(q))}for(u=0;u<a.attributes.length;u++)switch(q=a.attributes[u],q.nodeName){case "initialization":null==c.initialization&&(c.initialization={media:q.value});break;case "index":b=q.value;break;case "media":n=q.value;break;case "bitstreamSwitching":m=l.parseBoolean(q.value)}if(null!=e)c=g({},c,{indexType:"timeline",timeline:e});else{a=c.duration;if(null==a)throw Error("Invalid SegmentTemplate: no duration");
c=g({},c,{indexType:"template",duration:a})}null!=b&&(c.index=b);null!=n&&(c.media=n);null!=m&&(c.bitstreamSwitching=m);return c}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=function(){function a(){this._entries=[]}a.prototype.find=function(a){for(var f=0;f<this._entries.length;f++)if(a(this._entries[f]))return this._entries[f];return null};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){if("number"===typeof a)return a;
for(var b=0,f,k=0;k<a.length;k++)f=a[k],b=(b<<5)-b+f,b&=b;return b}},function(e,b,a){function g(a,c){var d=0;return function(){d&&clearTimeout(d);d=window.setTimeout(a,c)}}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(98);b.retryObsWithBackoff=function(a,c){var d=c.retryDelay,b=c.totalRetry,k=c.shouldRetry,m=c.resetDelay,e=c.errorSelector,u=c.onRetry,q=0,r;null!=m&&0<m&&(r=g(function(){q=0},m));return a.catch(function(a,c){if(k&&!k(a)||q++>=b){if(e)throw e(a,q);throw a;}u&&u(a,q);
a=f.getBackedoffDelay(d,q);return l.Observable.timer(a).mergeMap(function(){r&&r();return c})})};b.retryFuncWithBackoff=function(a,c){function d(){return l.Observable.create(function(c){c.next(a());c.complete()}).catch(function(a){if(m&&!m(a)||r++>=k){if(u)throw u(a,r);throw a;}q&&q(a,r);a=f.getBackedoffDelay(b,r);return l.Observable.timer(a).mergeMap(function(){t&&t();return d()})})}var b=c.retryDelay,k=c.totalRetry,m=c.shouldRetry,e=c.resetDelay,u=c.errorSelector,q=c.onRetry,r=0,t;null!=e&&0<e&&
(t=g(function(){r=0},e));return d()};b.retryableFuncWithBackoff=function(a,c){var d=c.retryDelay,b=c.totalRetry,k=c.shouldRetry,m=c.resetDelay,e=c.errorSelector,u=c.onRetry,q=0,r;null!=m&&0<m&&(r=g(function(){q=0},m));return function x(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return a.apply(void 0,c).catch(function(a){if(k&&!k(a)||q++>=b){if(e)throw e(a,q);throw a;}u&&u(a,q);a=f.getBackedoffDelay(d,q);return l.Observable.timer(a).mergeMap(function(){r&&r();return x.apply(void 0,
c)})})}}},function(e,b,a){function g(a){return a*(.3*(2*Math.random()-1)+1)}Object.defineProperty(b,"__esModule",{value:!0});b.getFuzzedDelay=g;b.getBackedoffDelay=function(a,f){void 0===f&&(f=1);return g(a*Math.pow(2,f-1))}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=function(){function a(a){this._alpha=Math.exp(Math.log(.5)/a);this._totalWeight=this._lastEstimate=0}a.prototype.addSample=function(a,f){var b=Math.pow(this._alpha,a);f=f*(1-b)+b*this._lastEstimate;isNaN(f)||
(this._lastEstimate=f,this._totalWeight+=a)};a.prototype.getEstimate=function(){return this._lastEstimate/(1-Math.pow(this._alpha,this._totalWeight))};return a}();b.default=e},function(e,b,a){e.exports=function(a,b,f){if("function"===typeof Array.prototype.findIndex)return a.findIndex(b,f);if("function"!==typeof b)throw new TypeError("predicate must be a function");a=Object(a);var k=a.length;if(0===k)return-1;for(var c=0;c<k;c++)if(b.call(f,a[c],c,a))return c;return-1}},function(e,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var g=a(5),l=a(0),f=a(8),k=a(1);e=a(306);b.createFakeBuffer=e.default;var c=a(307);a=function(){function a(a,c){this._abrManager=a;this._abrBaseClock$=c}a.prototype.createBuffer=function(a,d,b,e,g,q){function h(u){k.default.info("changing representation",p.type,u);return c.default({clock$:a,content:{representation:u,adaptation:p,period:n,manifest:m},queuedSourceBuffer:d,segmentBookkeeper:b,segmentFetcher:e,wantedBufferAhead$:g}).catch(function(a){if(!m.isLive||a.type!==f.ErrorTypes.NETWORK_ERROR||
!a.isHttpError(412))throw a;m.updateLiveGap(1);k.default.warn("precondition failed",m.presentationLiveGap);return l.Observable.timer(2E3).mergeMap(function(){return h(u)})})}var m=q.manifest,n=q.period,p=q.adaptation,u=this._getABRForAdaptation(p);q=u.filter(function(a){return null!=a.bitrate}).map(function(a){return{type:"bitrateEstimationChange",value:{type:p.type,bitrate:a.bitrate}}});u=u.map(function(a){return a.representation}).distinctUntilChanged(function(a,c){return!a||!c||a.bitrate===c.bitrate&&
a.id===c.id}).distinctUntilChanged(function(a,c){return a.id===c.id}).switchMap(function(a){return l.Observable.of({type:"representationChange",value:{type:p.type,period:n,representation:a}}).concat(h(a))});return l.Observable.merge(u,q)};a.prototype._getABRForAdaptation=function(a){var c=a.representations,d=null,f=this._abrBaseClock$.map(function(a){var c;if(d){var f=d.bitrate;d.index&&(c=d.index.getLastPosition())}return g({bitrate:f,lastIndexPosition:c},a)});return this._abrManager.get$(a.type,
f,c).do(function(a){d=a.representation})};return a}();b.default=a},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(12),l=a(5),f=a(20),k=a(103);e=function(){function a(a){var c=this,d=f.default();this.id=null==a.id?d:""+a.id;this.type=a.type;this.representations=Array.isArray(a.representations)?a.representations.map(function(a){return new k.default(l({rootId:c.id},a))}).sort(function(a,c){return a.bitrate-c.bitrate}):[];null!=a.language&&(this.language=a.language);null!=a.normalizedLanguage&&
(this.normalizedLanguage=a.normalizedLanguage);null!=a.closedCaption&&(this.isClosedCaption=a.closedCaption);null!=a.audioDescription&&(this.isAudioDescription=a.audioDescription);null!=a.contentProtection&&(this.contentProtection=a.contentProtection);this.manuallyAdded=!!a.manuallyAdded}a.prototype.getAvailableBitrates=function(){return this.representations.map(function(a){return a.bitrate})};a.prototype.getRepresentation=function(a){return g(this.representations,function(c){return a===c.id})};a.prototype.getRepresentationsForBitrate=
function(a){return this.representations.filter(function(c){return c.bitrate===a})||null};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(20);e=function(){function a(a){var f=g.default();this.id=null==a.id?f:a.id;this.bitrate=a.bitrate;this.codec=a.codecs;null!=a.height&&(this.height=a.height);null!=a.width&&(this.width=a.width);null!=a.mimeType&&(this.mimeType=a.mimeType);this.index=a.index;this.baseURL=a.baseURL}a.prototype.getMimeTypeString=function(){return this.mimeType+
';codecs="'+this.codec+'"'};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(321);b.StaticRepresentationIndex=e.default},function(e,b,a){function g(a,d,f){void 0===f&&(f=!0);return c.isKnownError(d)?d:d instanceof c.RequestError?new c.NetworkError(a,d,f):new c.OtherError(a,d,f)}Object.defineProperty(b,"__esModule",{value:!0});var l=a(5),f=a(0),k=a(6);e=a(3);var c=a(8),d=a(13),h=a(59),n=a(322),m=e.default.MAX_BACKOFF_DELAY_BASE,p=e.default.INITIAL_BACKOFF_DELAY_BASE;
b.default=function(a,c){function b(a){return h.default(B,a).catch(function(a){throw g("PIPELINE_RESOLVE_ERROR",a);})}function e(a){function c(){var c=n.default(h.default(y,a),C).catch(function(a){throw g("PIPELINE_LOAD_ERROR",a);}).do(function(c){"response"===c.type&&q&&q.add(a,c.value)});return f.Observable.of({type:"request",value:a}).concat(c)}var b=q?q.get(a):null;return null!=b?d.default(b).map(function(a){return{type:"cache",value:a}}).catch(c):c()}function u(a){return h.default(z,a).catch(function(a){throw g("PIPELINE_PARSING_ERROR",
a);})}var q=c.cache,w=c.maxRetry;c=c.maxRetryOffline;var y=a.loader,z=a.parser,B=null!=a.resolver?a.resolver:f.Observable.of.bind(f.Observable),A=new k.Subject,C={baseDelay:p,maxDelay:m,maxRetryRegular:w,maxRetryOffline:c,onRetry:function(a){A.next(g("PIPELINE_LOAD_ERROR",a,!1))}};return function(a){a=b(a).mergeMap(function(a){return e(a).mergeMap(function(c){switch(c.type){case "cache":case "data":case "response":var d=l({response:c.value},a);return("response"===c.type?f.Observable.of({type:"metrics",
value:{size:c.value.size,duration:c.value.duration}}):f.Observable.empty()).concat(u(d).map(function(a){return{type:"data",value:l({parsed:a},d)}}));default:return f.Observable.of(c)}})}).finally(function(){A.complete()});var c=A.map(function(a){return{type:"error",value:a}});return f.Observable.merge(a,c)}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(4);var g=a(17);e=function(){function a(){this._ranges=[];this.length=0}a.prototype.insert=function(a,b){g.insertInto(this._ranges,
{start:a,end:b});this.length=this._ranges.length};a.prototype.remove=function(a,b){var c=[];0<a&&c.push({start:0,end:a});Infinity>b&&c.push({start:b,end:Infinity});g.keepRangeIntersection(this._ranges,c);this.length=this._ranges.length};a.prototype.start=function(a){if(a>=this._ranges.length)throw Error("INDEX_SIZE_ERROR");return this._ranges[a].start};a.prototype.end=function(a){if(a>=this._ranges.length)throw Error("INDEX_SIZE_ERROR");return this._ranges[a].end};return a}();b.default=e},function(e,
b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var b=a.getAttribute("ttp:frameRate"),f=a.getAttribute("ttp:subFramRate"),k=a.getAttribute("ttp:tickRate"),c=a.getAttribute("ttp:frameRateMultiplier"),d=a.getAttribute("xml:space");if(d&&"default"!==d&&"preserve"!==d)throw Error("Invalid spacing style");a=Number(b)||30;f=Number(f)||1;var h=Number(k)||0;k=h;var n=a,m=null!=f?f:1;d=d||"default";0===h&&(k=b?a*f:1);c&&(b=/^(\d+) (\d+)$/g.exec(c))&&(n=Number(b[1])/Number(b[2])*
a);return{tickRate:k,frameRate:n,subFrameRate:m,spaceStyle:d}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.getBodyNode=function(a){return a.getElementsByTagName("body")[0]};b.getStyleNodes=function(a){return a.getElementsByTagName("style")};b.getRegionNodes=function(a){return a.getElementsByTagName("region")};b.getTextNodes=function(a){return a.getElementsByTagName("p")}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(338);b.default=function(a,b){var f=
a.getAttribute("begin"),c=a.getAttribute("dur");a=a.getAttribute("end");f=f?g.default(f,b):null;c=c?g.default(c,b):null;b=a?g.default(a,b):null;if(null==f||null==b&&null==c)throw Error("Invalid text cue");return{start:f,end:null==b?f+c:b}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var b=a.split(":");if(b[2]){a=parseInt(b[0],10);var f=parseInt(b[1],10);b=parseFloat(b[2].replace(",","."));return isNaN(a)||isNaN(f)||isNaN(b)?void 0:3600*a+60*f+b}}},function(e,
b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(31),l=a(1),f=a(52);b.default=function(a){return f.default(a,"error").mergeMap(function(){switch(a.error.code){case 1:var c="MEDIA_ERR_ABORTED";break;case 2:c="MEDIA_ERR_NETWORK";break;case 3:c="MEDIA_ERR_DECODE";break;case 4:c="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:c="MEDIA_ERR_UNKNOWN"}l.default.error("stream: video element MEDIA_ERR("+c+")");throw new g.default(c,null,!0);})}},function(e,b,a){Object.defineProperty(b,"__esModule",
{value:!0});var g=a(0),l=a(1);b.default=function(a,b,c,d){d=d.pauseWhenStalled;return(void 0===d||d?c.pairwise().map(function(a){var c=a[1].stalled;a=a[0].stalled;if(!a!==!c||a&&c&&a.reason!==c.reason)return!a}).filter(function(a){return null!=a}).startWith(!1):g.Observable.of(!1)).switchMap(function(c){return c?g.Observable.defer(function(){l.default.info("pause playback to build buffer");a.playbackRate=0;return g.Observable.of(0)}):b.do(function(c){l.default.info("resume playback speed",c);a.playbackRate=
c})})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(7);e=a(3);var l=a(1),f=a(17),k=e.default.DISCONTINUITY_THRESHOLD;b.default=function(a,d){return d.do(function(c){if(c.stalled){var d=c.currentTime,b=f.getNextRangeGap(c.buffered,d);g.isPlaybackStuck(c.currentTime,c.currentRange,c.state,!!c.stalled)?(l.default.warn("after freeze seek",d,c.currentRange),a.currentTime=d):b<k&&(c=d+b+1/60,l.default.warn("discontinuity seek",d,b,c),a.currentTime=c)}}).share().map(function(a){return a.stalled}).distinctUntilChanged(function(a,
c){return!a&&!c||!!a&&!!c&&a.reason===c.reason})}},function(e,b,a){function g(a,b){return k.hasLoadedMetadata(a).do(function(){c.default.info("set initial time",b);a.playbackRate=1;a.currentTime="function"===typeof b?b():b}).share()}function l(a,b){return k.canPlay(a).do(function(){c.default.info("canplay event");b&&a.play()}).share()}Object.defineProperty(b,"__esModule",{value:!0});var f=a(0),k=a(7),c=a(1);b.default=function(a,c,b){c=g(a,c);a=l(a,b);a=f.Observable.combineLatest(c,a).take(1).mapTo(void 0);
return{initialSeek$:c,loadAndPlay$:a}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.PLAYER_STATES={STOPPED:"STOPPED",LOADED:"LOADED",LOADING:"LOADING",PLAYING:"PLAYING",PAUSED:"PAUSED",ENDED:"ENDED",BUFFERING:"BUFFERING",SEEKING:"SEEKING"}},function(e,b,a){e.exports=a(117).default},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(118);a(126);a(129);a(131);a(136);a(73);a(140);a(145);a(147);a(150);a(151);a(154);a(157);a(160);a(163);a(165);a(168);a(171);a(174);
a(177);a(180);a(183);a(186);a(189);a(192);a(195);a(198);a(200);a(203);a(206);a(209);a(212);a(215);a(218);a(221);a(224);a(227);a(230);a(233);a(236);a(240);a(243);a(1);e=a(246);b.default=e.default},function(e,b,a){e=a(0);a=a(123);e.Observable.combineLatest=a.combineLatest},function(e,b){b=function(){return this}();try{b=b||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(b=window)}e.exports=b},function(e,b,a){var g=a(2),l=a(44),f=a(67);b.toSubscriber=function(a,c,d){if(a){if(a instanceof
g.Subscriber)return a;if(a[l.rxSubscriber])return a[l.rxSubscriber]()}return a||c||d?new g.Subscriber(a,c,d):new g.Subscriber(f.empty)}},function(e,b,a){var g=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(b){a.call(this);this.errors=b;b=Error.call(this,b?b.length+" errors occurred during unsubscription:\n  "+b.map(function(a,d){return d+
1+") "+a.toString()}).join("\n  "):"");this.name=b.name="UnsubscriptionError";this.stack=b.stack;this.message=b.message}g(b,a);return b}(Error);b.UnsubscriptionError=e},function(e,b,a){function g(a){return a?1===a.length?a[0]:function(b){return a.reduce(function(a,d){return d(a)},b)}:l.noop}var l=a(46);b.pipe=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return g(a)};b.pipeFromArray=g},function(e,b,a){var g=a(21),l=a(28),f=a(22),k=a(124);b.combineLatest=function(){for(var a=
[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];var b=d=null;g.isScheduler(a[a.length-1])&&(b=a.pop());"function"===typeof a[a.length-1]&&(d=a.pop());1===a.length&&l.isArray(a[0])&&(a=a[0]);return(new f.ArrayObservable(a,b)).lift(new k.CombineLatestOperator(d))}},function(e,b,a){var g=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},l=a(22),f=a(28);e=a(10);var k=
a(11),c={};b.combineLatest=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var b=null;"function"===typeof a[a.length-1]&&(b=a.pop());1===a.length&&f.isArray(a[0])&&(a=a[0].slice());return function(c){return c.lift.call(new l.ArrayObservable([c].concat(a)),new d(b))}};var d=function(){function a(a){this.project=a}a.prototype.call=function(a,c){return c.subscribe(new h(a,this.project))};return a}();b.CombineLatestOperator=d;var h=function(a){function d(c,d){a.call(this,c);this.project=
d;this.active=0;this.values=[];this.observables=[]}g(d,a);d.prototype._next=function(a){this.values.push(c);this.observables.push(a)};d.prototype._complete=function(){var a=this.observables,c=a.length;if(0===c)this.destination.complete();else{this.toRespond=this.active=c;for(var d=0;d<c;d++){var b=a[d];this.add(k.subscribeToResult(this,b,b,d))}}};d.prototype.notifyComplete=function(a){0===--this.active&&this.destination.complete()};d.prototype.notifyNext=function(a,d,b,f,h){a=this.values;f=a[b];f=
this.toRespond?f===c?--this.toRespond:this.toRespond:0;a[b]=d;0===f&&(this.project?this._tryProject(a):this.destination.next(a.slice()))};d.prototype._tryProject=function(a){try{var c=this.project.apply(this,a)}catch(q){this.destination.error(q);return}this.destination.next(c)};return d}(e.OuterSubscriber);b.CombineLatestSubscriber=h},function(e,b,a){var g=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):
(f.prototype=b.prototype,new f)};e=function(a){function b(b,c,d){a.call(this);this.parent=b;this.outerValue=c;this.outerIndex=d;this.index=0}g(b,a);b.prototype._next=function(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)};b.prototype._error=function(a){this.parent.notifyError(a,this);this.unsubscribe()};b.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe()};return b}(a(2).Subscriber);b.InnerSubscriber=e},function(e,b,a){e=a(0);a=a(127);
e.Observable.defer=a.defer},function(e,b,a){e=a(128);b.defer=e.DeferObservable.create},function(e,b,a){var g=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(0);var l=a(11);a=a(10);e=function(a){function c(c){a.call(this);this.observableFactory=c}g(c,a);c.create=function(a){return new c(a)};c.prototype._subscribe=function(a){return new f(a,this.observableFactory)};
return c}(e.Observable);b.DeferObservable=e;var f=function(a){function c(c,b){a.call(this,c);this.factory=b;this.tryDefer()}g(c,a);c.prototype.tryDefer=function(){try{this._callFactory()}catch(d){this._error(d)}};c.prototype._callFactory=function(){var a=this.factory();a&&this.add(l.subscribeToResult(this,a))};return c}(a.OuterSubscriber)},function(e,b,a){e=a(0);a=a(130);e.Observable.empty=a.empty},function(e,b,a){e=a(29);b.empty=e.EmptyObservable.create},function(e,b,a){e=a(0);a=a(70);e.Observable.from=
a.from},function(e,b,a){var g=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},l=a(28),f=a(68),k=a(69),c=a(71),d=a(133),h=a(22),n=a(134),m=a(48),p=a(0),u=a(72),q=a(45);e=function(a){function b(c,d){a.call(this,null);this.ish=c;this.scheduler=d}g(b,a);b.create=function(a,e){if(null!=a){if("function"===typeof a[q.observable])return a instanceof p.Observable&&!e?a:
new b(a,e);if(l.isArray(a))return new h.ArrayObservable(a,e);if(k.isPromise(a))return new c.PromiseObservable(a,e);if("function"===typeof a[m.iterator]||"string"===typeof a)return new d.IteratorObservable(a,e);if(f.isArrayLike(a))return new n.ArrayLikeObservable(a,e)}throw new TypeError((null!==a&&typeof a||a)+" is not observable");};b.prototype._subscribe=function(a){var c=this.ish,d=this.scheduler;return null==d?c[q.observable]().subscribe(a):c[q.observable]().subscribe(new u.ObserveOnSubscriber(a,
d,0))};return b}(p.Observable);b.FromObservable=e},function(e,b,a){var g=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},l=a(15);e=a(0);var f=a(48);a=function(a){function d(d,b){a.call(this);this.scheduler=b;if(null==d)throw Error("iterator cannot be null.");if((b=d[f.iterator])||"string"!==typeof d)if(b||void 0===d.length){if(!b)throw new TypeError("object is not iterable");
d=d[f.iterator]()}else d=new c(d);else d=new k(d);this.iterator=d}g(d,a);d.create=function(a,c){return new d(a,c)};d.dispatch=function(a){var c=a.index,d=a.iterator,b=a.subscriber;if(a.hasError)b.error(a.error);else{var f=d.next();f.done?b.complete():(b.next(f.value),a.index=c+1,b.closed?"function"===typeof d.return&&d.return():this.schedule(a))}};d.prototype._subscribe=function(a){var c=this.iterator,b=this.scheduler;if(b)return b.schedule(d.dispatch,0,{index:0,iterator:c,subscriber:a});do{b=c.next();
if(b.done){a.complete();break}else a.next(b.value);if(a.closed){"function"===typeof c.return&&c.return();break}}while(1)};return d}(e.Observable);b.IteratorObservable=a;var k=function(){function a(a,c,d){void 0===c&&(c=0);void 0===d&&(d=a.length);this.str=a;this.idx=c;this.len=d}a.prototype[f.iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}};return a}(),c=function(){function a(a,c,b){void 0===
c&&(c=0);if(void 0===b)if(b=+a.length,isNaN(b))b=0;else if(0!==b&&"number"===typeof b&&l.root.isFinite(b)){var f=+b;f=0===f?f:isNaN(f)?f:0>f?-1:1;b=f*Math.floor(Math.abs(b));b=0>=b?0:b>d?d:b}this.arr=a;this.idx=c;this.len=b}a.prototype[f.iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}};return a}(),d=Math.pow(2,53)-1},function(e,b,a){var g=this&&this.__extends||function(a,c){function d(){this.constructor=
a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(0);var l=a(47),f=a(29);a=function(a){function c(c,b){a.call(this);this.arrayLike=c;this.scheduler=b;b||1!==c.length||(this._isScalar=!0,this.value=c[0])}g(c,a);c.create=function(a,b){var d=a.length;return 0===d?new f.EmptyObservable:1===d?new l.ScalarObservable(a[0],b):new c(a,b)};c.dispatch=function(a){var c=a.arrayLike,d=a.index,b=a.subscriber;b.closed||(d>=a.length?b.complete():
(b.next(c[d]),a.index=d+1,this.schedule(a)))};c.prototype._subscribe=function(a){var d=this.arrayLike,b=this.scheduler,f=d.length;if(b)return b.schedule(c.dispatch,0,{arrayLike:d,index:0,length:f,subscriber:a});for(b=0;b<f&&!a.closed;b++)a.next(d[b]);a.complete()};return c}(e.Observable);b.ArrayLikeObservable=a},function(e,b,a){var g=a(0);e=function(){function a(a,b,c){this.kind=a;this.value=b;this.error=c;this.hasValue="N"===a}a.prototype.observe=function(a){switch(this.kind){case "N":return a.next&&
a.next(this.value);case "E":return a.error&&a.error(this.error);case "C":return a.complete&&a.complete()}};a.prototype.do=function(a,b,c){switch(this.kind){case "N":return a&&a(this.value);case "E":return b&&b(this.error);case "C":return c&&c()}};a.prototype.accept=function(a,b,c){return a&&"function"===typeof a.next?this.observe(a):this.do(a,b,c)};a.prototype.toObservable=function(){switch(this.kind){case "N":return g.Observable.of(this.value);case "E":return g.Observable.throw(this.error);case "C":return g.Observable.empty()}throw Error("unexpected notification kind value");
};a.createNext=function(b){return"undefined"!==typeof b?new a("N",b):a.undefinedValueNotification};a.createError=function(b){return new a("E",void 0,b)};a.createComplete=function(){return a.completeNotification};a.completeNotification=new a("C");a.undefinedValueNotification=new a("N",void 0);return a}();b.Notification=e},function(e,b,a){e=a(0);a=a(137);e.Observable.fromEvent=a.fromEvent},function(e,b,a){e=a(138);b.fromEvent=e.FromEventObservable.create},function(e,b,a){var g=this&&this.__extends||
function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(0);var l=a(43),f=a(42),k=a(35),c=a(16),d=Object.prototype.toString;a=function(a){function b(c,d,b,f){a.call(this);this.sourceObj=c;this.eventName=d;this.selector=b;this.options=f}g(b,a);b.create=function(a,c,d,h){f.isFunction(d)&&(h=d,d=void 0);return new b(a,c,h,d)};b.setupSubscription=function(a,f,h,k,e){if(a&&"[object NodeList]"===
d.call(a)||a&&"[object HTMLCollection]"===d.call(a))for(var n=0,m=a.length;n<m;n++)b.setupSubscription(a[n],f,h,k,e);else if(a&&"function"===typeof a.addEventListener&&"function"===typeof a.removeEventListener){a.addEventListener(f,h,e);var l=function(){return a.removeEventListener(f,h)}}else if(a&&"function"===typeof a.on&&"function"===typeof a.off)a.on(f,h),l=function(){return a.off(f,h)};else if(a&&"function"===typeof a.addListener&&"function"===typeof a.removeListener)a.addListener(f,h),l=function(){return a.removeListener(f,
h)};else throw new TypeError("Invalid event target");k.add(new c.Subscription(l))};b.prototype._subscribe=function(a){var c=this.selector;b.setupSubscription(this.sourceObj,this.eventName,c?function(){for(var d=[],b=0;b<arguments.length;b++)d[b-0]=arguments[b];d=l.tryCatch(c).apply(void 0,d);d===k.errorObject?a.error(k.errorObject.e):a.next(d)}:function(c){return a.next(c)},a,this.options)};return b}(e.Observable);b.FromEventObservable=a},function(e,b,a){e=a(71);b.fromPromise=e.PromiseObservable.create},
function(e,b,a){e=a(0);a=a(141);e.Observable.interval=a.interval},function(e,b,a){e=a(142);b.interval=e.IntervalObservable.create},function(e,b,a){var g=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},l=a(74);e=a(0);var f=a(23);a=function(a){function c(c,b){void 0===c&&(c=0);void 0===b&&(b=f.async);a.call(this);this.period=c;this.scheduler=b;if(!l.isNumeric(c)||
0>c)this.period=0;b&&"function"===typeof b.schedule||(this.scheduler=f.async)}g(c,a);c.create=function(a,b){void 0===a&&(a=0);void 0===b&&(b=f.async);return new c(a,b)};c.dispatch=function(a){var c=a.subscriber,d=a.period;c.next(a.index);c.closed||(a.index+=1,this.schedule(a,d))};c.prototype._subscribe=function(a){var d=this.period;a.add(this.scheduler.schedule(c.dispatch,d,{index:0,subscriber:a,period:d}))};return c}(e.Observable);b.IntervalObservable=a},function(e,b,a){var g=this&&this.__extends||
function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(b,c){a.call(this)}g(b,a);b.prototype.schedule=function(a,c){return this};return b}(a(16).Subscription);b.Action=e},function(e,b,a){e=function(){function a(b,f){void 0===f&&(f=a.now);this.SchedulerAction=b;this.now=f}a.prototype.schedule=function(a,b,k){void 0===b&&(b=0);return(new this.SchedulerAction(this,a)).schedule(k,
b)};a.now=Date.now?Date.now:function(){return+new Date};return a}();b.Scheduler=e},function(e,b,a){e=a(0);a=a(36);e.Observable.merge=a.merge},function(e,b,a){b.identity=function(a){return a}},function(e,b,a){e=a(0);a=a(148);e.Observable.never=a.never},function(e,b,a){e=a(149);b.never=e.NeverObservable.create},function(e,b,a){var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)};e=a(0);var l=a(46);a=function(a){function b(){a.call(this)}g(b,a);b.create=function(){return new b};b.prototype._subscribe=function(a){l.noop()};return b}(e.Observable);b.NeverObservable=a},function(e,b,a){e=a(0);a=a(78);e.Observable.of=a.of},function(e,b,a){e=a(0);a=a(152);e.Observable.throw=a._throw},function(e,b,a){e=a(153);b._throw=e.ErrorObservable.create},function(e,b,a){var g=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=
b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(b,c){a.call(this);this.error=b;this.scheduler=c}g(b,a);b.create=function(a,c){return new b(a,c)};b.dispatch=function(a){a.subscriber.error(a.error)};b.prototype._subscribe=function(a){var c=this.error,d=this.scheduler;a.syncErrorThrowable=!0;if(d)return d.schedule(b.dispatch,0,{error:c,subscriber:a});a.error(c)};return b}(a(0).Observable);b.ErrorObservable=e},function(e,b,a){e=a(0);a=a(155);e.Observable.timer=
a.timer},function(e,b,a){e=a(156);b.timer=e.TimerObservable.create},function(e,b,a){var g=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)},l=a(74);e=a(0);var f=a(23),k=a(21),c=a(79);a=function(a){function d(d,b,h){void 0===d&&(d=0);a.call(this);this.period=-1;this.dueTime=0;l.isNumeric(b)?this.period=1>Number(b)&&1||Number(b):k.isScheduler(b)&&(h=b);k.isScheduler(h)||
(h=f.async);this.scheduler=h;this.dueTime=c.isDate(d)?+d-this.scheduler.now():d}g(d,a);d.create=function(a,c,b){void 0===a&&(a=0);return new d(a,c,b)};d.dispatch=function(a){var c=a.index,d=a.period,b=a.subscriber;b.next(c);if(!b.closed){if(-1===d)return b.complete();a.index=c+1;this.schedule(a,d)}};d.prototype._subscribe=function(a){return this.scheduler.schedule(d.dispatch,this.dueTime,{index:0,period:this.period,subscriber:a})};return d}(e.Observable);b.TimerObservable=a},function(e,b,a){e=a(0);
a=a(158);e.Observable.prototype.catch=a._catch;e.Observable.prototype._catch=a._catch},function(e,b,a){var g=a(159);b._catch=function(a){return g.catchError(a)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)};e=a(10);var l=a(11);b.catchError=function(a){return function(c){var d=new f(a);c=c.lift(d);return d.caught=c}};var f=function(){function a(a){this.selector=
a}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.selector,this.caught))};return a}(),k=function(a){function c(c,d,b){a.call(this,c);this.selector=d;this.caught=b}g(c,a);c.prototype.error=function(c){if(!this.isStopped){var d=void 0;try{d=this.selector(c,this.caught)}catch(m){a.prototype.error.call(this,m);return}this._unsubscribeAndRecycle();this.add(l.subscribeToResult(this,d))}};return c}(e.OuterSubscriber)},function(e,b,a){e=a(0);a=a(161);e.Observable.prototype.concat=a.concat},
function(e,b,a){var g=a(162);e=a(37);b.concatStatic=e.concat;b.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return g.concat.apply(void 0,a)(this)}},function(e,b,a){var g=a(37);e=a(37);b.concatStatic=e.concat;b.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){return b.lift.call(g.concat.apply(void 0,[b].concat(a)))}}},function(e,b,a){e=a(0);a=a(164);e.Observable.prototype.concatAll=a.concatAll},function(e,b,a){var g=a(80);
b.concatAll=function(){return g.concatAll()(this)}},function(e,b,a){e=a(0);a=a(166);e.Observable.prototype.concatMap=a.concatMap},function(e,b,a){var g=a(167);b.concatMap=function(a,b){return g.concatMap(a,b)(this)}},function(e,b,a){var g=a(49);b.concatMap=function(a,b){return g.mergeMap(a,b,1)}},function(e,b,a){e=a(0);a=a(169);e.Observable.prototype.debounceTime=a.debounceTime},function(e,b,a){var g=a(23),l=a(170);b.debounceTime=function(a,b){void 0===b&&(b=g.async);return l.debounceTime(a,b)(this)}},
function(e,b,a){function g(a){a.debouncedNext()}var l=this&&this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(2);var f=a(23);b.debounceTime=function(a,c){void 0===c&&(c=f.async);return function(d){return d.lift(new k(a,c))}};var k=function(){function a(a,c){this.dueTime=a;this.scheduler=c}a.prototype.call=function(a,d){return d.subscribe(new c(a,this.dueTime,this.scheduler))};
return a}(),c=function(a){function c(c,d,b){a.call(this,c);this.dueTime=d;this.scheduler=b;this.lastValue=this.debouncedSubscription=null;this.hasValue=!1}l(c,a);c.prototype._next=function(a){this.clearDebounce();this.lastValue=a;this.hasValue=!0;this.add(this.debouncedSubscription=this.scheduler.schedule(g,this.dueTime,this))};c.prototype._complete=function(){this.debouncedNext();this.destination.complete()};c.prototype.debouncedNext=function(){this.clearDebounce();this.hasValue&&(this.destination.next(this.lastValue),
this.lastValue=null,this.hasValue=!1)};c.prototype.clearDebounce=function(){var a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(172);e.Observable.prototype.distinctUntilChanged=a.distinctUntilChanged},function(e,b,a){var g=a(173);b.distinctUntilChanged=function(a,b){return g.distinctUntilChanged(a,b)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,c){function d(){this.constructor=
a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(2);var l=a(43),f=a(35);b.distinctUntilChanged=function(a,c){return function(d){return d.lift(new k(a,c))}};var k=function(){function a(a,c){this.compare=a;this.keySelector=c}a.prototype.call=function(a,d){return d.subscribe(new c(a,this.compare,this.keySelector))};return a}(),c=function(a){function c(c,d,b){a.call(this,c);this.keySelector=b;this.hasKey=!1;"function"===typeof d&&
(this.compare=d)}g(c,a);c.prototype.compare=function(a,c){return a===c};c.prototype._next=function(a){var c=a;if(this.keySelector&&(c=l.tryCatch(this.keySelector)(a),c===f.errorObject))return this.destination.error(f.errorObject.e);var d=!1;if(this.hasKey){if(d=l.tryCatch(this.compare)(this.key,c),d===f.errorObject)return this.destination.error(f.errorObject.e)}else this.hasKey=!0;!1===!!d&&(this.key=c,this.destination.next(a))};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(175);e.Observable.prototype.do=
a._do;e.Observable.prototype._do=a._do},function(e,b,a){var g=a(176);b._do=function(a,b,k){return g.tap(a,b,k)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)},l=a(2);b.tap=function(a,d,b){return function(c){return c.lift(new f(a,d,b))}};var f=function(){function a(a,c,b){this.nextOrObserver=a;this.error=c;this.complete=b}a.prototype.call=
function(a,c){return c.subscribe(new k(a,this.nextOrObserver,this.error,this.complete))};return a}(),k=function(a){function c(c,d,b,f){a.call(this,c);c=new l.Subscriber(d,b,f);c.syncErrorThrowable=!0;this.add(c);this.safeSubscriber=c}g(c,a);c.prototype._next=function(a){var c=this.safeSubscriber;c.next(a);c.syncErrorThrown?this.destination.error(c.syncErrorValue):this.destination.next(a)};c.prototype._error=function(a){var c=this.safeSubscriber;c.error(a);c.syncErrorThrown?this.destination.error(c.syncErrorValue):
this.destination.error(a)};c.prototype._complete=function(){var a=this.safeSubscriber;a.complete();a.syncErrorThrown?this.destination.error(a.syncErrorValue):this.destination.complete()};return c}(l.Subscriber)},function(e,b,a){e=a(0);a=a(178);e.Observable.prototype.exhaustMap=a.exhaustMap},function(e,b,a){var g=a(179);b.exhaustMap=function(a,b){return g.exhaustMap(a,b)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&
(a[b]=d[b]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)};e=a(10);var l=a(11);b.exhaustMap=function(a,d){return function(c){return c.lift(new f(a,d))}};var f=function(){function a(a,c){this.project=a;this.resultSelector=c}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.project,this.resultSelector))};return a}(),k=function(a){function c(c,d,b){a.call(this,c);this.project=d;this.resultSelector=b;this.hasCompleted=this.hasSubscription=!1;this.index=0}g(c,a);c.prototype._next=
function(a){this.hasSubscription||this.tryNext(a)};c.prototype.tryNext=function(a){var c=this.index++,d=this.destination;try{var b=this.project(a,c);this.hasSubscription=!0;this.add(l.subscribeToResult(this,b,a,c))}catch(u){d.error(u)}};c.prototype._complete=function(){this.hasCompleted=!0;this.hasSubscription||this.destination.complete()};c.prototype.notifyNext=function(a,c,d,b,f){f=this.destination;this.resultSelector?this.trySelectResult(a,c,d,b):f.next(c)};c.prototype.trySelectResult=function(a,
c,d,b){var f=this.resultSelector,h=this.destination;try{var k=f(a,c,d,b);h.next(k)}catch(t){h.error(t)}};c.prototype.notifyError=function(a){this.destination.error(a)};c.prototype.notifyComplete=function(a){this.remove(a);this.hasSubscription=!1;this.hasCompleted&&this.destination.complete()};return c}(e.OuterSubscriber)},function(e,b,a){e=a(0);a=a(181);e.Observable.prototype.filter=a.filter},function(e,b,a){var g=a(182);b.filter=function(a,b){return g.filter(a,b)(this)}},function(e,b,a){var g=this&&
this.__extends||function(a,c){function d(){this.constructor=a}for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);a.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)};e=a(2);b.filter=function(a,c){return function(d){return d.lift(new l(a,c))}};var l=function(){function a(a,d){this.predicate=a;this.thisArg=d}a.prototype.call=function(a,d){return d.subscribe(new f(a,this.predicate,this.thisArg))};return a}(),f=function(a){function c(c,b,f){a.call(this,c);this.predicate=b;this.thisArg=
f;this.count=0}g(c,a);c.prototype._next=function(a){try{var c=this.predicate.call(this.thisArg,a,this.count++)}catch(n){this.destination.error(n);return}c&&this.destination.next(a)};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(184);e.Observable.prototype.finally=a._finally;e.Observable.prototype._finally=a._finally},function(e,b,a){var g=a(185);b._finally=function(a){return g.finalize(a)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&
(a[b]=d[b]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)};e=a(2);var l=a(16);b.finalize=function(a){return function(c){return c.lift(new f(a))}};var f=function(){function a(a){this.callback=a}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.callback))};return a}(),k=function(a){function c(c,d){a.call(this,c);this.add(new l.Subscription(d))}g(c,a);return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(187);e.Observable.prototype.ignoreElements=a.ignoreElements},
function(e,b,a){var g=a(188);b.ignoreElements=function(){return g.ignoreElements()(this)}},function(e,b,a){var g=this&&this.__extends||function(a,d){function c(){this.constructor=a}for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);a.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)};e=a(2);var l=a(46);b.ignoreElements=function(){return function(a){return a.lift(new f)}};var f=function(){function a(){}a.prototype.call=function(a,c){return c.subscribe(new k(a))};return a}(),k=function(a){function c(){a.apply(this,
arguments)}g(c,a);c.prototype._next=function(a){l.noop()};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(190);e.Observable.prototype.map=a.map},function(e,b,a){var g=a(191);b.map=function(a,b){return g.map(a,b)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(2);b.map=function(a,c){return function(b){if("function"!==typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");
return b.lift(new l(a,c))}};var l=function(){function a(a,b){this.project=a;this.thisArg=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.project,this.thisArg))};return a}();b.MapOperator=l;var f=function(a){function c(c,b,f){a.call(this,c);this.project=b;this.count=0;this.thisArg=f||this}g(c,a);c.prototype._next=function(a){try{var c=this.project.call(this.thisArg,a,this.count++)}catch(n){this.destination.error(n);return}this.destination.next(c)};return c}(e.Subscriber)},function(e,
b,a){e=a(0);a=a(193);e.Observable.prototype.mapTo=a.mapTo},function(e,b,a){var g=a(194);b.mapTo=function(a){return g.mapTo(a)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(2);b.mapTo=function(a){return function(c){return c.lift(new l(a))}};var l=function(){function a(a){this.value=a}a.prototype.call=function(a,b){return b.subscribe(new f(a,
this.value))};return a}(),f=function(a){function c(c,b){a.call(this,c);this.value=b}g(c,a);c.prototype._next=function(a){this.destination.next(this.value)};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(196);e.Observable.prototype.merge=a.merge},function(e,b,a){var g=a(197);e=a(36);b.mergeStatic=e.merge;b.merge=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return g.merge.apply(void 0,a)(this)}},function(e,b,a){var g=a(36);e=a(36);b.mergeStatic=e.merge;b.merge=function(){for(var a=
[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){return b.lift.call(g.merge.apply(void 0,[b].concat(a)))}}},function(e,b,a){e=a(0);a=a(199);e.Observable.prototype.mergeMap=a.mergeMap;e.Observable.prototype.flatMap=a.mergeMap},function(e,b,a){var g=a(49);b.mergeMap=function(a,b,k){void 0===k&&(k=Number.POSITIVE_INFINITY);return g.mergeMap(a,b,k)(this)}},function(e,b,a){e=a(0);a=a(201);e.Observable.prototype.flatMapTo=a.mergeMapTo;e.Observable.prototype.mergeMapTo=a.mergeMapTo},
function(e,b,a){var g=a(202);b.mergeMapTo=function(a,b,k){void 0===k&&(k=Number.POSITIVE_INFINITY);return g.mergeMapTo(a,b,k)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(10);var l=a(11);b.mergeMapTo=function(a,b,h){void 0===h&&(h=Number.POSITIVE_INFINITY);"number"===typeof b&&(h=b,b=null);return function(c){return c.lift(new f(a,
b,h))}};var f=function(){function a(a,c,b){void 0===b&&(b=Number.POSITIVE_INFINITY);this.ish=a;this.resultSelector=c;this.concurrent=b}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.ish,this.resultSelector,this.concurrent))};return a}();b.MergeMapToOperator=f;var k=function(a){function c(c,b,d,f){void 0===f&&(f=Number.POSITIVE_INFINITY);a.call(this,c);this.ish=b;this.resultSelector=d;this.concurrent=f;this.hasCompleted=!1;this.buffer=[];this.index=this.active=0}g(c,a);c.prototype._next=
function(a){if(this.active<this.concurrent){var c=this.resultSelector,b=this.index++,d=this.ish,f=this.destination;this.active++;this._innerSub(d,f,c,a,b)}else this.buffer.push(a)};c.prototype._innerSub=function(a,c,b,d,f){this.add(l.subscribeToResult(this,a,d,f))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyNext=function(a,c,b,d,f){f=this.destination;this.resultSelector?this.trySelectResult(a,c,b,d):
f.next(c)};c.prototype.trySelectResult=function(a,c,b,d){var f=this.resultSelector,h=this.destination;try{var k=f(a,c,b,d)}catch(t){h.error(t);return}h.next(k)};c.prototype.notifyError=function(a){this.destination.error(a)};c.prototype.notifyComplete=function(a){var c=this.buffer;this.remove(a);this.active--;0<c.length?this._next(c.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(e.OuterSubscriber);b.MergeMapToSubscriber=k},function(e,b,a){e=a(0);a=a(204);e.Observable.prototype.multicast=
a.multicast},function(e,b,a){var g=a(50);b.multicast=function(a,b){return g.multicast(a,b)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(6);var l=a(0),f=a(2),k=a(16),c=a(82);a=function(a){function b(c,b){a.call(this);this.source=c;this.subjectFactory=b;this._refCount=0;this._isComplete=!1}g(b,a);b.prototype._subscribe=function(a){return this.getSubject().subscribe(a)};
b.prototype.getSubject=function(){var a=this._subject;if(!a||a.isStopped)this._subject=this.subjectFactory();return this._subject};b.prototype.connect=function(){var a=this._connection;a||(this._isComplete=!1,a=this._connection=new k.Subscription,a.add(this.source.subscribe(new d(this.getSubject(),this))),a.closed?(this._connection=null,a=k.Subscription.EMPTY):this._connection=a);return a};b.prototype.refCount=function(){return c.refCount()(this)};return b}(l.Observable);b.ConnectableObservable=a;
a=a.prototype;b.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:a._subscribe},_isComplete:{value:a._isComplete,writable:!0},getSubject:{value:a.getSubject},connect:{value:a.connect},refCount:{value:a.refCount}};var d=function(a){function c(c,b){a.call(this,c);this.connectable=b}g(c,a);c.prototype._error=function(c){this._unsubscribe();a.prototype._error.call(this,c)};c.prototype._complete=
function(){this.connectable._isComplete=!0;this._unsubscribe();a.prototype._complete.call(this)};c.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var c=a._connection;a._refCount=0;a._subject=null;a._connection=null;c&&c.unsubscribe()}};return c}(e.SubjectSubscriber);(function(){function a(a){this.connectable=a}a.prototype.call=function(a,c){var b=this.connectable;b._refCount++;a=new h(a,b);c=c.subscribe(a);a.closed||(a.connection=b.connect());return c};return a})();
var h=function(a){function c(c,b){a.call(this,c);this.connectable=b}g(c,a);c.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var c=a._refCount;0>=c?this.connection=null:(a._refCount=c-1,1<c?this.connection=null:(c=this.connection,a=a._connection,this.connection=null,!a||c&&a!==c||a.unsubscribe()))}else this.connection=null};return c}(f.Subscriber)},function(e,b,a){e=a(0);a=a(207);e.Observable.prototype.pairwise=a.pairwise},function(e,b,a){var g=a(208);b.pairwise=
function(){return g.pairwise()(this)}},function(e,b,a){var g=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(2);b.pairwise=function(){return function(a){return a.lift(new l)}};var l=function(){function a(){}a.prototype.call=function(a,b){return b.subscribe(new f(a))};return a}(),f=function(a){function c(c){a.call(this,c);this.hasPrev=!1}g(c,a);c.prototype._next=
function(a){this.hasPrev?this.destination.next([this.prev,a]):this.hasPrev=!0;this.prev=a};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(210);e.Observable.prototype.publish=a.publish},function(e,b,a){var g=a(211);b.publish=function(a){return g.publish(a)(this)}},function(e,b,a){var g=a(6),l=a(50);b.publish=function(a){return a?l.multicast(function(){return new g.Subject},a):l.multicast(new g.Subject)}},function(e,b,a){e=a(0);a=a(213);e.Observable.prototype.scan=a.scan},function(e,b,a){var g=
a(214);b.scan=function(a,b){return 2<=arguments.length?g.scan(a,b)(this):g.scan(a)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(2);b.scan=function(a,c){var b=!1;2<=arguments.length&&(b=!0);return function(d){return d.lift(new l(a,c,b))}};var l=function(){function a(a,b,f){void 0===f&&(f=!1);this.accumulator=a;this.seed=b;this.hasSeed=
f}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.accumulator,this.seed,this.hasSeed))};return a}(),f=function(a){function c(c,b,f,k){a.call(this,c);this.accumulator=b;this._seed=f;this.hasSeed=k;this.index=0}g(c,a);Object.defineProperty(c.prototype,"seed",{get:function(){return this._seed},set:function(a){this.hasSeed=!0;this._seed=a},enumerable:!0,configurable:!0});c.prototype._next=function(a){if(this.hasSeed)return this._tryNext(a);this.seed=a;this.destination.next(a)};c.prototype._tryNext=
function(a){var c=this.index++;try{var b=this.accumulator(this.seed,a,c)}catch(m){this.destination.error(m)}this.seed=b;this.destination.next(b)};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(216);e.Observable.prototype.share=a.share},function(e,b,a){var g=a(217);b.share=function(){return g.share()(this)}},function(e,b,a){function g(){return new k.Subject}var l=a(50),f=a(82),k=a(6);b.share=function(){return function(a){return f.refCount()(l.multicast(g)(a))}}},function(e,b,a){e=a(0);a=a(219);
e.Observable.prototype.skip=a.skip},function(e,b,a){var g=a(220);b.skip=function(a){return g.skip(a)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(2);b.skip=function(a){return function(c){return c.lift(new l(a))}};var l=function(){function a(a){this.total=a}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.total))};
return a}(),f=function(a){function c(c,b){a.call(this,c);this.total=b;this.count=0}g(c,a);c.prototype._next=function(a){++this.count>this.total&&this.destination.next(a)};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(222);e.Observable.prototype.skipUntil=a.skipUntil},function(e,b,a){var g=a(223);b.skipUntil=function(a){return g.skipUntil(a)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=
null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(10);var l=a(11);b.skipUntil=function(a){return function(c){return c.lift(new f(a))}};var f=function(){function a(a){this.notifier=a}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.notifier))};return a}(),k=function(a){function c(c,b){a.call(this,c);this.isInnerStopped=this.hasValue=!1;this.add(l.subscribeToResult(this,b))}g(c,a);c.prototype._next=function(c){this.hasValue&&a.prototype._next.call(this,c)};c.prototype._complete=
function(){this.isInnerStopped?a.prototype._complete.call(this):this.unsubscribe()};c.prototype.notifyNext=function(a,c,b,d,f){this.hasValue=!0};c.prototype.notifyComplete=function(){this.isInnerStopped=!0;this.isStopped&&a.prototype._complete.call(this)};return c}(e.OuterSubscriber)},function(e,b,a){e=a(0);a=a(225);e.Observable.prototype.skipWhile=a.skipWhile},function(e,b,a){var g=a(226);b.skipWhile=function(a){return g.skipWhile(a)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,
c){function b(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(2);b.skipWhile=function(a){return function(c){return c.lift(new l(a))}};var l=function(){function a(a){this.predicate=a}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.predicate))};return a}(),f=function(a){function c(c,b){a.call(this,c);this.predicate=b;this.skipping=!0;this.index=0}g(c,a);c.prototype._next=function(a){var c=
this.destination;this.skipping&&this.tryCallPredicate(a);this.skipping||c.next(a)};c.prototype.tryCallPredicate=function(a){try{this.skipping=!!this.predicate(a,this.index++)}catch(h){this.destination.error(h)}};return c}(e.Subscriber)},function(e,b,a){e=a(0);a=a(228);e.Observable.prototype.startWith=a.startWith},function(e,b,a){var g=a(229);b.startWith=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return g.startWith.apply(void 0,a)(this)}},function(e,b,a){var g=a(22),l=a(47),
f=a(29),k=a(37),c=a(21);b.startWith=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){var d=a[a.length-1];c.isScheduler(d)?a.pop():d=null;var h=a.length;return 1===h?k.concat(new l.ScalarObservable(a[0],d),b):1<h?k.concat(new g.ArrayObservable(a,d),b):k.concat(new f.EmptyObservable(d),b)}}},function(e,b,a){e=a(0);a=a(231);e.Observable.prototype.switchMap=a.switchMap},function(e,b,a){var g=a(232);b.switchMap=function(a,b){return g.switchMap(a,b)(this)}},function(e,
b,a){var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(10);var l=a(11);b.switchMap=function(a,b){return function(c){return c.lift(new f(a,b))}};var f=function(){function a(a,c){this.project=a;this.resultSelector=c}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.project,this.resultSelector))};return a}(),k=function(a){function c(c,b,d){a.call(this,
c);this.project=b;this.resultSelector=d;this.index=0}g(c,a);c.prototype._next=function(a){var c=this.index++;try{var b=this.project(a,c)}catch(p){this.destination.error(p);return}this._innerSub(b,a,c)};c.prototype._innerSub=function(a,c,b){var d=this.innerSubscription;d&&d.unsubscribe();this.add(this.innerSubscription=l.subscribeToResult(this,a,c,b))};c.prototype._complete=function(){var c=this.innerSubscription;c&&!c.closed||a.prototype._complete.call(this)};c.prototype._unsubscribe=function(){this.innerSubscription=
null};c.prototype.notifyComplete=function(c){this.remove(c);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};c.prototype.notifyNext=function(a,c,b,d,f){this.resultSelector?this._tryNotifyNext(a,c,b,d):this.destination.next(c)};c.prototype._tryNotifyNext=function(a,c,b,d){try{var f=this.resultSelector(a,c,b,d)}catch(q){this.destination.error(q);return}this.destination.next(f)};return c}(e.OuterSubscriber)},function(e,b,a){e=a(0);a=a(234);e.Observable.prototype.switchMapTo=
a.switchMapTo},function(e,b,a){var g=a(235);b.switchMapTo=function(a,b){return g.switchMapTo(a,b)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(10);var l=a(11);b.switchMapTo=function(a,b){return function(c){return c.lift(new f(a,b))}};var f=function(){function a(a,c){this.observable=a;this.resultSelector=c}a.prototype.call=function(a,
c){return c.subscribe(new k(a,this.observable,this.resultSelector))};return a}(),k=function(a){function c(c,b,d){a.call(this,c);this.inner=b;this.resultSelector=d;this.index=0}g(c,a);c.prototype._next=function(a){var c=this.innerSubscription;c&&c.unsubscribe();this.add(this.innerSubscription=l.subscribeToResult(this,this.inner,a,this.index++))};c.prototype._complete=function(){var c=this.innerSubscription;c&&!c.closed||a.prototype._complete.call(this)};c.prototype._unsubscribe=function(){this.innerSubscription=
null};c.prototype.notifyComplete=function(c){this.remove(c);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};c.prototype.notifyNext=function(a,c,b,d,f){f=this.destination;this.resultSelector?this.tryResultSelector(a,c,b,d):f.next(c)};c.prototype.tryResultSelector=function(a,c,b,d){var f=this.resultSelector,h=this.destination;try{var e=f(a,c,b,d)}catch(t){h.error(t);return}h.next(e)};return c}(e.OuterSubscriber)},function(e,b,a){e=a(0);a=a(237);e.Observable.prototype.take=
a.take},function(e,b,a){var g=a(238);b.take=function(a){return g.take(a)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)};e=a(2);var l=a(239),f=a(29);b.take=function(a){return function(c){return 0===a?new f.EmptyObservable:c.lift(new k(a))}};var k=function(){function a(a){this.total=a;if(0>this.total)throw new l.ArgumentOutOfRangeError;
}a.prototype.call=function(a,b){return b.subscribe(new c(a,this.total))};return a}(),c=function(a){function c(c,b){a.call(this,c);this.total=b;this.count=0}g(c,a);c.prototype._next=function(a){var c=this.total,b=++this.count;b<=c&&(this.destination.next(a),b===c&&(this.destination.complete(),this.unsubscribe()))};return c}(e.Subscriber)},function(e,b,a){var g=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):
(f.prototype=b.prototype,new f)};e=function(a){function b(){var b=a.call(this,"argument out of range");this.name=b.name="ArgumentOutOfRangeError";this.stack=b.stack;this.message=b.message}g(b,a);return b}(Error);b.ArgumentOutOfRangeError=e},function(e,b,a){e=a(0);a=a(241);e.Observable.prototype.takeUntil=a.takeUntil},function(e,b,a){var g=a(242);b.takeUntil=function(a){return g.takeUntil(a)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&
(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};e=a(10);var l=a(11);b.takeUntil=function(a){return function(c){return c.lift(new f(a))}};var f=function(){function a(a){this.notifier=a}a.prototype.call=function(a,c){return c.subscribe(new k(a,this.notifier))};return a}(),k=function(a){function c(c,b){a.call(this,c);this.notifier=b;this.add(l.subscribeToResult(this,b))}g(c,a);c.prototype.notifyNext=function(a,c,b,d,f){this.complete()};c.prototype.notifyComplete=function(){};
return c}(e.OuterSubscriber)},function(e,b,a){e=a(0);a=a(244);e.Observable.prototype.timeout=a.timeout},function(e,b,a){var g=a(23),l=a(245);b.timeout=function(a,b){void 0===b&&(b=g.async);return l.timeout(a,b)(this)}},function(e,b,a){var g=this&&this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)},l=a(23),f=a(79);e=a(2);var k=a(83);b.timeout=function(a,b){void 0===b&&(b=
l.async);var d=f.isDate(a),h=d?+a-b.now():Math.abs(a);return function(a){return a.lift(new c(h,d,b,new k.TimeoutError))}};var c=function(){function a(a,c,b,d){this.waitFor=a;this.absoluteTimeout=c;this.scheduler=b;this.errorInstance=d}a.prototype.call=function(a,c){return c.subscribe(new d(a,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))};return a}(),d=function(a){function c(c,b,d,f,h){a.call(this,c);this.absoluteTimeout=b;this.waitFor=d;this.scheduler=f;this.errorInstance=
h;this.action=null;this.scheduleTimeout()}g(c,a);c.dispatchTimeout=function(a){a.error(a.errorInstance)};c.prototype.scheduleTimeout=function(){var a=this.action;a?this.action=a.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(c.dispatchTimeout,this.waitFor,this))};c.prototype._next=function(c){this.absoluteTimeout||this.scheduleTimeout();a.prototype._next.call(this,c)};c.prototype._unsubscribe=function(){this.errorInstance=this.scheduler=this.action=null};return c}(e.Subscriber)},
function(e,b,a){var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(c,b){function d(){this.constructor=c}a(c,b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var l=a(247),f=a(84),k=a(0),c=a(38),d=a(6);e=a(3);a(4);var h=a(30),n=a(1),m=a(24),p=a(17),u=a(7),q=a(18),r=a(8),
t=a(54),x=a(261),v=a(57),w=a(297),y=a(364),z=a(365),B=a(115),A=a(366),C=a(367),D=a(368),H=e.default.DEFAULT_UNMUTED_VOLUME;a=function(a){function b(b){void 0===b&&(b={});var h=a.call(this)||this,e=D.parseConstructorOptions(b);b=e.initialAudioBitrate;var k=e.initialVideoBitrate,l=e.limitVideoWidth,m=e.maxAudioBitrate,g=e.maxBufferAhead,p=e.maxBufferBehind,u=e.maxVideoBitrate,t=e.throttleWhenHidden,r=e.videoElement,x=e.wantedBufferAhead;e=e.stopAtEnd;r.preload="auto";h.version="3.3.2";h.log=n.default;
h.state="STOPPED";h.videoElement=r;h._priv_destroy$=new d.Subject;q.onFullscreenChange$(r).takeUntil(h._priv_destroy$).subscribe(function(){return h.trigger("fullscreenChange",h.isFullscreen())});q.onTextTrackChanges$(r.textTracks).takeUntil(h._priv_destroy$).map(function(a){a=a.target;for(var c=[],b=0;b<a.length;b++)c.push(a[b]);return c}).distinctUntilChanged(function(a,c){if(a.length!==c.length)return!1;for(var b=0;b<a.length;b++)if(a[b]!==c[b])return!1;return!0}).subscribe(function(a){return h._priv_onNativeTextTracksNext(a)});
h._priv_playing$=new c.ReplaySubject(1);h._priv_speed$=new f.BehaviorSubject(r.playbackRate);h._priv_stopCurrentContent$=new d.Subject;h._priv_streamLock$=new f.BehaviorSubject(!1);h._priv_wantedBufferAhead$=new f.BehaviorSubject(x);h._priv_maxBufferAhead$=new f.BehaviorSubject(g);h._priv_maxBufferBehind$=new f.BehaviorSubject(p);h._priv_lastBitrates={audio:b,video:k};h._priv_initialMaxAutoBitrates={audio:m,video:u};h._priv_manualBitrates={audio:-1,video:-1};h._priv_throttleWhenHidden=t;h._priv_limitVideoWidth=
l;h._priv_mutedMemory=H;h._priv_initialAudioTrack=void 0;h._priv_initialTextTrack=void 0;h._priv_languageManager=null;h._priv_abrManager=null;h._priv_contentURL=void 0;h._priv_isDirectFile=null;h._priv_currentManifest=null;h._priv_activeRepresentations=null;h._priv_activeAdaptations=null;h._priv_currentPeriod=null;h._priv_contentEventsMemory={period:null,audioTrack:null,textTrack:null,videoBitrate:null,audioBitrate:null,bitrateEstimation:void 0};h._priv_fatalError=null;h._priv_currentImagePlaylist=
null;h._priv_stopAtEnd=e;h._priv_setPlayerState(B.PLAYER_STATES.STOPPED);return h}g(b,a);Object.defineProperty(b,"ErrorTypes",{get:function(){return r.ErrorTypes},enumerable:!0,configurable:!0});Object.defineProperty(b,"ErrorCodes",{get:function(){return r.ErrorCodes},enumerable:!0,configurable:!0});Object.defineProperty(b,"LogLevel",{get:function(){return n.default.getLevel()},set:function(a){n.default.setLevel(a)},enumerable:!0,configurable:!0});b.prototype.stop=function(){this.state!==B.PLAYER_STATES.STOPPED&&
(this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_setPlayerState(B.PLAYER_STATES.STOPPED))};b.prototype.dispose=function(){this.stop();v.dispose();this._priv_destroy$.next();this._priv_destroy$.complete();this._priv_stopCurrentContent$.complete();this._priv_playing$.complete();this._priv_speed$.complete();this._priv_streamLock$.complete();this._priv_wantedBufferAhead$.complete();this._priv_maxBufferAhead$.complete();this._priv_maxBufferBehind$.complete();this.videoElement=
null};b.prototype.loadVideo=function(a){var c=this,b=D.parseLoadVideoOptions(a);n.default.info("loadvideo",b);var d=b.autoPlay,f=b.defaultAudioTrack,h=b.defaultTextTrack,e=b.keySystems,l=b.networkConfig,g=b.startAt,p=b.supplementaryImageTracks,u=b.supplementaryTextTracks,t=b.transport,r=b.transportOptions,v=b.url;if(!this.videoElement)throw Error("the attached video element is disposed");this.stop();this._priv_contentURL=v;var G="directfile"===t;this._priv_isDirectFile=G;this._priv_playing$.next(!1);
var C=this.videoElement;a=z.default(C,{withMediaSource:!G});var F=k.Observable.merge(this._priv_stopCurrentContent$,this._priv_stopAtEnd?q.onEnded$(C):k.Observable.empty()).take(1);if(G)var H=y.default({autoPlay:d,clock$:a,keySystems:e,mediaElement:C,speed$:this._priv_speed$,startAt:g,url:v}).takeUntil(F).publish();else{G=x.default[t];if(!G)throw Error('transport "'+t+'" not supported');t=G(r);this._priv_initialAudioTrack=f;this._priv_initialTextTrack=h;f={initialBitrates:this._priv_lastBitrates,
manualBitrates:this._priv_manualBitrates,maxAutoBitrates:this._priv_initialMaxAutoBitrates,throttle:this._priv_throttleWhenHidden?{video:q.isInBackground$().map(function(a){return a?0:Infinity}).takeUntil(this._priv_stopCurrentContent$)}:{},limitWidth:this._priv_limitVideoWidth?{video:q.videoWidth$(C).takeUntil(this._priv_stopCurrentContent$)}:{}};H=w.default({adaptiveOptions:f,autoPlay:d,bufferOptions:{wantedBufferAhead$:this._priv_wantedBufferAhead$,maxBufferAhead$:this._priv_maxBufferAhead$,maxBufferBehind$:this._priv_maxBufferBehind$},
clock$:a,keySystems:e,networkConfig:l,speed$:this._priv_speed$,startAt:g,supplementaryImageTracks:p,supplementaryTextTracks:u,textTrackOptions:"native"===b.textTrackMode?{textTrackMode:"native",hideNativeSubtitle:b.hideNativeSubtitle}:{textTrackMode:"html",textTrackElement:b.textTrackElement},transport:t,url:v,videoElement:C}).takeUntil(F).publish()}b=H.filter(function(a){return"stalled"===a.type}).map(function(a){return a.value});d=H.filter(function(a){return"loaded"===a.type}).take(1).share();e=
q.onEnded$(C);l=q.onSeeking$(C);b=d.mapTo(B.PLAYER_STATES.LOADED).concat(k.Observable.combineLatest(this._priv_playing$,b.startWith(null),e.startWith(null),l.startWith(null)).takeUntil(this._priv_stopCurrentContent$).map(function(a){return A.default(C,a[0],a[1])}).skipUntil(this._priv_playing$.filter(function(a){return a}))).distinctUntilChanged().startWith(B.PLAYER_STATES.LOADING);d=q.onPlayPause$(C).map(function(a){return"play"===a.type});var E;this._priv_stopCurrentContent$.take(1).subscribe(function(){E&&
E.unsubscribe()});d.takeUntil(this._priv_stopCurrentContent$).subscribe(function(a){return c._priv_onPlayPauseNext(a)},m.default);a.takeUntil(this._priv_stopCurrentContent$).subscribe(function(a){return c._priv_triggerTimeChange(a)},m.default);b.takeUntil(this._priv_stopCurrentContent$).subscribe(function(a){return c._priv_setPlayerState(a)},m.default);H.subscribe(function(a){return c._priv_onStreamNext(a)},function(a){return c._priv_onStreamError(a)},function(){return c._priv_onStreamComplete()});
this._priv_streamLock$.filter(function(a){return!a}).take(1).takeUntil(this._priv_stopCurrentContent$).subscribe(function(){E=H.connect()})};b.prototype.getError=function(){return this._priv_fatalError};b.prototype.getManifest=function(){return this._priv_currentManifest||null};b.prototype.getCurrentAdaptations=function(){return this._priv_currentPeriod&&this._priv_activeAdaptations?this._priv_activeAdaptations.get(this._priv_currentPeriod)||null:null};b.prototype.getCurrentRepresentations=function(){return this._priv_currentPeriod&&
this._priv_activeRepresentations?this._priv_activeRepresentations.get(this._priv_currentPeriod)||null:null};b.prototype.getVideoElement=function(){return this.videoElement};b.prototype.getNativeTextTrack=function(){if(!this.videoElement)throw Error("Disposed player");var a=this.videoElement;return 0<a.textTracks.length?a.textTracks[0]:null};b.prototype.getPlayerState=function(){return this.state};b.prototype.isLive=function(){return this._priv_isDirectFile||!this._priv_currentManifest?!1:this._priv_currentManifest.isLive};
b.prototype.getUrl=function(){if(this._priv_isDirectFile)return this._priv_contentURL;if(this._priv_currentManifest)return this._priv_currentManifest.getUrl()};b.prototype.getVideoDuration=function(){if(!this.videoElement)throw Error("Disposed player");return this.videoElement.duration};b.prototype.getVideoBufferGap=function(){if(!this.videoElement)throw Error("Disposed player");var a=this.videoElement;return p.getLeftSizeOfRange(a.buffered,a.currentTime)};b.prototype.getVideoLoadedTime=function(){if(!this.videoElement)throw Error("Disposed player");
var a=this.videoElement;return p.getSizeOfRange(a.buffered,a.currentTime)};b.prototype.getVideoPlayedTime=function(){if(!this.videoElement)throw Error("Disposed player");var a=this.videoElement;return p.getPlayedSizeOfRange(a.buffered,a.currentTime)};b.prototype.getWallClockTime=function(){if(!this.videoElement)throw Error("Disposed player");if(this._priv_isDirectFile)return this.videoElement.currentTime;if(this._priv_currentManifest){var a=this.videoElement.currentTime;return this.isLive()?+t.toWallClockTime(a,
this._priv_currentManifest)/1E3:a}return 0};b.prototype.getPosition=function(){if(!this.videoElement)throw Error("Disposed player");return this.videoElement.currentTime};b.prototype.getPlaybackRate=function(){return this._priv_speed$.getValue()};b.prototype.getVolume=function(){if(!this.videoElement)throw Error("Disposed player");return this.videoElement.volume};b.prototype.isFullscreen=function(){return u.isFullscreen()};b.prototype.getAvailableVideoBitrates=function(){if(!this._priv_currentPeriod||
!this._priv_activeAdaptations)return[];var a=this._priv_activeAdaptations.get(this._priv_currentPeriod);return(a=a&&a.video)?a.representations.map(function(a){return a.bitrate}):[]};b.prototype.getAvailableAudioBitrates=function(){if(!this._priv_currentPeriod||!this._priv_activeAdaptations)return[];var a=this._priv_activeAdaptations.get(this._priv_currentPeriod);return(a=a&&a.audio)?a.representations.map(function(a){return a.bitrate}):[]};b.prototype.getManualAudioBitrate=function(){return this._priv_manualBitrates.audio};
b.prototype.getManualVideoBitrate=function(){return this._priv_manualBitrates.video};b.prototype.getVideoBitrate=function(){var a=this.getCurrentRepresentations();if(a&&a.video)return a.video.bitrate};b.prototype.getAudioBitrate=function(){var a=this.getCurrentRepresentations();if(a&&a.audio)return a.audio.bitrate};b.prototype.getMaxVideoBitrate=function(){return this._priv_abrManager?this._priv_abrManager.getMaxAutoBitrate("video"):this._priv_initialMaxAutoBitrates.video};b.prototype.getMaxAudioBitrate=
function(){return this._priv_abrManager?this._priv_abrManager.getMaxAutoBitrate("audio"):this._priv_initialMaxAutoBitrates.audio};b.prototype.play=function(){if(!this.videoElement)throw Error("Disposed player");this.videoElement.play()};b.prototype.pause=function(){if(!this.videoElement)throw Error("Disposed player");this.videoElement.pause()};b.prototype.setPlaybackRate=function(a){this._priv_speed$.next(a)};b.prototype.seekTo=function(a){if(!this.videoElement)throw Error("Disposed player");if(!this._priv_isDirectFile&&
!this._priv_currentManifest)throw Error("player: no content loaded");var c=typeof a;if("number"===c)var b=a;else if("object"===c)if(b=this.videoElement.currentTime,null!=a.relative)b+=a.relative;else if(null!=a.position)b=a.position;else if(null!=a.wallClockTime)b=this._priv_isDirectFile?a.wallClockTime:t.fromWallClockTime(1E3*a.wallClockTime,this._priv_currentManifest);else throw Error('invalid time object. You must set one of the following properties: "relative", "position" or "wallClockTime"');
if(void 0===b)throw Error("invalid time given");return this.videoElement.currentTime=b};b.prototype.exitFullscreen=function(){u.exitFullscreen()};b.prototype.setFullscreen=function(a){void 0===a&&(a=!0);if(!this.videoElement)throw Error("Disposed player");a?u.requestFullscreen(this.videoElement):u.exitFullscreen()};b.prototype.setVolume=function(a){if(!this.videoElement)throw Error("Disposed player");var c=this.videoElement;a!==c.volume&&(c.volume=a,this.trigger("volumeChange",a))};b.prototype.isMute=
function(){return!this.getVolume()};b.prototype.mute=function(){this._priv_mutedMemory=this.getVolume();this.setVolume(0)};b.prototype.unMute=function(){0===this.getVolume()&&this.setVolume(this._priv_mutedMemory||H)};b.prototype.setVideoBitrate=function(a){this._priv_manualBitrates.video=a;this._priv_abrManager&&this._priv_abrManager.setManualBitrate("video",a)};b.prototype.setAudioBitrate=function(a){this._priv_manualBitrates.audio=a;this._priv_abrManager&&this._priv_abrManager.setManualBitrate("audio",
a)};b.prototype.setMaxVideoBitrate=function(a){this._priv_initialMaxAutoBitrates.video=a;this._priv_abrManager&&this._priv_abrManager.setMaxAutoBitrate("video",a)};b.prototype.setMaxAudioBitrate=function(a){this._priv_initialMaxAutoBitrates.audio=a;this._priv_abrManager&&this._priv_abrManager.setMaxAutoBitrate("audio",a)};b.prototype.setMaxBufferBehind=function(a){this._priv_maxBufferBehind$.next(a)};b.prototype.setMaxBufferAhead=function(a){this._priv_maxBufferAhead$.next(a)};b.prototype.setWantedBufferAhead=
function(a){this._priv_wantedBufferAhead$.next(a)};b.prototype.getMaxBufferBehind=function(){return this._priv_maxBufferBehind$.getValue()};b.prototype.getMaxBufferAhead=function(){return this._priv_maxBufferAhead$.getValue()};b.prototype.getWantedBufferAhead=function(){return this._priv_wantedBufferAhead$.getValue()};b.prototype.getCurrentKeySystem=function(){return v.getCurrentKeySystem()};b.prototype.getAvailableAudioTracks=function(){return this._priv_languageManager&&this._priv_currentPeriod?
this._priv_languageManager.getAvailableAudioTracks(this._priv_currentPeriod):null};b.prototype.getAvailableTextTracks=function(){return this._priv_languageManager&&this._priv_currentPeriod?this._priv_languageManager.getAvailableTextTracks(this._priv_currentPeriod):null};b.prototype.getAudioTrack=function(){if(this._priv_languageManager&&this._priv_currentPeriod)return this._priv_languageManager.getChosenAudioTrack(this._priv_currentPeriod)};b.prototype.getTextTrack=function(){if(this._priv_languageManager&&
this._priv_currentPeriod)return this._priv_languageManager.getChosenTextTrack(this._priv_currentPeriod)};b.prototype.setAudioTrack=function(a){if(!this._priv_languageManager||!this._priv_currentPeriod)throw Error("No compatible content launched.");try{this._priv_languageManager.setAudioTrackByID(this._priv_currentPeriod,a)}catch(I){throw Error("player: unknown audio track");}};b.prototype.setTextTrack=function(a){if(!this._priv_languageManager||!this._priv_currentPeriod)throw Error("No compatible content launched.");
try{this._priv_languageManager.setTextTrackByID(this._priv_currentPeriod,a)}catch(I){throw Error("player: unknown text track");}};b.prototype.disableTextTrack=function(){if(this._priv_languageManager&&this._priv_currentPeriod)return this._priv_languageManager.disableTextTrack(this._priv_currentPeriod)};b.prototype.getImageTrackData=function(){return this._priv_currentImagePlaylist};b.prototype.getMinimumPosition=function(){return this._priv_isDirectFile?0:this._priv_currentManifest?t.getMinimumBufferPosition(this._priv_currentManifest):
null};b.prototype.getMaximumPosition=function(){if(this._priv_isDirectFile){if(!this.videoElement)throw Error("Disposed player");return this.videoElement.duration}return this._priv_currentManifest?t.getMaximumBufferPosition(this._priv_currentManifest):null};b.prototype._priv_cleanUpCurrentContentState=function(){var a=this;this._priv_streamLock$.next(!0);this._priv_initialTextTrack=this._priv_initialAudioTrack=void 0;this._priv_languageManager=null;this._priv_abrManager&&(this._priv_abrManager.dispose(),
this._priv_abrManager=null);this._priv_currentManifest=this._priv_isDirectFile=this._priv_activeAdaptations=this._priv_activeRepresentations=null;this._priv_contentURL=void 0;this._priv_contentEventsMemory={period:null,audioTrack:null,textTrack:null,videoBitrate:null,audioBitrate:null,bitrateEstimation:void 0};this._priv_currentImagePlaylist=this._priv_fatalError=null;var c=function(){a._priv_streamLock$.next(!1)};v.clearEME().catch(function(){return k.Observable.empty()}).subscribe(m.default,c,c)};
b.prototype._priv_triggerContentEvent=function(a,c){l(this._priv_contentEventsMemory[a],c)||(this._priv_contentEventsMemory[a]=c,this.trigger(a+"Change",c))};b.prototype._priv_onStreamNext=function(a){switch(a.type){case "activePeriodChanged":this._priv_onActivePeriodChanged(a.value);break;case "periodBufferReady":this._priv_onPeriodBufferReady(a.value);break;case "periodBufferCleared":this._priv_onPeriodBufferCleared(a.value);break;case "representationChange":this._priv_onRepresentationChange(a.value);
break;case "adaptationChange":this._priv_onAdaptationChange(a.value);break;case "manifestUpdate":this._priv_onManifestUpdate(a.value);break;case "bitrateEstimationChange":this._priv_onBitrateEstimationChange(a.value);break;case "manifestReady":this._priv_onManifestReady(a.value);break;case "warning":this._priv_onStreamWarning(a.value);break;case "added-segment":a=a.value;var c=a.segmentData;"image"===a.bufferType&&null!=c&&"bif"===c.type&&(this._priv_currentImagePlaylist=c.data,this.trigger("imageTrackUpdate",
{data:this._priv_currentImagePlaylist}))}};b.prototype._priv_onStreamError=function(a){this._priv_stopCurrentContent$.next();this._priv_cleanUpCurrentContentState();this._priv_fatalError=a;this._priv_setPlayerState(B.PLAYER_STATES.STOPPED);this._priv_fatalError===a&&this.trigger("error",a)};b.prototype._priv_onStreamComplete=function(){this._priv_stopCurrentContent$.next();this._priv_cleanUpCurrentContentState();this._priv_setPlayerState(B.PLAYER_STATES.ENDED)};b.prototype._priv_onStreamWarning=function(a){this.trigger("warning",
a)};b.prototype._priv_onManifestReady=function(a){var c=a.manifest;a=a.abrManager;this._priv_currentManifest=c;this._priv_abrManager=a;this._priv_languageManager=new C.default({preferredAudioTracks:void 0===this._priv_initialAudioTrack?void 0:[this._priv_initialAudioTrack],preferredTextTracks:void 0===this._priv_initialTextTrack?void 0:[this._priv_initialTextTrack]});this.trigger("manifestChange",c)};b.prototype._priv_onActivePeriodChanged=function(a){var c=a.period;this._priv_currentPeriod=c;this._priv_triggerContentEvent("period",
c);this._priv_languageManager?(a=this._priv_languageManager.getChosenAudioTrack(c),c=this._priv_languageManager.getChosenTextTrack(c),this._priv_triggerContentEvent("audioTrack",a),this._priv_triggerContentEvent("textTrack",c)):(this._priv_triggerContentEvent("audioTrack",null),this._priv_triggerContentEvent("textTrack",null));(a=this.getCurrentRepresentations())&&null!=a.audio?(a=a.audio.bitrate,this._priv_triggerContentEvent("audioBitrate",null!=a?a:-1)):this._priv_triggerContentEvent("audioBitrate",
null);(a=this.getCurrentRepresentations())&&null!=a.video?(a=a.video.bitrate,this._priv_triggerContentEvent("videoBitrate",null!=a?a:-1)):this._priv_triggerContentEvent("videoBitrate",null)};b.prototype._priv_onPeriodBufferReady=function(a){var c=a.type,b=a.period;a=a.adaptation$;switch(c){case "audio":this._priv_languageManager?(this._priv_languageManager.addPeriod(c,b,a),this._priv_languageManager.setPreferredAudioTrack(b)):(n.default.error("LanguageManager not instanciated for a new "+c+" period"),
a.next(null));break;case "text":this._priv_languageManager?(this._priv_languageManager.addPeriod(c,b,a),this._priv_languageManager.setPreferredTextTrack(b)):(n.default.error("LanguageManager not instanciated for a new "+c+" period"),a.next(null));break;default:(c=b.adaptations[c])&&c.length?a.next(c[0]):a.next(null)}};b.prototype._priv_onPeriodBufferCleared=function(a){var c=a.type;a=a.period;("audio"===c||"text"===c)&&this._priv_languageManager&&this._priv_languageManager.removePeriod(c,a)};b.prototype._priv_onManifestUpdate=
function(a){this._priv_currentManifest=a=a.manifest;this._priv_languageManager&&this._priv_languageManager.update();this.trigger("manifestUpdate",a)};b.prototype._priv_onAdaptationChange=function(a){var c=a.type,b=a.adaptation;a=a.period;this._priv_activeAdaptations||(this._priv_activeAdaptations=new Map);var d=this._priv_activeAdaptations.get(a);d?d[c]=b:this._priv_activeAdaptations.set(a,(f={},f[c]=b,f));this._priv_languageManager&&null!=a&&a===this._priv_currentPeriod&&("audio"===c?(c=this._priv_languageManager.getChosenAudioTrack(this._priv_currentPeriod),
this._priv_triggerContentEvent("audioTrack",c)):"text"===c&&(c=this._priv_languageManager.getChosenTextTrack(this._priv_currentPeriod),this._priv_triggerContentEvent("textTrack",c)));var f};b.prototype._priv_onRepresentationChange=function(a){var c=a.type,b=a.period;a=a.representation;this._priv_activeRepresentations||(this._priv_activeRepresentations=new Map);var d=this._priv_activeRepresentations.get(b);d?d[c]=a:this._priv_activeRepresentations.set(b,(f={},f[c]=a,f));f=a&&a.bitrate;null!=f&&(this._priv_lastBitrates[c]=
f);null!=b&&this._priv_currentPeriod===b&&("video"===c?this._priv_triggerContentEvent("videoBitrate",null!=f?f:-1):"audio"===c&&this._priv_triggerContentEvent("audioBitrate",null!=f?f:-1));var f};b.prototype._priv_onBitrateEstimationChange=function(a){this._priv_triggerContentEvent("bitrateEstimation",{type:a.type,bitrate:a.bitrate})};b.prototype._priv_onPlayPauseNext=function(a){if(!this.videoElement)throw Error("Disposed player");this._priv_playing$.next(a)};b.prototype._priv_onNativeTextTracksNext=
function(a){this.trigger("nativeTextTracksChange",a)};b.prototype._priv_setPlayerState=function(a){this.state!==a&&(this.state=a,n.default.info("playerStateChange",a),this.trigger("playerStateChange",a))};b.prototype._priv_triggerTimeChange=function(a){if((this._priv_isDirectFile||this._priv_currentManifest)&&a){var c={position:a.currentTime,duration:a.duration,playbackRate:a.playbackRate,bufferGap:isFinite(a.bufferGap)?a.bufferGap:0};this._priv_currentManifest&&this._priv_currentManifest.isLive&&
0<a.currentTime&&(c.wallClockTime=t.toWallClockTime(a.currentTime,this._priv_currentManifest).getTime()/1E3,c.liveGap=t.getMaximumBufferPosition(this._priv_currentManifest)-a.currentTime);this.trigger("positionUpdate",c)}};return b}(h.default);b.default=a},function(e,b,a){function g(a){return!a||"object"!==typeof a||"number"!==typeof a.length||"function"!==typeof a.copy||"function"!==typeof a.slice||0<a.length&&"number"!==typeof a[0]?!1:!0}function l(a,b,e){var h;if(null===a||void 0===a||null===b||
void 0===b||a.prototype!==b.prototype)return!1;if(c(a)){if(!c(b))return!1;a=f.call(a);b=f.call(b);return d(a,b,e)}if(g(a)){if(!g(b)||a.length!==b.length)return!1;for(h=0;h<a.length;h++)if(a[h]!==b[h])return!1;return!0}try{var l=k(a);var m=k(b)}catch(r){return!1}if(l.length!=m.length)return!1;l.sort();m.sort();for(h=l.length-1;0<=h;h--)if(l[h]!=m[h])return!1;for(h=l.length-1;0<=h;h--)if(m=l[h],!d(a[m],b[m],e))return!1;return typeof a===typeof b}var f=Array.prototype.slice,k=a(248),c=a(249),d=e.exports=
function(a,c,b){b||(b={});return a===c?!0:a instanceof Date&&c instanceof Date?a.getTime()===c.getTime():!a||!c||"object"!=typeof a&&"object"!=typeof c?b.strict?a===c:a==c:l(a,c,b)}},function(e,b){function a(a){var b=[],f;for(f in a)b.push(f);return b}b=e.exports="function"===typeof Object.keys?Object.keys:a;b.shim=a},function(e,b){function a(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function g(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Object.prototype.hasOwnProperty.call(a,
"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}b="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();b=e.exports=b?a:g;b.supported=a;b.unsupported=g},function(e,b,a){e=a(251);a=a(252);b.queue=new a.QueueScheduler(e.QueueAction)},function(e,b,a){var g=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(b,
c){a.call(this,b,c);this.scheduler=b;this.work=c}g(b,a);b.prototype.schedule=function(b,c){void 0===c&&(c=0);if(0<c)return a.prototype.schedule.call(this,b,c);this.delay=c;this.state=b;this.scheduler.flush(this);return this};b.prototype.execute=function(b,c){return 0<c||this.closed?a.prototype.execute.call(this,b,c):this._execute(b,c)};b.prototype.requestAsyncId=function(b,c,d){void 0===d&&(d=0);return null!==d&&0<d||null===d&&0<this.delay?a.prototype.requestAsyncId.call(this,b,c,d):b.flush(this)};
return b}(a(75).AsyncAction);b.QueueAction=e},function(e,b,a){var g=this&&this.__extends||function(a,b){function f(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)};e=function(a){function b(){a.apply(this,arguments)}g(b,a);return b}(a(76).AsyncScheduler);b.QueueScheduler=e},function(e,b,a){var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=
b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,e){function c(){this.constructor=b}a(b,e);b.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)}}();Object.defineProperty(b,"__esModule",{value:!0});e=function(a){function b(f){var c=a.call(this)||this;Object.setPrototypeOf(c,b.prototype);c.name="AssertionError";c.message=f;Error.captureStackTrace&&Error.captureStackTrace(c,b);return c}g(b,a);return b}(Error);b.default=e},function(e,b,a){function g(){return!!(document.fullscreenElement||
document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)}Object.defineProperty(b,"__esModule",{value:!0});b.requestFullscreen=function(a){g()||(a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))};b.exitFullscreen=function(){g()&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?
document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())};b.isFullscreen=g},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(85);b.KeySystemAccess=e.default;e=a(86);b.requestMediaKeySystemAccess=e.requestMediaKeySystemAccess;a=a(256);b.setMediaKeys=a.default},function(e,b,a){function g(a,b){if(b instanceof k.MockMediaKeys)return b._setVideo(a);if(a.setMediaKeys)return a.setMediaKeys(b);
if(null!==b){if(a.WebkitSetMediaKeys)return a.WebkitSetMediaKeys(b);if(a.mozSetMediaKeys)return a.mozSetMediaKeys(b);if(a.msSetMediaKeys)return a.msSetMediaKeys(b)}}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(13),k=a(86);b.default=function(a,b){return l.Observable.defer(function(){return f.default(g(a,b))})}},function(e,b,a){var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return function(c,b){function d(){this.constructor=c}a(c,b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var l=a(25),f=a(32);e=function(a){function c(b,h){var d=a.call(this)||this;Object.setPrototypeOf(d,c.prototype);d.name="IndexError";d.type=l.ErrorTypes.INDEX_ERROR;d.reason=null;d.code=l.ErrorCodes.hasOwnProperty(b)?l.ErrorCodes[b]:"";d.fatal=!!h;d.message=f.default(d.name,d.code,null);return d}g(c,a);return c}(Error);
b.default=e},function(e,b,a){var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(c,b){function d(){this.constructor=c}a(c,b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var l=a(25),f=a(32);e=function(a){function c(b,h,e){var d=a.call(this)||this;Object.setPrototypeOf(d,
c.prototype);d.name="OtherError";d.type=l.ErrorTypes.OTHER_ERROR;d.reason=h;d.code=l.ErrorCodes.hasOwnProperty(b)?l.ErrorCodes[b]:"";d.fatal=!!e;d.message=f.default(d.name,d.code,d.reason);return d}g(c,a);return c}(Error);b.default=e},function(e,b,a){var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(c,b){function d(){this.constructor=c}a(c,
b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var l=a(25),f=a(32);e=function(a){function c(b,h,e){var d=a.call(this)||this;Object.setPrototypeOf(d,c.prototype);d.name="NetworkError";d.type=l.ErrorTypes.NETWORK_ERROR;d.xhr=h.xhr;d.url=h.url;d.status=h.status;d.errorType=h.type;d.reason=h;d.code=l.ErrorCodes.hasOwnProperty(b)?l.ErrorCodes[b]:"";d.fatal=!!e;d.message=f.default(d.name,d.code,d.reason);return d}g(c,a);c.prototype.isHttpError=
function(a){return this.errorType===l.RequestErrorTypes.ERROR_HTTP_CODE&&this.status===a};return c}(Error);b.default=e},function(e,b,a){var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,e){function c(){this.constructor=b}a(b,e);b.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)}}();Object.defineProperty(b,"__esModule",{value:!0});
e=function(a){function b(f,c,d){var h=a.call(this)||this;Object.setPrototypeOf(h,b.prototype);h.name="RequestError";h.url=c;h.xhr=f;h.status=f.status;h.type=d;h.message=d;return h}g(b,a);return b}(Error);b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e={};e.smooth=a(262).default;e.dash=a(270).default;b.default=e},function(e,b,a){function g(a,c,b){a=a.representations;for(var d=0;d<a.length;d++)a[d].index._addSegments(c,b)}Object.defineProperty(b,"__esModule",{value:!0});
var l=a(0),f=a(88);a(4);var k=a(27),c=a(89),d=a(19),h=a(90),n=a(263),m=a(265);e=a(55);var p=a(269),u=a(91),q=e.default.patchSegment,r=e.default.getMdat,t=/\.wsx?(\?token=\S+)?/;b.default=function(a){void 0===a&&(a={});var b=m.default(a),e=p.default(a.segmentLoader),x=h.default({customManifestLoader:a.manifestLoader,ignoreProgressEvents:!0});a={loader:function(a){return e({adaptation:a.adaptation,init:a.init,manifest:a.manifest,period:a.period,representation:a.representation,segment:a.segment})},parser:function(a){var c=
a.segment,b=a.adaptation,d=a.manifest;a=a.response.responseData;if(c.isInit)return l.Observable.of({segmentData:a,segmentInfos:{timescale:c.timescale,time:-1,duration:0}});a=new Uint8Array(a);d=n.default(a,c,d.isLive);c=d.nextSegments;d=d.segmentInfos;a=q(a,d.time);c&&g(b,c,d);return l.Observable.of({segmentData:a,segmentInfos:d})}};return{manifest:{resolver:function(a){a=a.url;var c=u.extractToken(a);return(t.test(a)?k.default({url:u.replaceToken(a,""),responseType:"document",ignoreProgressEvents:!0}).map(function(a){a=
u.extractISML(a.value.responseData);if(!a)throw Error("Invalid ISML");return a}):l.Observable.of(a)).map(function(a){return{url:u.replaceToken(u.resolveManifest(a),c)}})},loader:function(a){return x(a.url)},parser:function(a){var c=a.response;a=a.url;var d="string"===typeof c.responseData?(new DOMParser).parseFromString(c.responseData,"text/xml"):c.responseData;a=b(d,a);return l.Observable.of({manifest:a,url:c.url})}},audio:a,video:a,text:{loader:function(a){var c=a.segment,b=a.representation;if(c.isInit)return l.Observable.empty();
a=b.mimeType;var f=d.resolveURL(b.baseURL);c=u.buildSegmentURL(f,b,c);return k.default({url:c,responseType:a&&0<=a.indexOf("mp4")?"arraybuffer":"text"})},parser:function(a){var b=a.segment,d=a.representation,f=a.adaptation,h=a.manifest,e=f.language,k=d.mimeType;k=void 0===k?"":k;d=d.codec;d=void 0===d?"":d;var m=a.response.responseData;a=null;var p=0<=k.indexOf("mp4");if(p){var q=new Uint8Array(m);b=n.default(q,b,h.isLive);var u=b.nextSegments;a=b.segmentInfos;h=a.time;var t=null!=a.duration?a.time+
a.duration:void 0;b=a.timescale}else q=m,h=t=b.time||0,t=null!=b.duration?t+b.duration:void 0,b=b.timescale;if(p){var x=d.toLowerCase();if("application/ttml+xml+mp4"===k||"stpp"===x)x="ttml";else if("wvtt"===x)x="vtt";else throw Error("could not find a text-track parser for the type "+k);k=r(q);k=c.stringFromUTF8(k)}else{switch(k){case "application/x-sami":case "application/smil":x="sami";break;case "application/ttml+xml":x="ttml";break;case "text/vtt":x="vtt"}if(!x)if(x=d.toLowerCase(),"srt"===x)x=
"srt";else throw Error("could not find a text-track parser for the type "+k);k=m}null!=a&&u&&g(f,u,a);return l.Observable.of({segmentData:{type:x,data:k,language:e,timescale:b,start:h,end:t,timeOffset:h/b},segmentInfos:a})}},image:{loader:function(a){var c=a.segment;a=a.representation;if(c.isInit)return l.Observable.empty();var b=d.resolveURL(a.baseURL);c=u.buildSegmentURL(b,a,c);return k.default({url:c,responseType:"arraybuffer"})},parser:function(a){a=new Uint8Array(a.response.responseData);a=f.default(a);
return l.Observable.of({segmentData:{data:a.thumbs,start:0,end:Number.MAX_VALUE,timescale:1,timeOffset:0,type:"bif"},segmentInfos:{time:0,duration:Number.MAX_VALUE,timescale:a.timescale}})}}}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(1),l=a(33);e=a(55);var f=e.default.getTraf,k=e.default.parseTfrf,c=e.default.parseTfxd;b.default=function(a,b,e){var d=[];if(e)if(e=f(a)){var h=k(e);var n=c(e)}else g.default.warn("smooth: could not find traf atom");n?a={time:n.time,duration:n.duration,
timescale:b.timescale}:(n=Math.min(.9*b.timescale,null!=b.duration?b.duration/4:.25),a=l.getDurationFromTrun(a),a=0<=a&&(null==b.duration||Math.abs(a-b.duration)<=n)?{time:b.time,duration:a,timescale:b.timescale}:{time:b.time,duration:b.duration,timescale:b.timescale});if(h)for(n=0;n<h.length;n++)d.push({time:h[n].time,duration:h[n].duration,timescale:b.timescale});return{nextSegments:d,segmentInfos:a}}},function(e,b,a){function g(a,c){for(var b=a.length,h=0,e,k=0;h+8<b&&(k=f.be4toi(a,h),e=f.be4toi(a,
h+4),l.default(0<k,"out of range size"),e!==c);)h+=k;return h<b?a.subarray(h+8,h+k):null}Object.defineProperty(b,"__esModule",{value:!0});var l=a(4),f=a(26);b.getTRAF=function(a){return(a=g(a,1836019558))?g(a,1953653094):null};b.getMDAT=function(a){return g(a,1835295092)};b.getMDIA=function(a){a=g(a,1836019574);return a?(a=g(a,1953653099))?g(a,1835297121):null:null}},function(e,b,a){function g(a){a=(/00000001\d7([0-9a-fA-F]{6})/.exec(a)||[])[1];return(a=void 0===a?"":a)&&"avc1."+a}function l(a){return"boolean"===
typeof a?a:"string"===typeof a?"TRUE"===a.toUpperCase():!1}function f(a){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",privateData:n.concat([8,1,18,16],a)}]}function k(a){a.periods.forEach(function(c){var b=[];c.adaptations.forEach(function(c){var f=c.id;d.default(b,f)&&(u.default.warn("Smooth: Two adaptations with the same ID found. Updating.",f),f+="-",c.id=f,k(a));b.push(f);var h=[];c.representations.forEach(function(c){var b=c.id;d.default(h,b)&&(u.default.warn("Smooth: Two representations with the same ID found. Updating.",
b),b+="-",c.id=b,k(a));h.push(b)})})})}Object.defineProperty(b,"__esModule",{value:!0});var c=a(3),d=a(14),h=a(4),n=a(26),m=a(20),p=a(34),u=a(1),q=a(19),r=a(268),t={audio:"audio/mp4",video:"video/mp4",text:"application/ttml+xml"},x={audio:"mp4a.40.2",video:"avc1.4D401E"},v={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};b.default=function(a){function b(a,c,b){for(a=a.firstElementChild;a;)b=c(b,a.nodeName,a),a=a.nextElementSibling;return b}function d(a,c){function b(c){c=
a.getAttribute(c);return null==c?void 0:c}switch(c){case "audio":var d=b("AudioTag");var f=b("Bitrate");var h=b("BitsPerSample"),e=b("Channels");var k=b("CodecPrivateData");c=b("FourCC");var l=b("PacketSize"),m=b("SamplingRate");return{audiotag:void 0!==d?parseInt(d,10):d,bitrate:f?parseInt(f,10)||0:0,bitsPerSample:void 0!==h?parseInt(h,10):h,channels:void 0!==e?parseInt(e,10):e,codecPrivateData:k||"",mimeType:void 0!==c?v[c]:c,packetSize:void 0!==l?parseInt(l,10):l,samplingRate:void 0!==m?parseInt(m,
10):m};case "video":return f=b("Bitrate"),k=b("CodecPrivateData"),c=b("FourCC"),d=b("MaxWidth"),h=b("MaxHeight"),{bitrate:f?parseInt(f,10)||0:0,mimeType:void 0!==c?v[c]:c,codecPrivateData:k||"",codecs:g(k||""),width:void 0!==d?parseInt(d,10):void 0,height:void 0!==h?parseInt(h,10):void 0};case "text":return f=b("Bitrate"),k=b("CodecPrivateData"),c=b("FourCC"),{bitrate:f?parseInt(f,10)||0:0,mimeType:void 0!==c?v[c]:c,codecPrivateData:k||""};default:throw Error("Unrecognized StreamIndex type: "+c);
}}function e(a,c,f,e){var k=a.hasAttribute("Timescale")?+(a.getAttribute("Timescale")||0):f,l=a.getAttribute("Type");if(null==l)throw Error("StreamIndex without type.");f=a.getAttribute("Subtype");var m=a.getAttribute("Name"),g=a.getAttribute("Language"),n=null==g?g:p.normalize(g),u=a.getAttribute("Url")||"";a=b(a,function(a,c,b){switch(c){case "QualityLevel":c=d(b,l);if("audio"===l){var f=b.getAttribute("FourCC")||"",h=c.codecPrivateData;f="AACH"===f?5:h?(parseInt(h.substr(0,2),16)&248)>>3:2;c.codecs=
f?"mp4a.40."+f:""}("video"!==l||c.bitrate>D)&&a.representations.push(c);break;case "c":c=a.index;f=a.index.timeline;h=f.length;var e=0<h?f[h-1]:{d:0,ts:0,r:0},k=b.getAttribute("d"),m=b.getAttribute("t");b=(b=b.getAttribute("r"))?+b-1:0;m=m?+m:void 0;k=k?+k:void 0;0<h&&!e.d&&(e.d=null!=m?m-e.ts:0,f[h-1]=e);0<h&&k===e.d&&null==m?e.r+=(b||0)+1:f.push({d:k,ts:null==m?e.ts+(e.d||0)*(e.r+1):m,r:b});c.timeline=f}return a},{representations:[],index:{timeline:[],timescale:k,initialization:{}}});k=a.representations;
var v=a.index;h.default(0!==k.length,"adaptation should have at least one representation");var w=l+(g?"_"+g:"");k.forEach(function(a){a.baseURL=q.resolveURL(c,u);a.mimeType=a.mimeType||t[l];a.codecs=a.codecs||x[l];a.id=w+"_"+l+"-"+a.mimeType+"-"+a.codecs+"-"+a.bitrate;a.index=new r.default(v,{bitsPerSample:a.bitsPerSample,channels:a.channels,codecPrivateData:a.codecPrivateData,packetSize:a.packetSize,samplingRate:a.samplingRate,protection:e})});if("ADVT"===f)return null;m={id:w,type:l,representations:k,
name:null==m?void 0:m,language:null==g?void 0:g,normalizedLanguage:null==n?void 0:n};"text"===l&&"DESC"===f&&(m.closedCaption=!0);return m}void 0===a&&(a={});var u=null==a.suggestedPresentationDelay?c.default.DEFAULT_SUGGESTED_PRESENTATION_DELAY.SMOOTH:a.suggestedPresentationDelay,w=a.referenceDateTime||Date.UTC(1970,0,1,0,0,0,0)/1E3,D=a.minRepresentationBitrate||19E4,H=a.keySystems||f;return function(a,c){var d=q.normalizeBaseURL(c);var f=a.documentElement;h.default("SmoothStreamingMedia"===f.nodeName,
"document root should be SmoothStreamingMedia");h.default(/^[2]-[0-2]$/.test(f.getAttribute("MajorVersion")+"-"+f.getAttribute("MinorVersion")),"Version should be 2.0, 2.1 or 2.2");var g=+(f.getAttribute("Timescale")||1E7);a=b(f,function(a,c,b){switch(c){case "Protection":b=b.firstElementChild;h.default("ProtectionHeader"===b.nodeName,"Protection should have ProtectionHeader child");c=n.strToBytes(atob(b.textContent||""));var d=n.le2toi(c,8);d=n.bytesToUTF16Str(c.subarray(10,d+10));d=(new DOMParser).parseFromString(d,
"application/xml").querySelector("KID");if(!d)throw Error("invalid XML");d=n.guidToUuid(atob(d.textContent||"")).toLowerCase();var f=n.hexToBytes(d);b=(b.getAttribute("SystemID")||"").toLowerCase().replace(/\{|\}/g,"");c={keyId:d,keySystems:[{systemId:b,privateData:c}].concat(H(f))};a.protection=c;break;case "StreamIndex":a.adaptationNodes.push(b)}return a},{adaptationNodes:[]});var p=a.protection;a=a.adaptationNodes.map(function(a){return e(a,d,g,p)}).filter(function(a){return!!a});var t,r=a.filter(function(a){return"video"===
a.type})[0],x=a.filter(function(a){return"audio"===a.type})[0],v;if(r||x){var y=[],B=[];if(r){var A=r.representations[0];A&&(r=A.index.getFirstPosition(),A=A.index.getLastPosition(),null!=r&&y.push(r),null!=A&&B.push(A))}x&&(r=x.representations[0])&&(x=r.index.getFirstPosition(),r=r.index.getLastPosition(),null!=x&&y.push(x),null!=r&&B.push(r));y.length&&(v=Math.max.apply(Math,y));B.length&&(t=Math.max.apply(Math,B))}if(y=l(f.getAttribute("IsLive"))){var C=u;var z=+(f.getAttribute("DVRWindowLength")||
0)/g;var D=w;var F=Date.now()/1E3-(null!=t?t+D:10);f=f.getAttribute("Duration");t=null!=f&&0!==+f?+f/g:Infinity}else f=f.getAttribute("Duration"),t=null!=f&&0!==+f?null==t?(+f+(v||0))/g:t:Infinity;v=null!=v?v/g:void 0;c={id:"gen-smooth-manifest-"+m.default(),availabilityStartTime:D||0,duration:t,presentationLiveGap:F,suggestedPresentationDelay:C,timeShiftBufferDepth:z,transportType:"smooth",type:y?"dynamic":"static",uris:[c],minimumTime:v,periods:[{id:"gen-smooth-period-0",duration:t,adaptations:a,
start:0}]};k(c);return c}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default={aa:"aar",ab:"abk",ae:"ave",af:"afr",ak:"aka",am:"amh",an:"arg",ar:"ara",as:"asm",av:"ava",ay:"aym",az:"aze",ba:"bak",be:"bel",bg:"bul",bi:"bis",bm:"bam",bn:"ben",bo:"bod",br:"bre",bs:"bos",ca:"cat",ce:"che",ch:"cha",co:"cos",cr:"cre",cs:"ces",cu:"chu",cv:"chv",cy:"cym",da:"dan",de:"deu",dv:"div",dz:"dzo",ee:"ewe",el:"ell",en:"eng",eo:"epo",es:"spa",et:"est",eu:"eus",fa:"fas",ff:"ful",fi:"fin",fj:"fij",
fo:"fao",fr:"fra",fy:"fry",ga:"gle",gd:"gla",gl:"glg",gn:"grn",gu:"guj",gv:"glv",ha:"hau",he:"heb",hi:"hin",ho:"hmo",hr:"hrv",ht:"hat",hu:"hun",hy:"hye",hz:"her",ia:"ina",id:"ind",ie:"ile",ig:"ibo",ii:"iii",ik:"ipk",io:"ido",is:"isl",it:"ita",iu:"iku",ja:"jpn",jv:"jav",ka:"kat",kg:"kon",ki:"kik",kj:"kua",kk:"kaz",kl:"kal",km:"khm",kn:"kan",ko:"kor",kr:"kau",ks:"kas",ku:"kur",kv:"kom",kw:"cor",ky:"kir",la:"lat",lb:"ltz",lg:"lug",li:"lim",ln:"lin",lo:"lao",lt:"lit",lu:"lub",lv:"lav",mg:"mlg",mh:"mah",
mi:"mri",mk:"mkd",ml:"mal",mn:"mon",mr:"mar",ms:"msa",mt:"mlt",my:"mya",na:"nau",nb:"nob",nd:"nde",ne:"nep",ng:"ndo",nl:"nld",nn:"nno",no:"nor",nr:"nbl",nv:"nav",ny:"nya",oc:"oci",oj:"oji",om:"orm",or:"ori",os:"oss",pa:"pan",pi:"pli",pl:"pol",ps:"pus",pt:"por",qu:"que",rm:"roh",rn:"run",ro:"ron",ru:"rus",rw:"kin",sa:"san",sc:"srd",sd:"snd",se:"sme",sg:"sag",si:"sin",sk:"slk",sl:"slv",sm:"smo",sn:"sna",so:"som",sq:"sqi",sr:"srp",ss:"ssw",st:"sot",su:"sun",sv:"swe",sw:"swa",ta:"tam",te:"tel",tg:"tgk",
th:"tha",ti:"tir",tk:"tuk",tl:"tgl",tn:"tsn",to:"ton",tr:"tur",ts:"tso",tt:"tat",tw:"twi",ty:"tah",ug:"uig",uk:"ukr",ur:"urd",uz:"uzb",ve:"ven",vi:"vie",vo:"vol",wa:"wln",wo:"wol",xh:"xho",yi:"yid",yo:"yor",za:"zha",zh:"zho",zu:"zul"}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default={alb:"sqi",arm:"hye",baq:"eus",bur:"mya",chi:"zho",cze:"ces",dut:"nld",fre:"fra",geo:"kat",ger:"deu",gre:"ell",ice:"isl",mac:"mkd",mao:"mri",may:"msa",per:"fas",slo:"slk",rum:"ron",tib:"bod",
wel:"cym"}},function(e,b,a){function g(a){var b=a.ts,e=a.d;a=a.r;return null==e||-1===e?b:b+(a+1)*e}Object.defineProperty(b,"__esModule",{value:!0});e=function(){function a(a,b){this._index=a;this._bitsPerSample=b.bitsPerSample;this._channels=b.channels;this._codecPrivateData=b.codecPrivateData;this._packetSize=b.packetSize;this._samplingRate=b.samplingRate;this._protection=b.protection}a.prototype.getInitSegment=function(){return{id:"init",isInit:!0,time:0,timescale:this._index.timescale,privateInfos:{type:"smooth-init",
bitsPerSample:this._bitsPerSample,channels:this._channels,codecPrivateData:this._codecPrivateData,packetSize:this._packetSize,samplingRate:this._samplingRate,protection:this._protection}}};a.prototype.getSegments=function(a,b){var c=this._index,d=c.presentationTimeOffset||0,f=c.timescale||1;var e=a*f-d;a=(a+b)*f-d;b=c.timeline;c=c.timescale;var k;d=[];for(var l=(f=b.length)&&b[0].d||0,g=0;g<f;g++){var q=b[g],r=q.d,t=q.ts;l=Math.max(l,r||0);if(null!=r&&0>r){if(t+l<a){var x={id:""+t,time:t,isInit:!1,
timescale:c,number:null!=k?k:void 0};d.push(x)}break}var v=b[g+1];x=q.r||0;null!=q.d&&0>x&&(x=Math.ceil(((v?v.ts:Infinity)-q.ts)/q.d)-1);q=x;r?(v=e-t,v=0<v?Math.floor(v/r):0):v=0;for(x=t+v*(null==r?0:r);x<a&&v<=q;)x={id:""+x,time:x,isInit:!1,duration:r,timescale:c,number:null!=k?k+v:void 0},d.push(x),v++,x=t+v*r;if(x>=a)break;null!=k&&(k+=q+1)}return d};a.prototype.shouldRefresh=function(a,b,c){var d=this._index,f=d.timeline;d=d.timescale;f=f[f.length-1];if(!f)return!1;var e=f.r||0,k=f.ts+e*f.d;if(c*
d<k)return!1;if(b*d>=k)return!0;a=a[a.length-1];return!a||f.ts+e*f.d>a.time?!1:!0};a.prototype.getFirstPosition=function(){var a=this._index;if(a.timeline.length)return a.timeline[0].ts/a.timescale};a.prototype.getLastPosition=function(){var a=this._index;if(a.timeline.length)return g(a.timeline[a.timeline.length-1])/a.timescale};a.prototype.checkDiscontinuity=function(a){var b=this._index,c=b.timeline,d=b.timescale;d=void 0===d?1:d;a*=d;if(0>=a)return-1;b=b.timeline;var f=0;for(var e=b.length;f<
e;){var l=f+e>>>1;b[l].ts<a?f=l+1:e=l}f=0<f?f-1:f;if(0>f||f>=c.length-1)return-1;e=c[f];if(-1===e.d)return-1;b=e.ts;e=g(e);c=c[f+1];return e!==c.ts&&a>=b&&a<=e&&e-a<d?c.ts/d:-1};a.prototype._update=function(a){this._index=a._index};a.prototype._addSegments=function(a,b){for(var c=0;c<a.length;c++){var d=void 0,f=this._index,e=a[c],k=f.timeline,l=f.timescale,u=k.length,q=k[u-1];e=e.timescale===l?{time:e.time,duration:e.duration}:{time:e.time/e.timescale*l,duration:e.duration/e.timescale*l};b&&b.timescale&&
(d=b.timescale===l?b.time:b.time/b.timescale*l);null!=d&&e.time===d?(d=e.time+e.duration,l=d-(q.ts+(q.d||0)*q.r),0>=l||(-1===q.d&&((u=k[u-2])&&u.d===l?(u.r++,k.pop()):q.d=l),f.timeline.push({d:-1,ts:d,r:0}))):e.time>=g(q)&&(q.d===e.duration?q.r++:f.timeline.push({d:e.duration,ts:e.time,r:0}))}};return a}();b.default=e},function(e,b,a){function g(a){var b=a.url,d;(a=a.segment.range)&&(d={Range:c.byteRange(a)});return f.default({url:b,responseType:"arraybuffer",headers:d})}Object.defineProperty(b,"__esModule",
{value:!0});var l=a(0);a(4);var f=a(27),k=a(19);e=a(55);var c=a(91),d=e.default.createVideoInitSegment,h=e.default.createAudioInitSegment;b.default=function(a){return function(b){var f=b.segment,e=b.representation,m=b.adaptation,n=b.period,t=b.manifest;b=b.init;if(f.isInit){if(!f.privateInfos||"smooth-init"!==f.privateInfos.type)throw Error("Smooth: Invalid segment format");n=void 0;n=f.privateInfos;t=n.protection;switch(m.type){case "video":n=d(f.timescale,e.width||0,e.height||0,72,72,4,n.codecPrivateData,
t&&t.keyId,t&&t.keySystems);break;case "audio":n=h(f.timescale,n.channels||0,n.bitsPerSample||0,n.packetSize||0,n.samplingRate||0,n.codecPrivateData,t&&t.keyId,t&&t.keySystems);break;default:n=new Uint8Array(0)}return l.Observable.of({type:"data",value:{responseData:n}})}var x=c.buildSegmentURL(k.resolveURL(e.baseURL),e,f),v={adaptation:m,init:b,manifest:t,period:n,representation:e,segment:f,transport:"smooth",url:x};return a?l.Observable.create(function(c){var b=!1,d=!1,f=a(v,{reject:function(a){void 0===
a&&(a={});d||(b=!0,c.error(a))},resolve:function(a){d||(b=!0,c.next({type:"response",value:{responseData:a.data,size:a.size,duration:a.duration}}),c.complete())},fallback:function(){d=!0;g(v).subscribe(c)}});return function(){b||d||"function"!==typeof f||f()}}):g(v)}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(0),l=a(33),f=a(88),k=a(27),c=a(19),d=a(90),h=a(92),n=a(271),m=a(287),p=a(288),u=a(56);b.default=function(a){void 0===a&&(a={});var b=d.default({customManifestLoader:a.manifestLoader}),
e=m.default(a.segmentLoader);a={loader:function(a){return e({adaptation:a.adaptation,init:a.init,manifest:a.manifest,period:a.period,representation:a.representation,segment:a.segment})},parser:function(a){var c=a.segment,b=a.representation,d=a.response;a=a.init;d=d.responseData instanceof Uint8Array?d.responseData:new Uint8Array(d.responseData);var f=null,e=c.indexRange;e=l.parseSidx(d,e?e[0]:0);c.isInit?(e&&u.addNextSegments(b,e),c=l.getMDHDTimescale(d),0<c&&(f={time:-1,duration:0,timescale:c})):
f=h.default(c,d,e,a);return g.Observable.of({segmentData:d,segmentInfos:f})}};return{manifest:{loader:function(a){return b(a.url)},parser:function(a){var c=a.response;a=a.url;var b="string"===typeof c.responseData?(new DOMParser).parseFromString(c.responseData,"text/xml"):c.responseData;return g.Observable.of({manifest:n.default(b,a),url:c.url})}},audio:a,video:a,text:{loader:p.loader,parser:p.parser},image:{loader:function(a){var b=a.segment;a=a.representation;if(b.isInit)return g.Observable.empty();
var d=b.media;b=d?u.replaceTokens(d,b,a):"";b=c.resolveURL(a.baseURL,b);return k.default({url:b,responseType:"arraybuffer"})},parser:function(a){a=new Uint8Array(a.response.responseData);a=f.default(a);return g.Observable.of({segmentData:{data:a.thumbs,start:0,end:Number.MAX_VALUE,timescale:1,timeOffset:0,type:"bif"},segmentInfos:{time:0,duration:Number.MAX_VALUE,timescale:a.timescale}})}}}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(272);b.default=function(a,b){a=a.documentElement;
if(!a||"MPD"!==a.nodeName)throw Error("document root should be MPD");return g.default(a,b)}},function(e,b,a){function g(a,c,b,d,e){function h(a,c){var b=a.split("/")[0];if(f.default(t,b))return b;if("application/bif"===a)return"image";if("application/ttml+xml"===a)return"text";if("application/mp4"===a)return c&&"urn:mpeg:dash:role:2011"===c.schemeIdUri&&f.default(x,c.value)?"text":"metadata"}function k(a){switch(a.substr(0,3)){case "avc":case "hev":case "hvc":case "vp8":case "vp9":case "av1":return"video";
case "vtt":return"text";case "bif":return"image"}switch(a.substr(0,4)){case "mp4a":return"audio";case "wvtt":case "stpp":return"text"}}if(null!=a&&(a=h(a,e),null!=a))return a;if(null!=b&&(b=k(b),null!=b))return b;for(b=0;b<c.length;b++)if(a=c[b],null!=a&&(a=h(a,e),null!=a))return a;for(b=0;b<d.length;b++)if(c=d[b],null!=c&&(a=k(c),null!=a))return a;return"unknown"}Object.defineProperty(b,"__esModule",{value:!0});var l=a(3),f=a(14),k=a(20),c=a(34),d=a(1),h=a(19),n=a(9),m=a(273),p=a(274),u=a(275),q=
a(276),r=a(277),t=["audio","video","text","image"],x=["subtitle","caption"],v=function(a){if(a&&(a=(a.representations||[]).map(function(a){a=a.index.getLastPosition();return null!=a?a-10:void 0}),!a.some(function(a){return null==a})&&(a=Math.min.apply(Math,a),!isNaN(a))))return a};b.default=function(a,b){a=r.createMPDIntermediateRepresentation(a);var f=a.children,e=a.attributes,t=h.resolveURL(h.normalizeBaseURL(b),f.baseURL),x=[];a=function(a){var b=f.periods[a],l=h.resolveURL(t,b.children.baseURL),
r=void 0;null==b.attributes.id?(d.default.warn("DASH: No usable id found in the Period. Generating one."),r="gen-dash-period-"+k.default()):r=b.attributes.id;if(null!=b.attributes.start)var v=b.attributes.start;else if(0===a)v="static"===e.type||null==e.availabilityStartTime?0:e.availabilityStartTime;else{var w=x[a-1];if(null!=w.duration)v=w.start+w.duration;else throw Error("Not enough informations on the periods: cannot find start.");}w=void 0;if(null!=b.attributes.duration)w=b.attributes.duration;
else{var y=x[a+1];y&&null!=y.start?w=y.start-v:0===a&&e.duration&&!y&&(w=e.duration)}a=b.children.adaptations.map(function(a){var b=h.resolveURL(l,a.children.baseURL),f=a.children;if(null!=f.segmentBase)var e=new m.default(f.segmentBase,v);else if(null!=f.segmentList)e=new p.default(f.segmentList,v);else if(null!=f.segmentTemplate){var k=f.segmentTemplate;k.presentationTimeOffset=v*k.timescale;e="timeline"===k.indexType?new q.default(k,v):new u.default(k,v)}else e=new u.default({duration:Number.MAX_VALUE,
timescale:1,startNumber:0},v);k=a.children.representations.map(function(c){var f=h.resolveURL(b,c.children.baseURL);if(null==c.attributes.bitrate){d.default.warn("DASH: No usable bitrate found in the Representation.");var k=0}else k=c.attributes.bitrate;if(null!=c.children.segmentBase)var l=new m.default(c.children.segmentBase,v);else null!=c.children.segmentList?l=new p.default(c.children.segmentList,v):null!=c.children.segmentTemplate?(l=c.children.segmentTemplate,l="timeline"===l.indexType?new q.default(l,
v):new u.default(l,v)):l=e;f={bitrate:k,index:l,id:null!=c.attributes.id?c.attributes.id:c.attributes.bitrate+(null!=c.attributes.height?"-"+c.attributes.height:"")+(null!=c.attributes.width?"-"+c.attributes.width:"")+(null!=c.attributes.mimeType?"-"+c.attributes.mimeType:"")+(null!=c.attributes.codecs?"-"+c.attributes.codecs:""),baseURL:f};if(null!=c.attributes.codecs)var g=c.attributes.codecs;else null!=a.attributes.codecs&&(g=a.attributes.codecs);null!=g&&(f.codecs="mp4a.40.02"===g?"mp4a.40.2":
g);null!=c.attributes.audioSamplingRate?f.audioSamplingRate=c.attributes.audioSamplingRate:null!=a.attributes.audioSamplingRate&&(f.audioSamplingRate=a.attributes.audioSamplingRate);null!=c.attributes.codingDependency?f.codingDependency=c.attributes.codingDependency:null!=a.attributes.codingDependency&&(f.codingDependency=a.attributes.codingDependency);null!=c.attributes.frameRate?f.frameRate=c.attributes.frameRate:null!=a.attributes.frameRate&&(f.frameRate=a.attributes.frameRate);null!=c.attributes.height?
f.height=c.attributes.height:null!=a.attributes.height&&(f.height=a.attributes.height);null!=c.attributes.maxPlayoutRate?f.maxPlayoutRate=c.attributes.maxPlayoutRate:null!=a.attributes.maxPlayoutRate&&(f.maxPlayoutRate=a.attributes.maxPlayoutRate);null!=c.attributes.maximumSAPPeriod?f.maximumSAPPeriod=c.attributes.maximumSAPPeriod:null!=a.attributes.maximumSAPPeriod&&(f.maximumSAPPeriod=a.attributes.maximumSAPPeriod);null!=c.attributes.mimeType?f.mimeType=c.attributes.mimeType:null!=a.attributes.mimeType&&
(f.mimeType=a.attributes.mimeType);null!=c.attributes.profiles?f.profiles=c.attributes.profiles:null!=a.attributes.profiles&&(f.profiles=a.attributes.profiles);null!=c.attributes.qualityRanking&&(f.qualityRanking=c.attributes.qualityRanking);null!=c.attributes.segmentProfiles?f.segmentProfiles=c.attributes.segmentProfiles:null!=a.attributes.segmentProfiles&&(f.segmentProfiles=a.attributes.segmentProfiles);null!=c.attributes.width?f.width=c.attributes.width:null!=a.attributes.width&&(f.width=a.attributes.width);
return f});var t=a.attributes.mimeType,r=a.attributes.codecs,x=k.map(function(a){return a.mimeType}).filter(function(a){return null!=a}),w=k.map(function(a){return a.codecs}).filter(function(a){return null!=a});t=g(t||null,x,r||null,w,f.role||null);var y,A;"text"===t&&f.accessibility&&n.isHardOfHearing(f.accessibility)&&(y=!0);"audio"===t&&f.accessibility&&n.isVisuallyImpaired(f.accessibility)&&(A=!0);null!=a.attributes.id?f=a.attributes.id:(f=t,a.attributes.language&&(f+="-"+a.attributes.language),
y&&(f+="-cc"),A&&(f+="-ad"),a.attributes.contentType&&(f+="-"+a.attributes.contentType),a.attributes.codecs&&(f+="-"+a.attributes.codecs),a.attributes.mimeType&&(f+="-"+a.attributes.mimeType),a.attributes.frameRate&&(f+="-"+a.attributes.frameRate),f.length===t.length&&(f+=k.length?"-"+k[0].id:"-empty"),f="adaptation-"+f);k={id:f,representations:k,type:t};null!=a.attributes.language&&(k.language=a.attributes.language,k.normalizedLanguage=c.normalize(a.attributes.language));null!=y&&(k.closedCaption=
y);null!=A&&(k.audioDescription=A);return k});r={id:r,start:v,duration:w,adaptations:a};null!=b.attributes.bitstreamSwitching&&(r.bitstreamSwitching=b.attributes.bitstreamSwitching);x.push(r)};for(var w=0;w<f.periods.length;w++)a(w);b={availabilityStartTime:"static"===e.type||null==e.availabilityStartTime?0:e.availabilityStartTime,duration:null==e.duration?Infinity:e.duration,id:null!=e.id?e.id:"gen-dash-manifest-"+k.default(),periods:x,transportType:"dash",type:e.type||"static",uris:[b].concat(f.locations),
suggestedPresentationDelay:null!=e.suggestedPresentationDelay?e.suggestedPresentationDelay:l.default.DEFAULT_SUGGESTED_PRESENTATION_DELAY.DASH};null!=e.profiles&&(b.profiles=e.profiles);"static"!==e.type&&null!=e.availabilityEndTime&&(b.availabilityEndTime=e.availabilityEndTime);null!=e.publishTime&&(b.publishTime=e.publishTime);null!=e.duration&&(b.duration=e.duration);null!=e.minimumUpdatePeriod&&(b.minimumUpdatePeriod=e.minimumUpdatePeriod);null!=e.minBufferTime&&(b.minBufferTime=e.minBufferTime);
null!=e.timeShiftBufferDepth&&(b.timeShiftBufferDepth=e.timeShiftBufferDepth);null!=e.maxSegmentDuration&&(b.maxSegmentDuration=e.maxSegmentDuration);null!=e.maxSubsegmentDuration&&(b.maxSubsegmentDuration=e.maxSubsegmentDuration);"dynamic"===b.type&&(a=b.periods[b.periods.length-1].adaptations.filter(function(a){return"video"===a.type})[0],a=v(a),b.presentationLiveGap=null!=a?Date.now()/1E3-(a+b.availabilityStartTime):10);return b}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});
var g=a(39);e=function(){function a(a,b){null==a.presentationTimeOffset&&(a.presentationTimeOffset=b*a.timescale);this._index=a}a.prototype.getInitSegment=function(){return g.getInitSegment(this._index)};a.prototype.getSegments=function(a,b){return g.getSegmentsFromTimeline(this._index,a,b)};a.prototype.shouldRefresh=function(){return!1};a.prototype.getFirstPosition=function(){var a=this._index;if(a.timeline.length)return a.timeline[0].ts/a.timescale};a.prototype.getLastPosition=function(){var a=
this._index;if(a.timeline.length)return g.getTimelineRangeEnd(a.timeline[a.timeline.length-1])/a.timescale};a.prototype.checkDiscontinuity=function(){return-1};a.prototype._addSegments=function(a){for(var b=0;b<a.length;b++){var c=this._index,d=a[b];if(d.timescale!==c.timescale){var f=c.timescale;c.timeline.push({ts:d.time/d.timescale*f,d:d.duration/d.timescale*f,r:d.count||0,range:d.range})}else c.timeline.push({ts:d.time,d:d.duration,r:d.count||0,range:d.range})}};a.prototype._update=function(a){this._index=
a._index};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(1);var g=a(39);e=function(){function a(a,b){null==a.presentationTimeOffset&&(a.presentationTimeOffset=b*a.timescale);this._index=a}a.prototype.getInitSegment=function(){return g.getInitSegment(this._index)};a.prototype.getSegments=function(a,b){var c=this._index,d=g.normalizeRange(c,a,b);a=c.duration;b=c.list;c=c.timescale;var f=Math.min(b.length-1,Math.floor(d.to/a)),e=[];for(d=Math.floor(d.up/a);d<=
f;)e.push({id:""+d,time:d*a,isInit:!1,range:b[d].mediaRange,duration:a,timescale:c,media:b[d].media}),d++;return e};a.prototype.shouldRefresh=function(a,b,c){b=this._index;a=b.list;var d=b.presentationTimeOffset;c=Math.floor((c*b.timescale-(void 0===d?0:d))/b.duration);return!(0<=c&&c<a.length)};a.prototype.getFirstPosition=function(){return 0};a.prototype.getLastPosition=function(){var a=this._index;return a.list.length*a.duration/a.timescale};a.prototype.checkDiscontinuity=function(){return-1};
a.prototype._update=function(a){this._index=a._index};a.prototype._addSegments=function(){};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a(1);var g=a(39);e=function(){function a(a,b){null==a.presentationTimeOffset&&(a.presentationTimeOffset=b*a.timescale);this._index=a}a.prototype.getInitSegment=function(){return g.getInitSegment(this._index)};a.prototype.getSegments=function(a,b){var c=this._index;a=g.normalizeRange(c,a,b);var d=a.up;a=a.to;if(a<=d)return[];
b=c.duration;var f=c.startNumber,e=c.timescale,k=c.media;c=c.presentationTimeOffset;for(var l=[];d<=a;d+=b){var u=Math.floor(d/b)+(null==f?1:f);l.push({id:""+u,number:u,time:(u-(null==f?1:f))*b+(c||0),isInit:!1,duration:b,timescale:e,media:k})}return l};a.prototype.getFirstPosition=function(){};a.prototype.getLastPosition=function(){};a.prototype.shouldRefresh=function(){return!1};a.prototype.checkDiscontinuity=function(){return-1};a.prototype._addSegments=function(){};a.prototype._update=function(a){this._index=
a._index};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(39);e=function(){function a(a,b){null==a.presentationTimeOffset&&(a.presentationTimeOffset=b*a.timescale);this._index=a}a.prototype.getInitSegment=function(){return g.getInitSegment(this._index)};a.prototype.getSegments=function(a,b){return g.getSegmentsFromTimeline(this._index,a,b)};a.prototype.shouldRefresh=function(a,b,c){b=this._index;a=b.timeline;var d=b.presentationTimeOffset;c=c*b.timescale-
(void 0===d?0:d);a=a[a.length-1];if(!a)return!1;0>a.d&&(a={ts:a.ts,d:0,r:a.r});return!(c<=g.getTimelineRangeEnd(a))};a.prototype.getFirstPosition=function(){var a=this._index;if(a.timeline.length)return a.timeline[0].ts/a.timescale};a.prototype.getLastPosition=function(){var a=this._index;if(a.timeline.length)return g.getTimelineRangeEnd(a.timeline[a.timeline.length-1])/a.timescale};a.prototype.checkDiscontinuity=function(a){var b=this._index,c=b.timeline;b=b.timescale;b=void 0===b?1:b;a*=b;if(0>=
a)return-1;var d=this._index.timeline;var f=0;for(var e=d.length;f<e;){var l=f+e>>>1;d[l].ts<a?f=l+1:e=l}f=0<f?f-1:f;if(0>f||f>=c.length-1)return-1;e=c[f];if(-1===e.d)return-1;d=e.ts;e=g.getTimelineRangeEnd(e);c=c[f+1];return e!==c.ts&&a>=d&&a<=e&&e-a<b?c.ts/b:-1};a.prototype._update=function(a){this._index=a._index};a.prototype._addSegments=function(a,b){for(var c=0;c<a.length;c++){var d=void 0,f=this._index,e=a[c],k=f.timeline,l=f.timescale,u=k.length,q=k[u-1];e=e.timescale===l?{time:e.time,duration:e.duration}:
{time:e.time/e.timescale*l,duration:e.duration/e.timescale*l};b&&b.timescale&&(d=b.timescale===l?b.time:b.time/b.timescale*l);null!=d&&e.time===d?(d=e.time+e.duration,l=d-(q.ts+q.d*q.r),0>=l||(-1===q.d&&((u=k[u-2])&&u.d===l?(u.r++,k.pop()):q.d=l),f.timeline.push({d:-1,ts:d,r:0}))):e.time>=g.getTimelineRangeEnd(q)&&(q.d===e.duration?q.r++:f.timeline.push({d:e.duration,ts:e.time,r:0}))}};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(9),l=a(278);b.createMPDIntermediateRepresentation=
function(a){for(var b=a.childNodes,c="",d=[],f=[],e=0;e<b.length;e++){var m=b[e];switch(m.nodeName){case "BaseURL":c=m.textContent||"";break;case "Location":d.push(m.textContent||"");break;case "Period":m=l.createPeriodIntermediateRepresentation(m),f.push(m)}}b={baseURL:c,locations:d,periods:f};c={};for(d=0;d<a.attributes.length;d++)switch(f=a.attributes[d],f.name){case "id":c.id=f.value;break;case "profiles":c.profiles=f.value;break;case "type":c.type=f.value;break;case "availabilityStartTime":c.availabilityStartTime=
+g.parseDateTime(f.value);break;case "availabilityEndTime":c.availabilityEndTime=+g.parseDateTime(f.value);break;case "publishTime":c.publishTime=+g.parseDateTime(f.value);break;case "mediaPresentationDuration":c.duration=g.parseDuration(f.value);break;case "minimumUpdatePeriod":c.minimumUpdatePeriod=g.parseDuration(f.value);break;case "minBufferTime":c.minBufferTime=g.parseDuration(f.value);break;case "timeShiftBufferDepth":c.timeShiftBufferDepth=g.parseDuration(f.value);break;case "suggestedPresentationDelay":c.suggestedPresentationDelay=
g.parseDuration(f.value);break;case "maxSegmentDuration":c.maxSegmentDuration=g.parseDuration(f.value);break;case "maxSubsegmentDuration":c.maxSubsegmentDuration=g.parseDuration(f.value)}return{children:b,attributes:c}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(1),l=a(9),f=a(279);b.createPeriodIntermediateRepresentation=function(a){for(var c=a.childNodes,b="",e=[],k=0;k<c.length;k++){var m=c[k];switch(m.nodeName){case "BaseURL":b=m.textContent||"";break;case "AdaptationSet":m=
f.createAdaptationSetIntermediateRepresentation(m),e.push(m)}}c={baseURL:b,adaptations:e};b={};for(e=0;e<a.attributes.length;e++)switch(k=a.attributes[e],k.name){case "id":b.id=k.value;break;case "start":m=l.parseDuration(k.value);isNaN(m)?g.default.warn("DASH: Unrecognized start in the mpd:",k.value):b.start=m;break;case "duration":m=l.parseDuration(k.value);isNaN(m)?g.default.warn("DASH: Unrecognized duration in the mpd:",k.value):b.duration=m;break;case "bitstreamSwitching":b.bitstreamSwitching=
l.parseBoolean(k.value)}return{children:c,attributes:b}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(1),l=a(9),f=a(280),k=a(281),c=a(282),d=a(40),h=a(93),n=a(94);b.createAdaptationSetIntermediateRepresentation=function(a){for(var b=a.childNodes,e={baseURL:"",representations:[]},m=0;m<b.length;m++){var r=b[m];switch(r.nodeName){case "Accessibility":e.accessibility=l.parseScheme(r);break;case "BaseURL":e.baseURL=r.textContent||"";break;case "ContentComponent":e.contentComponent=
f.default(r);break;case "Representation":r=c.createRepresentationIntermediateRepresentation(r);e.representations.push(r);break;case "Role":e.role=l.parseScheme(r);break;case "SegmentBase":e.segmentBase=d.default(r);break;case "SegmentList":e.segmentList=h.default(r);break;case "SegmentTemplate":e.segmentTemplate=n.default(r);break;case "ContentProtection":e.contentProtection=k.default(r)}}b={};for(m=0;m<a.attributes.length;m++)switch(r=a.attributes[m],r.name){case "id":b.id=r.value;break;case "group":var t=
parseInt(r.value,10);isNaN(t)?g.default.warn('DASH: invalid group ("'+r.value+'")'):b.group=t;break;case "lang":b.language=r.value;break;case "contentType":b.contentType=r.value;break;case "par":b.par=r.value;break;case "minBandwidth":t=parseInt(r.value,10);isNaN(t)?g.default.warn('DASH: invalid minBandwidth ("'+r.value+'")'):b.minBitrate=t;break;case "maxBandwidth":t=parseInt(r.value,10);isNaN(t)?g.default.warn('DASH: invalid maxBandwidth ("'+r.value+'")'):b.maxBitrate=t;break;case "minWidth":t=
parseInt(r.value,10);isNaN(t)?g.default.warn('DASH: invalid minWidth ("'+r.value+'")'):b.minWidth=t;break;case "maxWidth":t=parseInt(r.value,10);isNaN(t)?g.default.warn('DASH: invalid maxWidth ("'+r.value+'")'):b.maxWidth=t;break;case "minHeight":t=parseInt(r.value,10);isNaN(t)?g.default.warn('DASH: invalid minHeight ("'+r.value+'")'):b.minHeight=t;break;case "maxHeight":t=parseInt(r.value,10);isNaN(t)?g.default.warn('DASH: invalid maxHeight ("'+r.value+'")'):b.maxHeight=t;break;case "minFrameRate":t=
l.parseFrameRate(r.value);isNaN(t)?g.default.warn('DASH: invalid minFrameRate ("'+r.value+'")'):b.minFrameRate=t;break;case "maxFrameRate":t=l.parseFrameRate(r.value);isNaN(t)?g.default.warn('DASH: invalid maxFrameRate ("'+r.value+'")'):b.maxFrameRate=t;break;case "segmentAlignment":t=l.parseIntOrBoolean(r.value);"number"===typeof t&&isNaN(t)?g.default.warn('DASH: invalid segmentAlignment ("'+r.value+'")'):b.segmentAlignment=t;break;case "subsegmentAlignment":t=l.parseIntOrBoolean(r.value);"number"===
typeof t&&isNaN(t)?g.default.warn('DASH: invalid subsegmentAlignment ("'+r.value+'")'):b.subsegmentAlignment=t;break;case "bitstreamSwitching":b.bitstreamSwitching=l.parseBoolean(r.value);break;case "audioSamplingRate":b.audioSamplingRate=r.value;break;case "codecs":b.codecs=r.value;break;case "codingDependency":b.codingDependency=l.parseBoolean(r.value);break;case "frameRate":t=l.parseFrameRate(r.value);isNaN(t)?g.default.warn('DASH: invalid frameRate ("'+r.value+'")'):b.frameRate=t;break;case "height":t=
parseInt(r.value,10);isNaN(t)?g.default.warn('DASH: invalid height ("'+r.value+'")'):b.height=t;break;case "maxPlayoutRate":t=parseFloat(r.value);isNaN(t)?g.default.warn('DASH: invalid maxPlayoutRate ("'+r.value+'")'):b.maxPlayoutRate=t;break;case "maximumSAPPeriod":t=parseFloat(r.value);isNaN(t)?g.default.warn('DASH: invalid maximumSAPPeriod ("'+r.value+'")'):b.maximumSAPPeriod=t;break;case "mimeType":b.mimeType=r.value;break;case "profiles":b.profiles=r.value;break;case "segmentProfiles":b.segmentProfiles=
r.value;break;case "width":t=parseInt(r.value,10),isNaN(t)?g.default.warn('DASH: invalid width ("'+r.value+'")'):b.width=t}return{children:e,attributes:b}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(9);b.default=function(a){for(var b={},e=0;e<a.attributes.length;e++){var c=a.attributes[e];switch(c.name){case "id":b.id=c.value;break;case "lang":b.language=c.value;break;case "contentType":b.contentType=c.value;break;case "par":b.par=g.parseRatio(c.value)}}return b}},function(e,
b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(9);b.default=function(a){return g.parseScheme(a)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(1),l=a(9),f=a(40),k=a(93),c=a(94);b.createRepresentationIntermediateRepresentation=function(a){for(var b=a.childNodes,d={baseURL:""},e=0;e<b.length;e++){var p=b[e];switch(p.nodeName){case "BaseURL":d.baseURL=p.textContent||"";break;case "SegmentBase":d.segmentBase=f.default(p);break;case "SegmentList":d.segmentList=
k.default(p);break;case "SegmentTemplate":d.segmentTemplate=c.default(p)}}b={};for(e=0;e<a.attributes.length;e++)switch(p=a.attributes[e],p.name){case "audioSamplingRate":b.audioSamplingRate=p.value;break;case "bandwidth":var u=parseInt(p.value,10);isNaN(u)?g.default.warn('DASH: invalid bandwidth ("'+p.value+'")'):b.bitrate=u;break;case "codecs":b.codecs=p.value;break;case "codingDependency":b.codingDependency=l.parseBoolean(p.value);break;case "frameRate":u=l.parseFrameRate(p.value);isNaN(u)?g.default.warn('DASH: invalid frameRate ("'+
p.value+'")'):b.frameRate=u;break;case "height":u=parseInt(p.value,10);isNaN(u)?g.default.warn('DASH: invalid height ("'+p.value+'")'):b.height=u;break;case "id":b.id=p.value;break;case "maxPlayoutRate":u=parseFloat(p.value);isNaN(u)?g.default.warn('DASH: invalid maxPlayoutRate ("'+p.value+'")'):b.maxPlayoutRate=u;break;case "maximumSAPPeriod":u=parseFloat(p.value);isNaN(u)?g.default.warn('DASH: invalid maximumSAPPeriod ("'+p.value+'")'):b.maximumSAPPeriod=u;break;case "mimeType":b.mimeType=p.value;
break;case "profiles":b.profiles=p.value;break;case "qualityRanking":u=parseInt(p.value,10);isNaN(u)?g.default.warn('DASH: invalid qualityRanking ("'+p.value+'")'):b.qualityRanking=u;break;case "segmentProfiles":b.segmentProfiles=p.value;break;case "width":u=parseInt(p.value,10),isNaN(u)?g.default.warn('DASH: invalid width ("'+p.value+'")'):b.width=u}return{children:d,attributes:b}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(1),l=a(9);b.default=function(a){for(var b=
{},c=0;c<a.attributes.length;c++){var d=a.attributes[c];switch(d.name){case "range":var f=l.parseByteRange(d.value)||void 0;f?b.range=f:g.default.warn('DASH: invalid range ("'+d.value+'")');break;case "sourceURL":b.media=d.value}}return b}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(1),l=a(9);b.default=function(a){for(var b={},c=0;c<a.attributes.length;c++){var d=a.attributes[c];switch(d.name){case "media":b.media=d.value;break;case "indexRange":var f=l.parseByteRange(d.value)||
void 0;f?b.indexRange=f:g.default.warn('DASH: invalid indexRange ("'+d.value+'")');break;case "index":b.index=d.value;break;case "mediaRange":(f=l.parseByteRange(d.value)||void 0)?b.mediaRange=f:g.default.warn('DASH: invalid mediaRange ("'+d.value+'")')}}return b}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(286);b.default=function(a){var b=[];a=a.childNodes;for(var e=0;e<a.length;e++){var c=a[e];switch(c.nodeName){case "S":(c=g.default(c,b[b.length-1]||null))&&b.push(c)}}return b}},
function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(1);b.default=function(a,b){for(var f,c,d,e=0;e<a.attributes.length;e++){var l=a.attributes[e];switch(l.name){case "t":f=parseInt(l.value,10);break;case "d":c=parseInt(l.value,10);break;case "r":d=parseInt(l.value,10)}}null==f&&b&&null!=b.d&&(f=b.ts+b.d*(b.r+1));if(null==f||isNaN(f)||null!=c&&isNaN(c)||null!=d&&isNaN(d))g.default.warn('DASH: A "S" Node could not have been parsed.');else return{ts:f,d:c,r:d||0}}},function(e,b,
a){function g(a){var b=a.url;a=a.segment;var d=a.range;a=a.indexRange;if(d&&a&&d[1]===a[0]-1)return k.default({url:b,responseType:"arraybuffer",headers:{Range:c.byteRange([d[0],a[1]])}});d=d?{Range:c.byteRange(d)}:null;d=k.default({url:b,responseType:"arraybuffer",headers:d});return a?(b=k.default({url:b,responseType:"arraybuffer",headers:{Range:c.byteRange(a)}}),l.Observable.merge(d,b)):d}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(19),k=a(27),c=a(56);b.default=function(a){return function(b){var d=
b.adaptation,e=b.manifest,h=b.period,k=b.representation;b=b.segment;var q=b.media,r=b.range,t=b.indexRange;if(b.isInit&&!(q||r||t))return l.Observable.empty();q=q?c.replaceTokens(q,b,k):"";q=f.resolveURL(k.baseURL,q);var x={adaptation:d,manifest:e,period:h,representation:k,segment:b,transport:"dash",url:q};return a?l.Observable.create(function(c){var b=!1,d=!1,f=a(x,{reject:function(a){void 0===a&&(a={});d||(b=!0,c.error(a))},resolve:function(a){d||(b=!0,c.next({type:"response",value:{responseData:a.data,
size:a.size,duration:a.duration}}),c.complete())},fallback:function(){d=!0;g(x).subscribe(c)}});return function(){b||d||"function"!==typeof f||f()}}):g(x)}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(5),l=a(0),f=a(4),k=a(89),c=a(19),d=a(33),h=a(27),n=a(92),m=a(56);b.loader=function(a){var b=a.segment,d=a.representation,f=b.media,e=b.range;a=b.indexRange;var k=b.isInit,g=m.isMP4EmbeddedTrack(d)?"arraybuffer":"text";if(k&&!(f||e||a))return l.Observable.empty();b=f?m.replaceTokens(f,
b,d):"";b=c.resolveURL(d.baseURL,b);if(e&&a&&e[1]===a[0]-1)return h.default({url:b,responseType:g,headers:{Range:m.byteRange([e[0],a[1]])}});e=h.default({url:b,responseType:g,headers:e?{Range:m.byteRange(e)}:null});return a?(a=h.default({url:b,responseType:g,headers:{Range:m.byteRange(a)}}),l.Observable.merge(e,a)):e};b.parser=function(a){var c=a.response,b=a.segment,e=a.representation,h=a.init,p=a.adaptation.language,v=b.isInit,w=b.indexRange,y;(a=m.isMP4EmbeddedTrack(e))?(f.default(c.responseData instanceof
ArrayBuffer),c=new Uint8Array(c.responseData),(w=d.parseSidx(c,w?w[0]:0))&&(y=w),b=v?{time:-1,duration:0,timescale:b.timescale}:n.default(b,c,w,h)):(f.default("string"===typeof c.responseData),c=c.responseData,b=v?{time:-1,duration:0,timescale:b.timescale}:{time:b.time||0,duration:b.duration,timescale:b.timescale});if(v)a&&(c=d.getMDHDTimescale(c),0<c&&(b={time:-1,duration:0,timescale:c})),c=void 0;else if(f.default(null!=b),h={start:b.time,end:b.time+(b.duration||0),language:p,timescale:b.timescale,
timeOffset:0},a){p=e.codec;a=void 0;switch((void 0===p?"":p).toLowerCase()){case "stpp":a="ttml";break;case "wvtt":a="vtt"}if(!a)throw Error("The codec used for the subtitle is not managed yet.");c=g({data:k.stringFromUTF8(d.getMDAT(c)),type:a},{timescale:1},h)}else{a=void 0;p=e.mimeType;p=void 0===p?"":p;switch(e.mimeType){case "application/ttml+xml":a="ttml";break;case "application/x-sami":case "application/smil":a="sami";break;case "text/vtt":a="vtt"}if(!a)if(a=e.codec,"srt"===(void 0===a?"":a).toLowerCase())a=
"srt";else throw Error("could not find a text-track parser for the type "+p);c=g({data:c,type:a},{timescale:1},h)}y&&m.addNextSegments(e,y,b);return l.Observable.of({segmentData:c,segmentInfos:b})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(290);b.InMemorySessionsSet=e.default;a=a(291);b.PersistedSessionsSet=a.default},function(e,b,a){var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,
c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(c,b){function d(){this.constructor=c}a(c,b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(13),k=a(1);e=a(95);var c=a(96);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}g(b,a);b.prototype.getFirst=function(){if(0<this._entries.length)return this._entries[0].session};b.prototype.find=function(a){for(var c=0;c<this._entries.length;c++)if(a(this._entries[c]))return this._entries[c];
return null};b.prototype.get=function(a){var b=c.default(a);return(a=this.find(function(a){return a.initData===b}))?a.session:null};b.prototype.add=function(a,b,d){a=c.default(a);var f=this.get(a);f&&this.deleteAndClose(f);d=d.connect();b={session:b,initData:a,eventSubscription:d};k.default.debug("eme-mem-store: add session",b);this._entries.push(b)};b.prototype.deleteById=function(a){var c=this.find(function(c){return c.session.sessionId===a});return c?this.delete(c.session):null};b.prototype.delete=
function(a){var c=this.find(function(c){return c.session===a});if(!c)return null;var b=c.session,d=c.eventSubscription;k.default.debug("eme-mem-store: delete session",c);c=this._entries.indexOf(c);this._entries.splice(c,1);d.unsubscribe();return b};b.prototype.deleteAndClose=function(a){return(a=this.delete(a))?(k.default.debug("eme-mem-store: close session",a),f.default(a.close()).catch(function(){return l.Observable.of(null)})):l.Observable.of(null)};b.prototype.dispose=function(){var a=this,c=
this._entries.map(function(c){return a.deleteAndClose(c.session)});this._entries=[];return l.Observable.merge.apply(l.Observable,c)};return b}(e.default);b.default=a},function(e,b,a){function g(a){f.default(null!=a,"no licenseStorage given for keySystem with persistentLicense");f.assertInterface(a,{save:"function",load:"function"},"licenseStorage")}var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&
(a[b]=c[b])};return function(c,b){function d(){this.constructor=c}a(c,b);c.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var f=a(4),k=a(1);e=a(95);var c=a(96);a=function(a){function b(c){var b=a.call(this)||this;g(c);b._storage=c;b._loadStorage();return b}l(b,a);b.prototype.setStorage=function(a){this._storage!==a&&(g(a),this._storage=a,this._loadStorage())};b.prototype.get=function(a){var b=c.default(a);return this.find(function(a){return a.initData===
b})||null};b.prototype.add=function(a,b){var d=b&&b.sessionId;if(d){a=c.default(a);var f=this.get(a);f&&f.sessionId===d||(f&&this.delete(a),k.default.info("eme-persitent-store: add new session",d,b),this._entries.push({sessionId:d,initData:a}),this._save())}};b.prototype.delete=function(a){var b=c.default(a);if(a=this.find(function(a){return a.initData===b}))k.default.warn("eme-persitent-store: delete session from store",a),a=this._entries.indexOf(a),this._entries.splice(a,1),this._save()};b.prototype.dispose=
function(){this._entries=[];this._save()};b.prototype._save=function(){try{this._storage.save(this._entries)}catch(n){k.default.warn("eme-persitent-store: could not save licenses in localStorage")}};b.prototype._loadStorage=function(){try{this._entries=this._storage.load(),f.default(Array.isArray(this._entries))}catch(n){k.default.warn("eme-persitent-store: could not get entries from license storage",n),this.dispose()}};return b}(e.default);b.default=a},function(e,b,a){function g(a,c){var b=c.$keySystem,
f=c.$mediaKeys,e=c.$mediaKeySystemConfiguration;if(!b||!f||d.shouldRenewMediaKeys())return null;if(e)return(a=a.filter(function(a){return a.type!==b.type||a.persistentLicense&&"required"!==e.persistentState||a.distinctiveIdentifierRequired&&"required"!==e.distinctiveIdentifier?!1:!0})[0])?{keySystem:a,keySystemAccess:new d.KeySystemAccess(b.type,f,e)}:null}function l(a){for(var c=0,b=Object.keys(u);c<b.length;c++){var d=b[c];if(h.default(u[d],a))return d}}function f(a,c){var b=["temporary"],d="optional",
f="optional";c.persistentLicense&&(d="required",b.push("persistent-license"));c.persistentStateRequired&&(d="required");c.distinctiveIdentifierRequired&&(f="required");var e=c.videoRobustnesses||("widevine"===a?p:[]);a=c.audioRobustnesses||("widevine"===a?p:[]);e.length||e.push(void 0);a.length||a.push(void 0);e=e.map(function(a){return{contentType:'video/mp4;codecs="avc1.4d401e"',robustness:a}});a=a.map(function(a){return{contentType:'audio/mp4;codecs="mp4a.40.2"',robustness:a}});return[{initDataTypes:["cenc"],
videoCapabilities:e,audioCapabilities:a,distinctiveIdentifier:f,persistentState:d,sessionTypes:b}]}function k(a,b){if(b=g(a,b))return n.default.debug("eme: found compatible keySystem quickly",b),c.Observable.of(b);var e=a.reduce(function(a,c){var b=u[c.type]?u[c.type].map(function(a){return{keyName:c.type,keyType:a,keySystem:c}}):[{keyName:l(c.type)||"",keyType:c.type,keySystem:c}];return a.concat(b)},[]);return c.Observable.create(function(a){function c(k){if(!b)if(k>=e.length)a.error(new m.EncryptedMediaError("INCOMPATIBLE_KEYSYSTEMS",
null,!0));else{var g=e[k],l=g.keyType,p=g.keySystem,q=f(g.keyName,p);n.default.debug("eme: request keysystem access "+l+","+(k+1+" of "+e.length),q);if(null==d.requestMediaKeySystemAccess)throw Error("requestMediaKeySystemAccess is not implemented in your browser.");h=d.requestMediaKeySystemAccess(l,q).subscribe(function(c){n.default.info("eme: found compatible keysystem",l,q);a.next({keySystem:p,keySystemAccess:c});a.complete()},function(){n.default.debug("eme: rejected access to keysystem",l,q);
h=null;c(k+1)})}}var b=!1,h;c(0);return function(){b=!0;h&&h.unsubscribe()}})}Object.defineProperty(b,"__esModule",{value:!0});var c=a(0),d=a(7);e=a(3);var h=a(14),n=a(1),m=a(8),p=e.default.EME_DEFAULT_WIDEVINE_ROBUSTNESSES,u=e.default.EME_KEY_SYSTEMS;b.findCompatibleKeySystem=k;b.getKeySystem=function(a){return a.$keySystem&&a.$keySystem.type};b.default=k},function(e,b,a){function g(a,b){return l.Observable.defer(function(){return k.default(a.setServerCertificate(b)).ignoreElements().catch(function(a){throw new f.default("LICENSE_SERVER_CERTIFICATE_ERROR",
a,!0);})})}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(87),k=a(13);b.setServerCertificate=g;b.trySettingServerCertificate=function(a,b,f){return g(a,b).catch(function(a){a.fatal=!1;f.next(a);return l.Observable.empty()})};b.default=g},function(e,b,a){function g(a,c,b){return{type:"ISessionEvent",value:h({name:a,session:c},b)}}function l(a,c,b){function d(a,c){return p.isKnownError(a)&&a.type===p.ErrorTypes.ENCRYPTED_MEDIA_ERROR?(a.fatal=c,a):new p.EncryptedMediaError("KEY_LOAD_ERROR",
a,c)}r.default.debug("eme: handle message events",a);var f={totalRetry:2,retryDelay:200,errorSelector:function(a){return d(a,!0)},onRetry:function(a){return b.next(d(a,!1))}},e=w.onKeyError$(a).map(function(a){throw new p.EncryptedMediaError("KEY_ERROR",a,!0);}),h=w.onKeyStatusesChange$(a).mergeMap(function(b){r.default.debug("eme: keystatuseschange event",a,b);a.keyStatuses.forEach(function(a,c){if(y.KEY_STATUS_ERRORS[c])throw new p.EncryptedMediaError("KEY_STATUS_CHANGE_ERROR",c,!0);if(y.KEY_STATUS_ERRORS[a])throw new p.EncryptedMediaError("KEY_STATUS_CHANGE_ERROR",
a,!0);});return v.default(function(){return c&&c.onKeyStatusesChange?q.default(c.onKeyStatusesChange(b,a)):n.Observable.empty()}).catch(function(a){throw new p.EncryptedMediaError("KEY_STATUS_CHANGE_ERROR",a,!0);})}),k=w.onKeyMessage$(a).mergeMap(function(b){var d=new Uint8Array(b.message),e=b.messageType||"license-request";r.default.debug("eme: event message type "+e,a,b);b=n.Observable.defer(function(){var a=c.getLicense(d,e);return q.default(a).timeout(1E4).catch(function(a){if(a instanceof m.TimeoutError)throw new p.EncryptedMediaError("KEY_LOAD_TIMEOUT",
null,!1);throw a;})});return x.retryObsWithBackoff(b,f)});h=n.Observable.merge(k,h).concatMap(function(c){r.default.debug("eme: update session",c);var b=g("session-update",a,{updatedWith:c});return q.default(a.update(c)).catch(function(a){throw new p.EncryptedMediaError("KEY_UPDATE_ERROR",a,!0);}).mapTo(b)});e=n.Observable.merge(h,e);return a.closed?e.takeUntil(q.default(a.closed)):e}function f(a,c,b,d,f){r.default.debug("eme: create a new "+c+" session");if(null==a.createSession)throw Error("Invalid MediaKeys implementation: Missing createSession");
var e=a.createSession(c);a=l(e,b,f).finally(function(){z.$loadedSessions.deleteAndClose(e);z.$storedSessions.delete(d)}).publish();return{session:e,sessionEvents:a}}function k(a,c,b,d,e,h){a=f(a,b,c,e,h);var k=a.session;a=a.sessionEvents;z.$loadedSessions.add(e,k,a);r.default.debug("eme: generate request",d,e);d=q.default(k.generateRequest(d,e)).catch(function(a){throw new p.EncryptedMediaError("KEY_GENERATE_REQUEST_ERROR",a,!1);}).do(function(){"persistent-license"===b&&z.$storedSessions.add(e,k)}).mapTo(g("generated-request",
k,{initData:e,initDataType:d}));return n.Observable.merge(a,d)}function c(a,c,b,d,f,e){return k(a,c,b,d,f,e).catch(function(h){if(h.code!==p.ErrorCodes.KEY_GENERATE_REQUEST_ERROR)throw h;var g=z.$loadedSessions.getFirst();if(!g)throw h;r.default.warn("eme: could not create a new session, retry after closing a currently loaded session",h);return z.$loadedSessions.deleteAndClose(g).mergeMap(function(){return k(a,c,b,d,f,e)})})}function d(a,b,d,e,h,k){r.default.debug("eme: load persisted session",d);
var l=f(a,"persistent-license",b,h,k),m=l.session,p=l.sessionEvents;return q.default(m.load(d)).catch(function(){return n.Observable.of(!1)}).mergeMap(function(f){if(f)return z.$loadedSessions.add(h,m,p),z.$storedSessions.add(h,m),p.startWith(g("loaded-session",m,{storedSessionId:d}));r.default.warn("eme: no data stored for the loaded session, do fallback",d);z.$loadedSessions.deleteById(d);z.$storedSessions.delete(h);m.sessionId&&q.default(m.remove()).subscribe(t.default,function(a){r.default.warn("Failed to remove session:"+
a.message)});return c(a,b,"persistent-license",e,h,k).startWith(g("loaded-session-failed",m,{storedSessionId:d}))})}Object.defineProperty(b,"__esModule",{value:!0});var h=a(5),n=a(0),m=a(83),p=a(8),u=a(14),q=a(13),r=a(1),t=a(24),x=a(97),v=a(59),w=a(18),y=a(295),z=a(58);b.default=function(a,b,f,e,h,k){return n.Observable.defer(function(){var l=z.$loadedSessions.get(h);if(l&&l.sessionId)return r.default.debug("eme: reuse loaded session",l.sessionId),n.Observable.of(g("reuse-session",l));l="temporary";
var m=b.sessionTypes;return m&&u.default(m,"persistent-license")&&f.persistentLicense&&(l="persistent-license",m=z.$storedSessions.get(h))?d(a,f,m.sessionId,e,h,k):c(a,f,l,e,h,k)})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.KEY_STATUS_ERRORS={expired:!0,"internal-error":!0}},function(e,b,a){function g(a,b,e,g,p){return l.Observable.defer(function(){var d=p.$videoElement,h=p.$mediaKeys;p.$mediaKeys=a;p.$mediaKeySystemConfiguration=b;p.$keySystem=g;p.$videoElement=e;if(e.mediaKeys===
a)return l.Observable.of(a);h&&h!==a&&c.$loadedSessions.dispose();d&&d!==e?(k.default.debug("eme: unlink old video element and set mediakeys"),d=f.setMediaKeys(d,null).concat(f.setMediaKeys(e,a))):(k.default.debug("eme: set mediakeys"),d=f.setMediaKeys(e,a));return d.mapTo(a)})}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(7),k=a(1),c=a(58);b.setMediaKeys=g;b.disposeMediaKeys=function(a){return a?f.setMediaKeys(a,null):l.Observable.empty()};b.default=g},function(e,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var g=a(0),l=a(6),f=a(3),k=a(1),c=a(298),d=a(299),h=a(18),n=a(8),m=a(300),p=a(101),u=a(57),q=a(316),r=a(60),t=a(353),x=a(356),v=a(357),w=a(358),y=a(359),z=a(360),B=a(361),A=a(111),C=a(362);b.SegmentBookkeeper=C.default;var D=a(112),H=a(113),F=a(41),E=a(114);b.default=function(a){function b(a,c){v.setDurationToMediaSource(a,c.getDuration());k.default.debug("calculating initial time");var b=z.default(c,Q);k.default.debug("initial time calculated:",b);var d=c.getPeriodForTime(b);
if(null==d)throw new n.MediaError("MEDIA_STARTING_TIME_NOT_FOUND",null,!0);var f=E.default(L,b,G),h=f.loadAndPlay$;f=x.default(c,M,f.initialSeek$,b);b=new l.Subject;var y=new l.Subject,C=new q.SegmentPipelinesManager(S,y,b,N);b=new m.default(y,b,e);y=g.Observable.combineLatest(M,O).map(function(a){var b=a[0];return{bufferGap:b.bufferGap,duration:b.duration,isLive:c.isLive,position:b.currentTime,speed:a[1]}});y=new p.default(b,y);var K=new r.default(L,a);d=t.default({manifest:c,period:d},f,Z,y,K,C,
ca,da,{maxRetry:J.segmentRetry,maxRetryOffline:J.offlineRetry,textTrackOptions:X},N).mergeMap(function(c){return"end-of-stream"===c.type?(k.default.info("Triggering end of stream."),w.default(a)):g.Observable.of(c)});d=c.isLive?d.mergeMap(B.default(L,c,T)):d;f=u.default(L,V,N);C=A.default(L);y=D.default(L,O,M,{pauseWhenStalled:!0}).map(F.default.speedChanged);var R=H.default(L,M).map(F.default.stalled);b=g.Observable.of(F.default.manifestReady(b,c));h=h.mapTo(F.default.loaded());return g.Observable.merge(b,
h,d,f,C,y,R).finally(function(){K.disposeAll()})}var e=a.adaptiveOptions,G=a.autoPlay,K=a.bufferOptions,M=a.clock$,V=a.keySystems,J=a.networkConfig,O=a.speed$,Q=a.startAt,R=a.supplementaryImageTracks,W=a.supplementaryTextTracks,X=a.textTrackOptions,S=a.transport,Y=a.url,L=a.videoElement,Z=K.wantedBufferAhead$,aa=K.maxBufferAhead$,ba=K.maxBufferBehind$,N=new l.Subject,T=c.default(q.createManifestPipeline(S,{maxRetry:null!=J.manifestRetry?J.manifestRetry:f.default.DEFAULT_MAX_MANIFEST_REQUEST_RETRY,
maxRetryOffline:null!=J.offlineRetry?J.offlineRetry:f.default.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR},N,W,R)),da=new d.default(function(a){return y.default({queuedSourceBuffer:a,clock$:M.map(function(a){return a.currentTime}),maxBufferBehind$:ba,maxBufferAhead$:aa})}),ca=new d.default(function(){return new C.default});a=v.default(L).mergeMap(function(a){return g.Observable.combineLatest(T(Y),h.onSourceOpen$(a).take(1)).mergeMap(function(c){return b(a,c[0])})});K=N.map(F.default.warning);return g.Observable.merge(a,
K)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(0),l=a(13),f=a(24);b.default=function(a){var c=!1;return function(){for(var b=[],e=0;e<arguments.length;e++)b[e]=arguments[e];if(c)return g.Observable.empty();c=!0;return l.default(a.apply(void 0,b)).do(f.default,function(){return c=!1},function(){return c=!1})}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=function(){function a(a){this._weakMap=new WeakMap;this._fn=a}a.prototype.get=function(a){var b=
this._weakMap.get(a);if(b)return b;b=this._fn(a);this._weakMap.set(a,b);return b};a.prototype.destroy=function(a){this._weakMap.delete(a)};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(6),l=a(301),f={limitWidth:{},throttle:{},initialBitrates:{},manualBitrates:{},maxAutoBitrates:{}};e=function(){function a(a,b,e){void 0===e&&(e=f);var c=this;this._dispose$=new g.Subject;this._choosers={};this._chooserInstanceOptions={initialBitrates:e.initialBitrates||
{},manualBitrates:e.manualBitrates||{},maxAutoBitrates:e.maxAutoBitrates||{},throttle:e.throttle||{},limitWidth:e.limitWidth||{}};b.takeUntil(this._dispose$).subscribe(function(a){var b=a.type;a=a.value;c._lazilyCreateChooser(b);c._choosers[b].addEstimate(a.duration,a.size)});a.mergeMap(function(a){return a}).takeUntil(this._dispose$).subscribe(function(a){var b=a.type,d=a.value;c._lazilyCreateChooser(b);switch(a.event){case "requestBegin":c._choosers[b].addPendingRequest(d.id,a);break;case "requestEnd":c._choosers[b].removePendingRequest(d.id);
break;case "progress":c._choosers[b].addRequestProgress(d.id,a)}})}a.prototype.get$=function(a,b,f){void 0===f&&(f=[]);this._lazilyCreateChooser(a);return this._choosers[a].get$(b,f)};a.prototype.setManualBitrate=function(a,b){var c=this._choosers[a];c?c.manualBitrate$.next(b):this._chooserInstanceOptions.initialBitrates[a]=b};a.prototype.setMaxAutoBitrate=function(a,b){var c=this._choosers[a];c?c.maxAutoBitrate$.next(b):this._chooserInstanceOptions.maxAutoBitrates[a]=b};a.prototype.getManualBitrate=
function(a){var b=this._choosers[a];return b?b.manualBitrate$.getValue():this._chooserInstanceOptions.manualBitrates[a]};a.prototype.getMaxAutoBitrate=function(a){var b=this._choosers[a];return b?b.maxAutoBitrate$.getValue():this._chooserInstanceOptions.maxAutoBitrates[a]};a.prototype.dispose=function(){var a=this;Object.keys(this._choosers).forEach(function(b){a._choosers[b].dispose()});this._chooserInstanceOptions=f;this._choosers={};this._dispose$.next();this._dispose$.complete()};a.prototype._lazilyCreateChooser=
function(a){if(!this._choosers[a]){var b=this._choosers;var c=this._chooserInstanceOptions;c=new l.default({limitWidth$:c.limitWidth[a],throttle$:c.throttle[a],initialBitrate:c.initialBitrates[a],manualBitrate:c.manualBitrates[a],maxAutoBitrate:c.maxAutoBitrates[a]});b[a]=c}};return a}();b.default=e},function(e,b,a){function g(a,b){a=u.default(a,b)||a[0];return k.Observable.of({bitrate:void 0,representation:a})}Object.defineProperty(b,"__esModule",{value:!0});var l=a(5),f=a(84),k=a(0),c=a(6);e=a(3);
var d=a(1),h=a(302),n=a(99),m=a(303),p=a(304),u=a(305),q=e.default.ABR_STARVATION_GAP,r=e.default.OUT_OF_STARVATION_GAP,t=e.default.ABR_STARVATION_FACTOR,x=e.default.ABR_REGULAR_FACTOR;a=function(){function a(a){this._dispose$=new c.Subject;this.manualBitrate$=new f.BehaviorSubject(null!=a.manualBitrate?a.manualBitrate:-1);this.maxAutoBitrate$=new f.BehaviorSubject(null!=a.maxAutoBitrate?a.maxAutoBitrate:Infinity);this.estimator=new h.default;this._currentRequests={};this._initialBitrate=a.initialBitrate||
0;this._limitWidth$=a.limitWidth$;this._throttle$=a.throttle$}a.prototype.get$=function(a,b){var c=this;if(2>b.length)return k.Observable.of({bitrate:void 0,representation:b.length?b[0]:null}).takeUntil(this._dispose$);var d=this.manualBitrate$,f=this.maxAutoBitrate$,e=this._initialBitrate,h=[];this._limitWidth$&&h.push(this._limitWidth$.map(function(a){return{width:a}}));this._throttle$&&h.push(this._throttle$.map(function(a){return{bitrate:a}}));var v=h.length?k.Observable.combineLatest.apply(k.Observable,
h).map(function(a){return l.apply(void 0,[{}].concat(a))}):k.Observable.of({}),w;return d.switchMap(function(d){if(0<=d)return g(b,d);var h=!1;return k.Observable.combineLatest(a,f,v).map(function(a){var d=a[0],f=a[1];a=a[2];var k=d.bufferGap;k<=q?h=!0:h&&k>=r&&(h=!1);if(h){var g=d.bitrate;a:{var l=c._currentRequests;k+=d.position;for(var v=Object.keys(l),y=v.length,A=0;A<y-1;A++){var C=l[v[A]];if(Math.abs(k-C.time)<C.duration){k=C;break a}}k=void 0}if(k&&(v=k.duration,l=k.requestTimestamp,l=(Date.now()-
l)/1E3,v&&l>1.2*v+1)){var z=k;if(2<=z.progress.length){var B=new n.default(2);k=z.progress;for(v=1;v<k.length;v++)y=k[v].timestamp-k[v-1].timestamp,B.addSample(y/1E3,8*(k[v].size-k[v-1].size)/(y/1E3));B=B.getEstimate()}!B&&g&&(B=z.duration*g/(5*l/4));z=B;if(null!=z){c.resetEstimate();var D=null!=g?Math.min(z,g,f):Math.min(z,f)}}}null==D&&(z=c.estimator.getEstimate(),D=Math.min(null!=z?h?z*t:z*x:null!=w?h?w*t:w*x:e,f));1<d.speed&&(D/=d.speed);d=b;null!=a.bitrate&&(d=m.default(d,a.bitrate));null!=a.width&&
(d=p.default(d,a.width));return{bitrate:z,representation:u.default(d,D)||b[0]}}).do(function(a){a=a.bitrate;null!=a&&(w=a)}).share()})};a.prototype.addEstimate=function(a,b){null!=a&&null!=b&&this.estimator.addSample(a,b)};a.prototype.resetEstimate=function(){this.estimator.reset()};a.prototype.addPendingRequest=function(a,b){this._currentRequests[a]?d.default.warn("ABR: request already added."):(b=b.value,this._currentRequests[a]={time:b.time,duration:b.duration,requestTimestamp:b.requestTimestamp,
progress:[]},this._currentRequests[a].progress=[])};a.prototype.addRequestProgress=function(a,b){this._currentRequests[a]?this._currentRequests[a].progress.push(b.value):d.default.warn("ABR: progress for a request not added")};a.prototype.removePendingRequest=function(a){this._currentRequests[a]||d.default.warn("ABR: can't remove unknown request");delete this._currentRequests[a]};a.prototype.resetRequests=function(){this._currentRequests={}};a.prototype.dispose=function(){this._dispose$.next();this.manualBitrate$.complete();
this.maxAutoBitrate$.complete()};return a}();b.default=a},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(3);var g=a(99),l=e.default.ABR_MINIMUM_TOTAL_BYTES,f=e.default.ABR_MINIMUM_CHUNK_SIZE;a=function(){function a(){this._fast=new g.default(2);this._slow=new g.default(10);this._bytesSampled=0}a.prototype.addSample=function(a,b){if(!(b<f)){var c=8E3*b/a;a/=1E3;this._bytesSampled+=b;this._fast.addSample(a,c);this._slow.addSample(a,c)}};a.prototype.getEstimate=function(){if(!(this._bytesSampled<
l))return Math.min(this._fast.getEstimate(),this._slow.getEstimate())};a.prototype.reset=function(){this._fast=new g.default(2);this._slow=new g.default(10);this._bytesSampled=0};return a}();b.default=a},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(100);b.default=function(a,b){var f=g(a,function(a){return a.bitrate>b});return-1===f?a:a.slice(0,f)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(12);b.default=function(a,b){var f=a.sort(function(a,
b){return(a.width||0)-(b.width||0)});if(f=g(f,function(a){return(a.width||0)>=b})){var c=f.width||0;return a.filter(function(a){return(a.width||0)<=c})}return a}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(100);b.default=function(a,b){var f=g(a,function(a){return a.bitrate>b});return-1===f?a[a.length-1]:a[f-1]}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(0);b.default=function(a,b,e){var c=e.period;return g.Observable.combineLatest(a,b).filter(function(a){var b=
a[0];a=a[1];return null!=c.end&&b.currentTime+a>=c.end}).map(function(){return{type:"full-buffer",value:void 0}})}},function(e,b,a){function g(a,b){var c=a.manifest;a=a.representation;return b.stalled&&c.isLive?a.index.checkDiscontinuity(b.currentTime):-1}function l(a,b,c){a=a.representation;var d=c.start;c=c.end;b=b.inventory.map(function(a){return a.infos.segment});return a.index.shouldRefresh(b,d,c)}Object.defineProperty(b,"__esModule",{value:!0});var f=a(5),k=a(0),c=a(38),d=a(1),h=a(308),n=a(309),
m=a(311),p=a(312),u=a(313),q=a(314),r=a(315);b.default=function(a){var b=a.clock$,e=a.content,t=a.queuedSourceBuffer,y=a.segmentBookkeeper,z=a.segmentFetcher;a=a.wantedBufferAhead$;var B=e.manifest,A=e.period,C=e.adaptation,D=e.representation,H=m.default(C),F=null,E=new c.ReplaySubject(1),G=[],I=null,P=new h.default;a=k.Observable.combineLatest(b,a).map(function(a){var b=a[0],c=a[1];a=t.getBuffered();var d=q.default(A,a,b,c,H);c=g(e,b);var f=l(e,y,d);y.synchronizeBuffered(a);a=u.default(D,d,{addInitSegment:null==
F,ignoreRegularSegments:0===b.readyState}).filter(function(a){return r.default(a,e,y,d,P)}).map(function(a){return{priority:p.default(a,b),segment:a}});return{discontinuity:c,shouldRefreshManifest:f,state:a.length?{type:"need-segments",value:{neededSegments:a}}:null!=A.end&&d.end>=A.end?{type:"full-buffer",value:void 0}:{type:"idle-buffer",value:void 0}}}).mergeMap(function(a){var b=a.discontinuity,c=a.state,f=a.shouldRefreshManifest;a=[];1<b&&a.push({type:"discontinuity-encountered",value:{nextTime:b+
1}});f&&a.push({type:"needs-manifest-refresh",value:void 0});"need-segments"===c.type&&c.value.neededSegments.length?(b=c.value.neededSegments,c=b[0],I?I.segment.id!==c.segment.id?(d.default.debug("canceling old downloading queue and starting a new one",C.type),G=b,E.next(void 0)):I.priority!==c.priority?(d.default.debug("updating pending request priority",C.type),z.updatePriority(I.request$,c.priority)):(d.default.debug("updating downloading queue",C.type),G=b.slice().splice(1,b.length)):(d.default.debug("starting downloading queue",
C.type),G=b,E.next(void 0)),b={type:"active-buffer",value:void 0}):(I&&d.default.debug("interrupting segment request."),G=[],E.next(void 0),b="full-buffer"===c.type?c:{type:"idle-buffer",value:void 0});return"idle-buffer"===b.type?k.Observable.of.apply(k.Observable,a):k.Observable.of.apply(k.Observable,a).concat(k.Observable.of(b))});var U=E.switchMap(function(){var a=k.Observable.defer(function(){var b=G.shift();if(null==b)return I=null,k.Observable.empty();var c=b.segment;b=b.priority;var d=z.createRequest({adaptation:C,
init:F&&F.segmentInfos||void 0,manifest:B,period:A,representation:D,segment:c},b);I={segment:c,priority:b,request$:d};return d.map(function(a){return f({segment:c},a)}).mergeMap(function(b){return k.Observable.of(b).concat(a)})});return a.finally(function(){I=null})}).mergeMap(function(a){return k.Observable.defer(function(){var c=a.segment,d=a.parsed.segmentInfos,f=a.parsed.segmentData;c.isInit&&(F={segmentData:f,segmentInfos:d});var e=n.default(b,t,F&&F.segmentData,c,f);P.add(c.id);return e.mapTo({type:"added-segment",
value:{bufferType:C.type,segment:c,segmentData:f}}).do(function(){if(!c.isInit){var a=d?d:c,b=a.time,f=a.duration;a=a.timescale;y.insert(A,C,D,c,b/a,null!=f?(b+f)/a:void 0)}}).finally(function(){P.remove(c.id)})})});return k.Observable.merge(a,U).share()}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=function(){function a(){this._hashes={}}a.prototype.add=function(a){this._hashes[a]=!0};a.prototype.remove=function(a){delete this._hashes[a]};a.prototype.test=function(a){return!!this._hashes[a]};
a.prototype.isEmpty=function(){return!Object.keys(this._hashes).length};return a}();b.default=e},function(e,b,a){function g(a,b,f,e){return f.isInit?null==b?l.Observable.of(void 0):a.appendBuffer(b,null):null==e?l.Observable.of(void 0):a.appendBuffer(b,e)}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(8),k=a(310);b.default=function(a,b,e,l,m){var c=g(b,e,l,m);return c.catch(function(d){if(!d||"QuotaExceededError"!==d.name)throw new f.MediaError("BUFFER_APPEND_ERROR",d,!0);return k.default(a,
b).mergeMapTo(c).catch(function(a){throw new f.MediaError("BUFFER_FULL_ERROR",a,!0);})})}},function(e,b,a){function g(a,b,c){var d=k.getInnerAndOuterTimeRanges(b,a);b=d.innerRange;d=d.outerRanges;for(var e=[],h=0;h<d.length;h++){var g=d[h];a-c<g.end?e.push(g):a+c>g.start&&e.push(g)}b&&(f.default.debug("buffer: gc removing part of inner range",e),a-c>b.start&&e.push({start:b.start,end:a-c}),a+c<b.end&&e.push({start:a+c,end:b.end}));return e}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0);
e=a(3);var f=a(1),k=a(17),c=e.default.BUFFER_GC_GAPS.CALM,d=e.default.BUFFER_GC_GAPS.BEEFY;b.default=function(a,b){return a.take(1).mergeMap(function(a){f.default.warn("buffer: running garbage collector");var e=b.getBuffered(),h=g(a.currentTime,e,c);0===h.length&&(h=g(a.currentTime,e,d));f.default.debug("buffer: gc cleaning",h);return l.Observable.from(h.map(function(a){return b.removeBuffer(a)})).concatAll()})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(3).default.BUFFER_PADDING;
b.default=function(a){switch(a.type){case "audio":case "video":return g[a.type];default:return g.other}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(3).default.SEGMENT_PRIORITIES_STEPS;b.default=function(a,b){a=a.time/a.timescale-(b.currentTime+b.timeOffset);for(b=0;b<g.length;b++)if(a<g[b])return b;return g.length}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b,f){var e=f.ignoreRegularSegments,c=null;f.addInitSegment&&(c=a.index.getInitSegment());
if(e)return c?[c]:[];f=b.start;a=a.index.getSegments(f,b.end-f);c&&a.unshift(c);return a}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(17);b.default=function(a,b,e,c,d){var f=e.currentTime+e.timeOffset,k=Math.max(a.start||0,f);a=null==e.liveGap?a.end:Math.min(a.end||Infinity,e.currentTime+e.liveGap);e=d.low;d=d.high;b=g.getLeftSizeOfRange(b,f);return{start:Math.min(Math.max(f+(b>e&&Infinity>b?Math.min(b,d):0),k),a||Infinity),end:Math.min(Math.max(f+c,k),a||Infinity)}}},
function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(3);var g=e.default.BITRATE_REBUFFERING_RATIO,l=e.default.MINIMUM_SEGMENT_SIZE;b.default=function(a,b,c,d,e){var f=b.period,h=b.adaptation;b=b.representation;if(e.test(a.id))return!1;if(a.isInit||0>a.time)return!0;e=a.duration;var k=a.timescale;return e?e/k<l?!1:(a=c.hasPlayableSegment(d,{time:a.time,duration:e,timescale:k}))&&a.infos.period.id===f.id&&a.infos.adaptation.id===h.id?b.bitrate>a.infos.representation.bitrate*g:!0:!0}},
function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(317);b.createManifestPipeline=e.default;a=a(323);b.SegmentPipelinesManager=a.default},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(318),l=a(105);b.default=function(a,b,c,d,e){void 0===d&&(d=[]);void 0===e&&(e=[]);return function(f){return l.default(a.manifest,b)({url:f}).do(function(a){"error"===a.type&&c.next(a.value)}).filter(function(a){return"data"===a.type||"cache"===a.type}).map(function(a){return g.default(a.value.parsed.manifest,
d,e,c)}).share()}}},function(e,b,a){function g(a,b){a=a.filter(function(a){return 0>h.indexOf(a.type)?(c.default.info("not supported adaptation type",a.type),a=new k.MediaError("MANIFEST_UNSUPPORTED_ADAPTATION_TYPE",null,!1),b.next(a),!1):!0}).map(function(a){if(a.representations.length&&(a.representations=l(a.type,a.representations),0===a.representations.length)){c.default.warn("Incompatible codecs for adaptation",a);var d=new k.MediaError("MANIFEST_INCOMPATIBLE_CODECS_ERROR",null,!1);b.next(d)}return a}).filter(function(a){return a.representations.length});
if(0===a.length)throw new k.MediaError("MANIFEST_PARSE_ERROR",null,!0);return a}function l(a,b){function c(a){var b=a.codecs;a=a.mimeType;return(void 0===a?"":a)+';codecs="'+(void 0===b?"":b)+'"'}return"audio"===a||"video"===a?b.filter(function(a){return f.isCodecSupported(c(a))}):b}Object.defineProperty(b,"__esModule",{value:!0});var f=a(7),k=a(8),c=a(1),d=a(319),h=["audio","video","text","image"];b.default=function(a,b,c,f){a.periods=a.periods.map(function(a){a.adaptations=g(a.adaptations,f);return a});
a=new d.default(a);a.addSupplementaryTextAdaptations(b);a.addSupplementaryImageAdaptations(c);return a}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(12);a(4);var l=a(20),f=a(34),k=a(1),c=a(102);b.Adaptation=c.default;var d=a(320);b.Period=d.default;e=a(103);b.Representation=e.default;var h=a(104);a=function(){function a(a){var b=l.default();this.id=null==a.id?b:""+a.id;this.transport=a.transportType||"";this.periods=a.periods.map(function(a){return new d.default(a)});
this.adaptations=this.periods[0]&&this.periods[0].adaptations||[];this.minimumTime=a.minimumTime;this.isLive="dynamic"===a.type;this.uris=a.uris;this.suggestedPresentationDelay=a.suggestedPresentationDelay;this.availabilityStartTime=a.availabilityStartTime;this.presentationLiveGap=a.presentationLiveGap;this.timeShiftBufferDepth=a.timeShiftBufferDepth;this._duration=a.duration}a.prototype.addSupplementaryImageAdaptations=function(a){a=(Array.isArray(a)?a:[a]).map(function(a){var b=a.mimeType;a=a.url;
var d="gen-image-ada-"+l.default(),f="gen-image-rep-"+l.default();return new c.default({id:d,type:"image",manuallyAdded:!0,representations:[{baseURL:a,bitrate:0,id:f,mimeType:b,index:new h.StaticRepresentationIndex}]})});a.length&&(this.adaptations.image=this.adaptations.image?this.adaptations.image.concat(a):a)};a.prototype.addSupplementaryTextAdaptations=function(a){a=(Array.isArray(a)?a:[a]).reduce(function(a,b){var d=b.mimeType,e=b.codecs,k=b.url,g=b.language,m=b.languages,p=b.closedCaption;return a.concat((g?
[g]:m||[]).map(function(a){var b="gen-text-ada-"+l.default(),g="gen-text-rep-"+l.default();return new c.default({id:b,type:"text",language:a,normalizedLanguage:f.normalize(a),closedCaption:p,manuallyAdded:!0,representations:[{baseURL:k,bitrate:0,id:g,mimeType:d,codecs:e,index:new h.StaticRepresentationIndex}]})}))},[]);a.length&&(this.adaptations.text=this.adaptations.text?this.adaptations.text.concat(a):a)};a.prototype.getPeriodForTime=function(a){return g(this.periods,function(b){return a>=b.start&&
(null==b.end||b.end>a)})};a.prototype.getPeriodAfter=function(a){var b=a.end;return null==b?null:g(this.periods,function(a){return null==a.end||b<a.end})||null};a.prototype.getDuration=function(){return this._duration};a.prototype.getUrl=function(){return this.uris[0]};a.prototype.getAdaptations=function(){var a=this.periods[0];if(!a)return[];a=a.adaptations;var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push.apply(b,a[c]);return b};a.prototype.getAdaptationsForType=function(a){var b=this.periods[0];
return b?b.adaptations[a]||[]:[]};a.prototype.getAdaptation=function(a){return g(this.getAdaptations(),function(b){return a===b.id})};a.prototype.updateLiveGap=function(a){this.isLive&&(this.presentationLiveGap=this.presentationLiveGap?this.presentationLiveGap+a:a)};a.prototype.update=function(a){this._duration=a.getDuration();this.timeShiftBufferDepth=a.timeShiftBufferDepth;this.availabilityStartTime=a.availabilityStartTime;this.suggestedPresentationDelay=a.suggestedPresentationDelay;this.uris=a.uris;
var b=this.periods,c=a.periods;var d=function(a){var d=b[a],e=g(c,function(a){return a.id===d.id});if(e){d.start=e.start;d.end=e.end;d.duration=e.duration;var h=d.getAdaptations(),l=e.getAdaptations();e=function(a){var b=h[a],c=g(l,function(a){return a.id===b.id});if(c){var d=h[a].representations,f=c.representations;a=function(a){var b=d[a],c=g(f,function(a){return a.id===b.id});c?(b.baseURL=c.baseURL,d[a].index._update(c.index)):k.default.warn('manifest: representation "'+d[a].id+'" not found when merging.')};
for(c=0;c<d.length;c++)a(c)}else k.default.warn('manifest: adaptation "'+h[a].id+'" not found when merging.')};for(var m=0;m<h.length;m++)e(m)}else k.default.info("Period "+d.id+" not found after update. Removing."),b.splice(a,1),a--;f=a};var f;for(a=0;a<b.length;a++)d(a),a=f;if(c.length>b.length){var e=b[b.length-1];if(e)for(a=0;a<c.length-1;a++)d=c[a],d.start>e.start&&(k.default.info("Adding new period "+d.id),this.periods.push(d));else for(a=0;a<c.length-1;a++)d=c[a],k.default.info("Adding new period "+
d.id),this.periods.push(d)}};return a}();b.default=a},function(e,b,a){function g(a){return a.reduce(function(a,b){var d=b.type;if(!b.representations.length)return a;a[d]||(a[d]=[]);a[d].push(new c.default(b));return a},{})}Object.defineProperty(b,"__esModule",{value:!0});var l=a(12),f=a(20),k=a(34),c=a(102),d=a(104);e=function(){function a(a){this.id=a.id;this.adaptations=g(a.adaptations);this.duration=a.duration;this.start=a.start;null!=this.duration&&null!=this.start&&(this.end=this.start+this.duration)}
a.prototype.addSupplementaryImageAdaptations=function(a){a=(Array.isArray(a)?a:[a]).map(function(a){var b=a.mimeType;a=a.url;var e="gen-image-ada-"+f.default(),h="gen-image-rep-"+f.default();return new c.default({id:e,type:"image",manuallyAdded:!0,representations:[{baseURL:a,bitrate:0,id:h,mimeType:b,index:new d.StaticRepresentationIndex}]})});a.length&&(this.adaptations.image=this.adaptations.image?this.adaptations.image.concat(a):a)};a.prototype.addSupplementaryTextAdaptations=function(a){a=(Array.isArray(a)?
a:[a]).reduce(function(a,b){var e=b.mimeType,h=b.codecs,g=b.url,l=b.language,m=b.languages,p=b.closedCaption;return a.concat((l?[l]:m||[]).map(function(a){var b="gen-text-ada-"+f.default(),l="gen-text-rep-"+f.default();return new c.default({id:b,type:"text",language:a,normalizedLanguage:k.normalize(a),closedCaption:p,manuallyAdded:!0,representations:[{baseURL:g,bitrate:0,id:l,mimeType:e,codecs:h,index:new d.StaticRepresentationIndex}]})}))},[]);a.length&&(this.adaptations.text=this.adaptations.text?
this.adaptations.text.concat(a):a)};a.prototype.getAdaptations=function(){var a=this.adaptations;if(!a)return[];var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push.apply(b,a[c]);return b};a.prototype.getAdaptationsForType=function(a){return this.adaptations[a]||[]};a.prototype.getAdaptation=function(a){return l(this.getAdaptations(),function(b){return a===b.id})};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(1);e=function(){function a(){}a.prototype.getInitSegment=
function(){return null};a.prototype.getSegments=function(){return[{id:"0",isInit:!1,number:0,time:0,duration:Number.MAX_VALUE,timescale:1}]};a.prototype.getFirstPosition=function(){};a.prototype.getLastPosition=function(){};a.prototype.shouldRefresh=function(){return!1};a.prototype.checkDiscontinuity=function(){return-1};a.prototype._addSegments=function(){};a.prototype._update=function(){g.default.warn("Tried to update a static RepresentationIndex")};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var g=a(0),l=a(7),f=a(8),k=a(98);b.default=function(a,b){var c=b.baseDelay,d=b.maxDelay,e=b.maxRetryRegular,p=b.maxRetryOffline,u=b.onRetry,q=0,r=0;return a.catch(function(a,b){var h=a instanceof f.RequestError?a.type===f.RequestErrorTypes.ERROR_HTTP_CODE?500<=a.status||404===a.status:a.type===f.RequestErrorTypes.TIMEOUT||a.type===f.RequestErrorTypes.ERROR_EVENT:!1;if(!h)throw a;h=a instanceof f.RequestError&&a.type===f.RequestErrorTypes.ERROR_EVENT&&l.isOffline()?2:1;var m=
2===h?p:e;h!==r&&(q=0,r=h);if(++q>m)throw a;u&&u(a,q);a=k.getFuzzedDelay(Math.min(c*Math.pow(2,q-1),d));return g.Observable.timer(a).mergeMap(function(){return b})})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(324),l=a(325),f=a(326);e=function(){function a(a,b,f,e){this._transport=a;this._metrics$=f;this._requestsInfos$=b;this._warning$=e;this._prioritizer=new l.default}a.prototype.createPipeline=function(a,b){a=f.default(a,this._transport,this._metrics$,this._requestsInfos$,
this._warning$,b);return g.default(this._prioritizer,a)};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){return{createRequest:function(f,e){void 0===e&&(e=0);return a.create(b(f),e)},updatePriority:function(b,e){a.updatePriority(b,e)}}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(12),l=a(0),f=a(6);e=function(){function a(){this._pendingPriority=null;this._numberOfPendingObservables=0;this._queue=[]}a.prototype.create=
function(a,b){var c=this;return l.Observable.defer(function(){if(null==c._pendingPriority||c._pendingPriority>=b)return c._pendingPriority=b,c._startObservable(a);var d=new f.Subject;c._queue.push({observable:a,priority:b,trigger:d});return d.mergeMap(function(){return c._startObservable(a)})})};a.prototype.updatePriority=function(a,b){var c=g(this._queue,function(b){return b.observable===a});c&&(c.priority=b)};a.prototype._startObservable=function(a){var b=this;this._numberOfPendingObservables++;
return a.finally(function(){b._numberOfPendingObservables--;if(!(0<b._numberOfPendingObservables)&&(b._pendingPriority=null,0!==b._queue.length)){b._pendingPriority=b._queue.reduce(function(a,b){return null==a||a>b.priority?b.priority:a},null);for(var a=0;a<b._queue.length;a++){var c=b._queue[a];c.priority===b._pendingPriority&&(b._queue.splice(a,1),a--,c.trigger.next(),c.trigger.complete())}}})};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(5),
l=a(6),f=a(20),k=a(105);b.default=function(a,b,e,n,m,p){var c=k.default(b[a],p),d,h;return function(b){return c(b).do(function(b){switch(b.type){case "error":m.next(g(b.value,{pipelineType:a}));break;case "metrics":b=b.value;var c=b.size;b=b.duration;null!=c&&null!=b&&e.next({type:a,value:{size:c,duration:b}});break;case "request":c=(b=b.value)&&b.segment;null!=c&&null!=c.duration&&(d=new l.Subject,n.next(d),b=c.duration/c.timescale,c=c.time/c.timescale,h=f.default(),d.next({type:a,event:"requestBegin",
value:{duration:b,time:c,requestTimestamp:Date.now(),id:h}}));break;case "progress":b=b.value,null!=b.totalSize&&b.size<b.totalSize&&null!=h&&null!=d&&d.next({type:a,event:"progress",value:{duration:b.duration,size:b.size,totalSize:b.totalSize,timestamp:Date.now(),id:h}})}}).filter(function(a){return"data"===a.type||"cache"===a.type}).map(function(a){return a.value}).finally(function(){null!=d&&(null!=h&&d.next({type:a,event:"requestEnd",value:{id:h}}),d.complete())}).share()}}},function(e,b,a){var g=
this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,e){function c(){this.constructor=b}a(b,e);b.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)}}();Object.defineProperty(b,"__esModule",{value:!0});e=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}g(b,a);b.prototype._append=function(a){var b=a.end,d=a.timescale;
this.buffered.insert(a.start/d,null==b?Number.MAX_VALUE:b/d)};b.prototype._remove=function(){};b.prototype._abort=function(){};return b}(a(61).default);b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(0),l=a(6),f=a(1),k;(function(a){a[a.Append=0]="Append";a[a.Remove=1]="Remove"})(k||(k={}));e=function(){function a(a){this._buffer=a;this._queue=[];this._lastInitSegment=this._flushing=null;this.__onUpdate=this._onUpdate.bind(this);this.__onError=this._onError.bind(this);
this.__flush=this._flush.bind(this);this._buffer.addEventListener("update",this.__onUpdate);this._buffer.addEventListener("error",this.__onError);this._buffer.addEventListener("updateend",this.__flush)}a.prototype.appendBuffer=function(a,b){var c=this;return g.Observable.defer(function(){return c._queueAction({type:k.Append,segment:b,initSegment:a})})};a.prototype.removeBuffer=function(a){var b=this,c=a.start,d=a.end;return g.Observable.defer(function(){return b._queueAction({type:k.Remove,start:c,
end:d})})};a.prototype.abort=function(){this.dispose();this._buffer.abort()};a.prototype.getBuffered=function(){return this._buffer.buffered};a.prototype.dispose=function(){this._buffer.removeEventListener("update",this.__onUpdate);this._buffer.removeEventListener("error",this.__onError);this._buffer.removeEventListener("updateend",this.__flush);this._queue.length=0;this._flushing=null};a.prototype._onUpdate=function(){this._flushing&&(this._flushing.next(void 0),this._flushing.complete(),this._flushing=
null)};a.prototype._onError=function(a){this._flushing&&(this._flushing.error(a),this._flushing=null)};a.prototype._queueAction=function(a){var b=!this._queue.length,c=new l.Subject;if(a.type===k.Append){var d=a.segment;a=a.initSegment;if(null===a&&null===d)return f.default.warn("QueuedSourceBuffer: no segment appended."),g.Observable.of(void 0);if(null===a)this._queue.unshift({type:k.Append,args:d,subject:c});else if(null===d){if(this._lastInitSegment===a)return g.Observable.of(void 0);this._queue.unshift({type:k.Append,
args:a,subject:c})}else this._lastInitSegment!==a&&this._queue.unshift({type:k.Append,args:a,subject:null}),this._queue.unshift({type:k.Append,args:d,subject:c});this._lastInitSegment=a}else if(a.type===k.Remove)this._queue.unshift({type:k.Remove,args:{start:a.start,end:a.end},subject:c});else throw Error("QueuedSourceBuffer: unrecognized action");b&&this._flush();return c.mapTo(void 0)};a.prototype._flush=function(){if(!this._flushing&&0!==this._queue.length&&!this._buffer.updating){var a=this._queue.pop();
this._flushing=a.subject;try{switch(a.type){case k.Append:f.default.debug("pushing data to source buffer",a.args);this._buffer.appendBuffer(a.args);break;case k.Remove:var b=a.args,c=b.start,e=b.end;f.default.debug("removing data from source buffer",c,e);this._buffer.remove(c,e)}}catch(p){this._onError(p)}}};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(330).default;b.HTMLTextSourceBuffer=e;a=a(347).default;b.NativeTextSourceBuffer=a},function(e,b,a){function g(a){var b=
d.onSeeking$(a),c=d.onSeeked$(a);a=d.onEnded$(a);c=k.Observable.merge(c,a);a=k.Observable.interval(u).startWith(null);return c.startWith(null).switchMapTo(a.mapTo(!0).takeUntil(b).concat(k.Observable.of(!1)))}function l(a,b){if(b)try{a.removeChild(b)}catch(t){h.default.warn("Can't remove text track: not in the element.")}}var f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var k=a(0),c=a(6),d=a(18);e=a(3);var h=a(1),n=a(61),m=a(331),p=a(332),u=e.default.MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL;a=function(a){function b(b,d){var f=this;h.default.debug("creating html text track source buffer");f=a.call(this)||this;f._videoElement=b;f._textTrackElement=d;f._destroy$=new c.Subject;
f._buffer=new m.default;f._currentElement=null;g(f._videoElement).takeUntil(f._destroy$).subscribe(function(a){a?(a=f._buffer.get(Math.max(f._videoElement.currentTime-u/2E3,0)),a)?f._currentElement!==a.element&&(l(d,f._currentElement),f._currentElement=a.element,d.appendChild(f._currentElement)):(l(d,f._currentElement),f._currentElement=null):(l(d,f._currentElement),f._currentElement=null)});return f}f(b,a);b.prototype._append=function(a){h.default.debug("appending new html text tracks",a);var b=
a.timescale,c=a.start,d=a.end,f=a.data,e=a.type,k=a.language;a=a.timeOffset;d&&0>=d-c?h.default.warn("Invalid text track appended: the start time is inferior or equal to the end time."):(c/=b,b=null!=d?d/b:void 0,f=p.default(e,f,a,k),e=null!=b?b:f[f.length-1].end,this._buffer.insert(f,c,e),this.buffered.insert(c,e))};b.prototype._remove=function(a,b){h.default.debug("removing html text track data",a,b);this._buffer.remove(a,b);this.buffered.remove(a,b)};b.prototype._abort=function(){h.default.debug("aborting html text track source buffer");
this._destroy$.next();this._destroy$.complete();l(this._textTrackElement,this._currentElement)};return b}(n.default);b.default=a},function(e,b,a){function g(a,b){for(var c=0;c<a.length;c++)if(b<a[c].end)return a.slice(0,c);return a.slice()}function l(a,b){for(var c=0;c<a.length;c++)if(b<a[c].end)return a.slice(c+1,a.length);return[]}function f(a,b,d){b={start:a.start,end:b,cues:g(a.cues,b)};a={start:d,end:a.end,cues:l(a.cues,d)};return[b,a]}Object.defineProperty(b,"__esModule",{value:!0});a(4);e=
function(){function a(){this._cuesBuffer=[]}a.prototype.get=function(a){for(var b=this._cuesBuffer,c=b.length-1;0<=c;c--)for(var f=b[c].cues,e=f.length-1;0<=e;e--){var g=f[e];if(a>=g.start){if(a<g.end)return g;return}}};a.prototype.remove=function(a,b){var c=Math.max(a,b);b=this._cuesBuffer;for(var d=b.length;0<d;){var e=b[0];if(e.end>=c){c=f(e,a,c);d=c[1];this._cuesBuffer[0]=c[0];b.splice(1,0,d);break}else e.cues=g(e.cues,a),e.end=a;for(a=1;a<d;a++)if(e=b[0],c<e.end){b.splice(1,a-1);e.cues=l(e.cues,
c);e.start=c;return}b.splice(1,b.length-1);break}};a.prototype.insert=function(a,b,e){var c=this._cuesBuffer;a={start:b,end:e,cues:a};for(var d=0;d<c.length;d++){var h=c[d];if(b<h.end){if(.2>=Math.abs(b-h.start)){if(.2>=Math.abs(e-h.end)){c[d]=a;return}if(e<h.end){h.cues=l(h.cues,e);h.start=e;c.splice(d,0,a);return}do c.splice(d,1),h=c[d];while(h&&e>h.end);if(!h){c[d]=a;return}if(.2>=Math.abs(e-h.end)){c[d]=a;return}h.cues=l(h.cues,e);h.start=e;c.splice(d,0,a);return}if(b<h.start){if(e<h.start){c.splice(d,
0,a);return}if(.2>=Math.abs(e-h.start)){h.start=e;c.splice(d,0,a);return}h.cues=l(h.cues,e);h.start=e;c.splice(d,0,a);return}if(e>h.end||.2>=Math.abs(e-h.end)){h.cues=g(h.cues,b);h.end=b;c.splice(d+1,0,a);return}b=f(h,b,e);e=b[1];this._cuesBuffer[d]=b[0];c.splice(d+1,0,a);c.splice(d+2,0,e);return}}c.push(a)};return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(1),l={};l.sami=a(333).default;l.ttml=a(334).default;l.srt=a(340).default;l.vtt=a(341).default;
b.default=function(a,b,c,d){g.default.debug("finding parser for html text tracks:",a);a=l[a];if(!a)throw Error("no parser found for the given text track");g.default.debug("parser found, parsing...");b=a(b,c,d);g.default.debug("parsed successfully!",b);return b}},function(e,b,a){function g(a){return a.replace(f,function(a,b){return String.fromCharCode(b)})}Object.defineProperty(b,"__esModule",{value:!0});var l=a(4),f=/&#([0-9]+);/g,k=/<br>/gi,c=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,d=/\s*<p class=([^>]+)>(.*)/i,
h=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;b.default=function(a,b,f){var e=/<sync[ >]/ig,m=/<sync[ >]|<\/body>/ig,p=[],n=a.match(c);n=n?n[1]:"";m.exec(a);var x=/\.(\S+)\s*{([^}]*)}/gi;for(var v={},w;w=x.exec(n);){var y=w[1];w=(w=w[2].match(/\s*lang:\s*(\S+);/i))?w[1]:null;null!=y&&null!=w&&(v[w]=y)}n=(n=/p\s*{([^}]*)}/gi.exec(n))?n[1]:"";v=v[f];for(l.default(!!v,"sami: could not find lang "+f+" in CSS");;){f=e.exec(a);x=m.exec(a);if(!f&&!x)break;if(!f||!x||f.index>=x.index)throw Error("parse error");
f=a.slice(f.index,x.index);x=f.match(h);if(!x)throw Error("parse error (sync time attribute)");x=+x[1];if(isNaN(x))throw Error("parse error (sync time attribute NaN)");f=f.split("\n");x/=1E3;for(y=f.length;0<=--y;)if(w=f[y].match(d)){var z=w[2];if(v===w[1])if("&nbsp;"===z)p[p.length-1].end=x;else{w=document.createElement("DIV");w.className="rxp-texttrack-region";var B=document.createElement("DIV");B.className="rxp-texttrack-div";B.style.position="absolute";B.style.bottom="0";B.style.width="100%";
B.style.color="#fff";B.style.textShadow="-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000";var A=document.createElement("div");A.className="rxp-texttrack-p";n&&(A.style.cssText=n);z=z.split(k);for(var C=0;C<z.length;C++){C&&A.appendChild(document.createElement("BR"));var D=document.createElement("SPAN");D.className="rxp-texttrack-span";D.textContent=g(z[C]);A.appendChild(D)}B.appendChild(A);w.appendChild(B);p.push({element:w,start:x+b,end:-1})}}}return p}},function(e,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var g=a(12),l=a(5),f=a(107),k=a(62),c=a(108),d=a(63),h=a(336),n=a(337);b.default=function(a,b){var e=[];if(a=(new DOMParser).parseFromString(a,"text/xml")){var m=a.getElementsByTagName("tt")[0];if(!m)throw Error("invalid XML");a=c.getBodyNode(m);var p=c.getStyleNodes(m),t=c.getRegionNodes(m),x=c.getTextNodes(m);m=f.default(m);for(var v=[],w=0;w<=p.length-1;w++){var y=p[w];if(y instanceof Element){var z=y.getAttribute("xml:id");null!==z&&v.push({id:z,style:d.getStylingFromElement(y)})}}var B=
[];p=function(a){var b=t[a];if(b instanceof Element&&(a=b.getAttribute("xml:id"),null!==a)){var c=d.getStylingFromElement(b),f=b.getAttribute("style");f&&(b=g(v,function(a){return a.id===f}))&&(c=l({},b.style,c));B.push({id:a,style:c})}};for(w=0;w<=t.length-1;w++)p(w);p=null!==a?d.getStylingAttributes(h.STYLE_ATTRIBUTES,[a],v,B):d.getStylingAttributes(h.STYLE_ATTRIBUTES,[],v,B);for(w=0;w<x.length;w++)y=x[w],y instanceof Element&&(z=k.default(y,"div"),z=l({},p,d.getStylingAttributes(h.STYLE_ATTRIBUTES,
[y].concat(z),v,B)),(y=n.default(y,b,v,B,a,z,m))&&e.push(y))}return e}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b,f){return"function"===typeof String.prototype.startsWith?a.startsWith(b,f):a.substr(f||0,b.length)===b}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.STYLE_ATTRIBUTES="backgroundColor color direction display displayAlign extent fontFamily fontSize fontStyle fontWeight lineHeight opacity origin overflow padding textAlign textDecoration textOutline unicodeBidi visibility wrapOption writingMode".split(" ")},
function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(109),l=a(339);b.default=function(a,b,c,d,e,n,m){if(!a.hasAttribute("begin")&&!a.hasAttribute("end")&&/^\s*$/.test(a.textContent||""))return null;var f=g.default(a,m),h=f.start;f=f.end;a=l.default(a,e,d,c,n,"default"===m.spaceStyle);return{start:h+b,end:f+b,element:a}}},function(e,b,a){function g(a,b){a=a.exec(b);return null===a||""===a[0]?null:(Number(a[4])||0)/1E3+(Number(a[3])||0)+60*(Number(a[2])||0)+3600*(Number(a[1])||0)}
Object.defineProperty(b,"__esModule",{value:!0});var l=a(64);b.default=function(a,b){if(l.REGXP_TIME_COLON_FRAMES.test(a)){a=l.REGXP_TIME_COLON_FRAMES.exec(a);var c=Number(a[1]),d=Number(a[2]),f=Number(a[3]),e=Number(a[4]);e+=(Number(a[5])||0)/b.subFrameRate;f+=e/b.frameRate;return f+60*d+3600*c}if(l.REGXP_TIME_COLON.test(a))return g(l.REGXP_TIME_COLON,a);if(l.REGXP_TIME_COLON_MS.test(a))return g(l.REGXP_TIME_COLON_MS,a);if(l.REGXP_TIME_FRAMES.test(a))return a=l.REGXP_TIME_FRAMES.exec(a),Number(a[1])/
b.frameRate;if(l.REGXP_TIME_TICK.test(a))return a=l.REGXP_TIME_TICK.exec(a),Number(a[1])/b.tickRate;if(l.REGXP_TIME_HMS.test(a))return g(l.REGXP_TIME_HMS,a)}},function(e,b,a){function g(a){var b=d.REGXP_8_HEX_COLOR.exec(a);if(null!=b)return"rgba("+parseInt(b[1],16)+","+parseInt(b[2],16)+","+parseInt(b[3],16)+","+parseInt(b[4],16)/255+")";b=d.REGXP_4_HEX_COLOR.exec(a);return null!=b?"rgba("+parseInt(b[1]+b[1],16)+","+parseInt(b[2]+b[2],16)+","+parseInt(b[3]+b[3],16)+","+parseInt(b[4]+b[4],16)/255+
")":a}function l(a,b){return"-1px -1px "+b+" "+a+","+("1px -1px "+b+" "+a+",")+("-1px 1px "+b+" "+a+",")+("1px 1px "+b+" "+a)}function f(a,b,c,d,f){function e(a,d,m){a=a.childNodes;for(var p=[],q=0;q<a.length;q++){var u=a[q];if("#text"===u.nodeName){var t=h.getStylingAttributes(["backgroundColor"],m,c,b).backgroundColor;t?d.backgroundColor=t:delete d.backgroundColor;var r=u,v=d;t=f;u=document.createElement("span");r=r.textContent||"";t&&(t=r.trim(),r=t=t.replace(/\s+/g," "));u.innerHTML=r;u.className=
"rxp-texttrack-span";var x;t=u;if(r=v.color)t.style.color=g(r);if(x=v.backgroundColor)t.style.backgroundColor=g(x);(x=v.wrapOption)&&"noWrap"===x&&(t.style.whiteSpace="nowrap");if(x=v.textOutline){x=x.trim().replace(/\s+/g," ").split(" ");var w=x.length;if(3===w)r=g(x[0]),x=x[1],t.style.textShadow=l(r,x);else if(r&&1===w)x=x[0],t.style.textShadow=l(r,x);else if(2===w){w=/^[#A-Z]/i.test(x[0]);var E=/^[0-9]/.test(x[0]);w!==E&&(w?(r=g(x[0]),x=x[1],t.style.textShadow=l(r,x)):r&&(x=x[0],t.style.textShadow=
l(r,x)))}}if(r=v.textDecoration)switch(r){case "noUnderline":case "noLineThrough":case "noOverline":t.style.textDecoration="none";break;case "lineThrough":t.style.textDecoration="line-through";break;default:t.style.textDecoration=r}if(r=v.fontFamily)switch(r){case "proportionalSansSerif":t.style.fontFamily="Arial, Helvetica, Liberation Sans, sans-serif";break;case "monospaceSansSerif":case "sansSerif":t.style.fontFamily="sans-serif";break;case "monospaceSerif":case "default":t.style.fontFamily="Courier New, Liberation Mono, monospace";
break;case "proportionalSerif":t.style.fontFamily="serif";break;default:t.style.fontFamily=r}if(r=v.fontStyle)t.style.fontStyle=r;if(r=v.fontWeight)t.style.fontWeight=r;if(r=v.fontSize)t.style.fontSize=r;if(r=v.direction)t.style.direction=r;if(r=v.unicodeBidi)switch(r){case "bidiOverride":t.style.unicodeBidi="bidi-override";break;case "embed":t.style.unicodeBidi="embed";break;default:t.style.unicodeBidi="normal"}if(r=v.visibility)t.style.visibility=r;"none"===v.display&&(t.style.display="none");p.push(u)}else"br"===
u.nodeName?(u=document.createElement("BR"),p.push(u)):"span"===u.nodeName&&0<u.childNodes.length&&(t=k({},d,h.getStylingAttributes(n,[u],c,b)),p.push.apply(p,e(u,t,[u].concat(m))))}return p}return e(a,k({},d),[])}Object.defineProperty(b,"__esModule",{value:!0});var k=a(5),c=a(62),d=a(64),h=a(63),n="color direction display fontFamily fontSize fontStyle fontWeight textDecoration textOutline unicodeBidi visibility wrapOption".split(" ");b.default=function(a,b,e,k,l,n){var m=c.default(a,"div"),p=document.createElement("DIV");
p.className="rxp-texttrack-region";var q=l.extent;q&&(q=d.REGXP_PERCENT_VALUES.exec(q),null!=q&&(p.style.width=q[1]+"%",p.style.height=q[2]+"%"));p.style.overflow=l.overflow||"hidden";if(q=l.padding)p.style.padding=q;if(q=l.origin)q=d.REGXP_PERCENT_VALUES.exec(q),null!=q&&(p.style.position="relative",p.style.left=q[1]+"%",p.style.top=q[2]+"%");q=l.displayAlign;p.style.display="flex";p.style.flexDirection="column";if(q)switch(q){case "before":p.style.justifyContent="flex-start";break;case "center":p.style.justifyContent=
"center";break;case "after":p.style.justifyContent="flex-end"}if(q=l.opacity)p.style.opacity=q;if(q=l.visibility)p.style.visibility=q;"none"===l.display&&(p.style.display="none");b&&(b=h.getStylingAttributes(["backgroundColor"],m.concat([b]),k,e).bodyBackgroundColor)&&(p.style.backgroundColor=g(b));b=document.createElement("p");b.className="rxp-texttrack-p";if(m=l.backgroundColor)b.style.backgroundColor=g(m);if(m=l.lineHeight)b.style.lineHeight=m;if(m=l.textAlign)switch(m){case "center":b.style.textAlign=
"center";break;case "left":case "start":b.style.textAlign="left";break;case "right":case "end":b.style.textAlign="right"}a=f(a,e,k,l,n);for(e=0;e<a.length;e++)b.appendChild(a[e]);p.appendChild(b);return p}},function(e,b,a){function g(a){var b=document.createElement("div");b.innerHTML=a;var c=function(a){var b=a.childNodes,d=document.createElement("span");d.className="rxp-texttrack-span";for(var f=0;f<b.length;f++){var e=b[f];"#text"===e.nodeName?d.innerHTML+=e.textContent:("B"===e.nodeName?(a=c(e),
a.style.fontWeight="bold"):"I"===e.nodeName?(a=c(e),a.style.fontStyle="italic"):"U"===e.nodeName?(a=c(e),a.style.textDecoration="underline"):"FONT"===e.nodeName&&null!=e.color?(a=c(e),a.style.color=e.color):a=c(e),d.appendChild(a))}return d};return c(b)}Object.defineProperty(b,"__esModule",{value:!0});var l=a(110);b.default=function(a,b){var c=a.split(/\r\n|\n|\r/);a=[];for(var d=0;d<c.length;d++)if(c[d]){var f=d;for(d++;c[d];)d++;a.push(c.slice(f,d))}c=[];for(d=0;d<a.length;d++){var e=a[d];f=b;var k=
e[1].split(" --\x3e "),p=k[0];k=k[1];e=e.slice(2,e.length);if(p&&k&&e.length)if(p=l.default(p),k=l.default(k),null==p||null==k)f=null;else{var u=document.createElement("div");u.className="rxp-texttrack-p";u.style.fontSize="28px";u.style.position="absolute";u.style.bottom="5%";u.style.width="100%";u.style.textAlign="center";u.style.color="#fff";u.style.textShadow="-1px -1px 2px #000,1px -1px 2px #000,-1px 1px 2px #000,1px 1px 2px #000";for(var q=0;q<e.length;q++){q&&u.appendChild(document.createElement("br"));
var r=g(e[q]);u.appendChild(r)}f={start:p+f,end:k+f,element:u}}else f=null;f&&c.push(f)}return c}},function(e,b,a){function g(a,b,d){var e=document.createElement("div"),h=document.createAttribute("style"),g=0;h.value="width:100%;     height:100%;     display:flex;     flex-direction:column;     justify-content:flex-end;     align-items:center;";e.setAttributeNode(h);var k=a[g];g++;if((h=c.default(a[g]))&&void 0!==h.start&&void 0!==h.end){g++;var m=document.createElement("p"),n=document.createAttribute("style");
n.value="text-align:center";m.setAttributeNode(n);var v=document.createElement("span");n=document.createAttribute("style");n.value="background-color:rgba(0,0,0,0.8);     color:white;";v.setAttributeNode(n);var w=d.filter(function(a){return a.className===k&&!a.isGlobalStyle||a.isGlobalStyle}).map(function(a){return a.styleContent});w&&(n.value+=w.join(),v.setAttributeNode(n));for(;a[g];)0!==v.childNodes.length&&v.appendChild(document.createElement("br")),f.default(a[g],d).forEach(function(a){v.appendChild(a)}),
g++;e.appendChild(m);m.appendChild(v);return{start:h.start+b,end:h.end+b,element:e}}l.default.warn("VTT: Invalid cue, the timecode line could not be parsed.")}Object.defineProperty(b,"__esModule",{value:!0});var l=a(1),f=a(342),k=a(343),c=a(344),d=a(346);b.default=function(a,b){a=a.split(/\r\n|\n|\r/g);var c=[],f=[];if(!a[0].match(/^WEBVTT( |\t|\n|\r|$)/))throw Error("Can't parse WebVTT: Invalid File.");for(var e=d.getFirstLineAfterHeader(a),h=e;h<a.length;h++)if(d.isStartOfStyleBlock(a[h])){var l=
h;for(h++;a[h];)h++;l=a.slice(l,h);l=k.default(l);f.push.apply(f,l)}for(h=e;h<a.length;h++)if(0!==a[h].length)if(d.isStartOfCueBlock(a[h])){e=h;for(h++;a[h];)h++;e=a.slice(e,h);(e=g(e,b,f))&&c.push(e)}else for(;a[h];)h++;return c}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(14);b.default=function(a,b){var f=["u","i","b"],c=["u","i","b","c","#text"],d=b.map(function(a){return a.className});a=a.replace(/<[0-9]{2}:[0-9]{2}.[0-9]{3}>/,"").replace(/<([u,i,b,c])(\..*?)?(?: .*?)?>(.*?)<\/\1>/g,
"<$1$2>$3</$1$2>");return function(a){function e(a){var h=a.nodeName.toLowerCase().split(".")[0];if(g.default(c,h))if("#text"===h)h=document.createTextNode(a.wholeText);else{var k=[];a.nodeName.toLowerCase().split(".").forEach(function(a){-1!==d.indexOf(a)&&k.push(d.indexOf(a))});if(0!==k.length){var l=document.createAttribute("style");k.forEach(function(a){l.value+=b[a].styleContent});h=g.default(f,h)?h:"span";h=document.createElement(h);h.setAttributeNode(l)}else h=g.default(f,h)?h:"span",h=document.createElement(h);
for(var m=0;m<a.childNodes.length;m++)h.appendChild(e(a.childNodes[m]))}else for(h=document.createElement("span"),m=0;m<a.childNodes.length;m++)h.appendChild(e(a.childNodes[m]));return h}for(var h=[],k=0;k<a.length;k++)h[k]=e(a[k]);return h}((new DOMParser).parseFromString(a,"text/html").body.childNodes)}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var b=[],f=1,e=[];if(a[f].match(/::cue {/))e.push({isGlobalStyle:!0}),f++;else for(var c=void 0;c=a[f].match(/::cue\(\.?(.*?)\)(?:,| {)/);)e.push({className:c[1],
isGlobalStyle:!1}),f++;for(var d="";!a[f].match(/}/)&&0!==a[f].length;)d+=a[f],f++;e.forEach(function(a){b.push({className:a.className,isGlobalStyle:a.isGlobalStyle,styleContent:d.replace(/\s/g,"")})});return b}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(345);b.default=function(a){var b=a.match("((?:[0-9]{2}:)?[0-9]{2}:[0-9]{2}.[0-9]{2,3})(?: |\t)--\x3e(?: |\t)((?:[0-9]{2}:)?[0-9]{2}:[0-9]{2}.[0-9]{2,3})");if(b&&3<=b.length)return a=g.default(b[1]),b=g.default(b[2]),
{start:a,end:b}}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a){var b=a.split(":").reverse();if(b[2]||b[1]){a=b[2]?parseInt(b[2],10):0;var f=parseInt(b[1],10);b=parseFloat(b[0].replace(",","."));return isNaN(a)||isNaN(f)||isNaN(b)?void 0:3600*a+60*f+b}}},function(e,b,a){function g(a){return/^STYLE( .*)?$/g.test(a)}function l(a){return/^NOTE( .*)?$/g.test(a)}function f(a){return/^REGION( .*)?$/g.test(a)}Object.defineProperty(b,"__esModule",{value:!0});b.getFirstLineAfterHeader=
function(a){for(var b=0;b<a.length;){if(""===a[b])return b+1;b++}return b};b.isStartOfStyleBlock=g;b.isStartOfNoteBlock=l;b.isStartOfRegionBlock=f;b.isStartOfCueBlock=function(a){return!l(a)&&!g(a)&&!f(a)&&0!==a.length}},function(e,b,a){var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=
null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var l=a(7),f=a(1);e=a(61);var k=a(348);a=function(a){function b(b,c){f.default.debug("creating native text track source buffer");var d=a.call(this)||this;var e=l.addTextTrack(b,c);c=e.track;e=e.trackElement;d._videoElement=b;d._track=c;d._trackElement=e;return d}g(b,a);b.prototype._append=function(a){f.default.debug("appending new native text tracks",a);var b=a.timescale,c=a.start,d=a.end,
e=a.data,h=a.type,g=a.language;a=a.timeOffset;if(null!=d&&0>=d-c)f.default.warn("Invalid subtitles appended");else if(c/=b,b=null!=d?d/b:void 0,e=k.default(h,e,a,g),0<e.length){h=e[0];g=this._track.cues;0<g.length&&h.startTime<g[g.length-1].startTime&&this._remove(h.startTime,Infinity);for(h=0;h<e.length;h++)this._track.addCue(e[h]);this.buffered.insert(c,null!=b?b:e[e.length-1].endTime)}else null!=b&&this.buffered.insert(c,b)};b.prototype._remove=function(a,b){f.default.debug("removing native text track data",
a,b);for(var c=this._track,d=c.cues,e=d.length-1;0<=e;e--){var h=d[e],g=h.startTime,k=h.endTime;g>=a&&g<=b&&k<=b&&c.removeCue(h)}this.buffered.remove(a,b)};b.prototype._abort=function(){f.default.debug("aborting native text track source buffer");var a=this._trackElement,b=this._videoElement;if(a&&b&&b.hasChildNodes())try{b.removeChild(a)}catch(m){f.default.warn("Can't remove track element from the video")}this._track&&(this._track.mode="disabled");this._trackElement&&(this._trackElement.innerHTML=
"")};return b}(e.default);b.default=a},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(1),l={};l.vtt=a(349).default;l.ttml=a(350).default;l.sami=a(351).default;l.srt=a(352).default;b.default=function(a,b,c,d){g.default.debug("finding parser for native text tracks:",a);a=l[a];if(!a)throw Error("no parser found for the given text track");g.default.debug("parser found, parsing...");b=a(b,c,d);g.default.debug("parsed successfully!",b);return b}},function(e,b,a){function g(a){var b=
a.split(":");if(3===b.length){var c=parseInt(b[0],10);a=parseInt(b[1],10);b=parseFloat(b[2]);return isNaN(c)||isNaN(a)||isNaN(b)?void 0:3600*c+60*a+b}if(2===b.length)return a=parseInt(b[0],10),b=parseFloat(b[1]),isNaN(a)||isNaN(b)?void 0:60*a+b}function l(a){return a.split(/ |\t/).reduce(function(a,b){b=b.split(":");2===b.length&&(a[b[0]]=b[1]);return a},{})}Object.defineProperty(b,"__esModule",{value:!0});var f=a(14),k=a(7);b.default=function(a,b){var c=a.split(/\r\n|\n|\r/);if(!/^WEBVTT($| |\t)/.test(c[0]))throw Error("Can't parse WebVTT: Invalid file.");
a=[];for(var d=1;d<c.length;d++){var e=c[d];e=!e||/^(NOTE)|(REGION)|(STYLE)($| |\t)/.test(e)?!1:!0;if(e){e=d;for(d++;c[d];)d++;a.push(c.slice(e,d))}else if(c[d])for(;c[d];)d++}c=[];for(d=0;d<a.length;d++){a:{var p=a[d];e=b;var u=/--\x3e/;if(u.test(p[0]))u=p[0],p=p.slice(1,p.length);else{if(!u.test(p[1])){e=null;break a}u=p[1];p=p.slice(2,p.length)}var q;if(q=u.match(/^([\d:.]+)[ |\t]+--\x3e[ |\t]+([\d:.]+)[ |\t]*(.*)$/)){u=g(q[1]);var r=g(q[2]);null==u||null==r?q=null:(q=l(q[3]),q={start:u,end:r,
settings:q})}else q=null;if(q){if(u=q.start,r=q.end,q=q.settings,p=p.join("\n"),(e=k.makeCue(u+e,r+e,p))&&e instanceof VTTCue){p=q;u=e;!p.vertical||"rl"!==p.vertical&&"lr"!==p.vertical||(u.vertical=p.vertical);if(p.line)if(r=p.line.match(/^(\d+(\.\d+)?)%(,([a-z]+))?/))u.line=r[1],u.snapToLines=!1,f.default(["start","center","end"],r[4])&&(u.lineAlign=r[4]);else if(r=p.line.match(/^(-?\d+)(,([a-z]+))?/))u.line=r[1],u.snapToLines=!0,f.default(["start","center","end"],r[3])&&(u.lineAlign=r[3]);p.position&&
(r=/^([\d\.]+)%(?:,(line-left|line-right|center))?$/.exec(p.position))&&2<=r.length&&(q=parseInt(r[1],10),isNaN(q)||(u.position=q,null!=r[2]&&(u.positionAlign=r[2])));p.size&&(u.size=p.size);p.align&&f.default(["start","center","end","left"],p.align)&&(u.align=p.align)}}else e=null}e&&c.push(e)}return c}},function(e,b,a){function g(a,b,d,e,f,h){if(!a.hasAttribute("begin")&&!a.hasAttribute("end")&&/^\s*$/.test(a.textContent||""))return null;e=n.default(a,h);d=e.start;e=e.end;a=l(a,"default"===h.spaceStyle);
b=c.makeCue(d+b,e+b,a);if(!b)return null;if(b instanceof VTTCue){if(a=f.extent)a=p.REGXP_PERCENT_VALUES.exec(a),null!=a&&(b.size=Number(a[1]));switch(f.writingMode){case "tb":case "tblr":b.vertical="lr";break;case "tbrl":b.vertical="rl"}(a=f.origin)&&p.REGXP_PERCENT_VALUES.exec(a);if(f=f.align)b.align=f,"center"===f&&("center"!==b.align&&(b.align="middle"),b.position="auto"),b.positionAlign=t[f]||"",b.lineAlign=r[f]||""}return b}function l(a,b){function c(a){a=a.childNodes;for(var d="",e=0;e<a.length;e++){var f=
a[e];"#text"===f.nodeName?(f=f.textContent||"",b&&(f=f.trim(),f=f.replace(/\s+/g," ")),d+=f):"br"===f.nodeName?d+="\n":"span"===f.nodeName&&0<f.childNodes.length&&(d+=c(f))}return d}return c(a)}Object.defineProperty(b,"__esModule",{value:!0});var f=a(12),k=a(5),c=a(7),d=a(107),h=a(62),n=a(109),m=a(108),p=a(64),u=a(63),q=["extent","writingMode","origin","align"],r={left:"start",center:"center",right:"end",start:"start",end:"end"},t={left:"line-left",center:"center",right:"line-right"};b.default=function(a,
b){var c=[];if(a=(new DOMParser).parseFromString(a,"text/xml")){var e=a.getElementsByTagName("tt")[0];if(!e)throw Error("invalid XML");var l=m.getBodyNode(e),p=m.getStyleNodes(e),t=m.getRegionNodes(e);a=m.getTextNodes(e);e=d.default(e);for(var r=[],n=0;n<=p.length-1;n++){var v=p[n];if(v instanceof Element){var x=v.getAttribute("xml:id");null!=x&&r.push({id:x,style:u.getStylingFromElement(v)})}}var E=[];p=function(a){var b=t[a];if(b instanceof Element&&(a=b.getAttribute("xml:id"),null!=a)){var c=u.getStylingFromElement(b),
d=b.getAttribute("style");d&&(b=f(r,function(a){return a.id===d}))&&(c=k({},b.style,c));E.push({id:a,style:c})}};for(n=0;n<=t.length-1;n++)p(n);l=l?u.getStylingAttributes(q,[l],r,E):u.getStylingAttributes(q,[],r,E);for(n=0;n<a.length;n++)p=a[n],p instanceof Element&&(v=h.default(p,"div"),v=k({},l,u.getStylingAttributes(q,[p].concat(v),r,E)),(p=g(p,b,r,E,v,e))&&c.push(p))}return c}},function(e,b,a){function g(a){return a.replace(c,"\n").replace(k,function(a,b){return String.fromCharCode(b)})}Object.defineProperty(b,
"__esModule",{value:!0});var l=a(7),f=a(4),k=/&#([0-9]+);/g,c=/<br>/gi,d=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,h=/\s*<p class=([^>]+)>(.*)/i,n=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;b.default=function(a,b,c){var e=/<sync[ >]/ig,k=/<sync[ >]|<\/body>/ig,m=[],p=a.match(d);p=p?p[1]:"";k.exec(a);var u=/\.(\S+)\s*{([^}]*)}/gi;for(var w={},y;y=u.exec(p);){var z=y[1];y=(y=y[2].match(/\s*lang:\s*(\S+);/i))?y[1]:null;null!=z&&null!=y&&(w[y]=z)}p=w[c];for(f.default(!!p,"sami: could not find lang "+c+" in CSS");;){c=
e.exec(a);u=k.exec(a);if(!c&&!u)break;if(!c||!u||c.index>=u.index)throw Error("parse error");c=a.slice(c.index,u.index);u=c.match(n);if(!u)throw Error("parse error (sync time attribute)");u=+u[1];if(isNaN(u))throw Error("parse error (sync time attribute NaN)");c=c.split("\n");w=u/1E3;for(z=c.length;0<=--z;)if(u=c[z].match(h))y=u[2],p===u[1]&&("&nbsp;"===y?m[m.length-1].end=w:m.push({text:g(y),start:w+b}))}a=[];for(b=0;b<m.length;b++)p=m[b],e=p.start,k=p.end,(p=p.text)&&null!=k&&(e=l.makeCue(e,k,p),
null!=e&&a.push(e));return a}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(7),l=a(110);b.default=function(a,b){var c=a.split(/\r\n|\n|\r/);a=[];for(var d=0;d<c.length;d++)if(c[d]){var e=d;for(d++;c[d];)d++;a.push(c.slice(e,d))}c=[];for(d=0;d<a.length;d++){var f=a[d];e=b;var k=f[1].split(" --\x3e "),p=k[0];k=k[1];f=f.slice(2,f.length);p&&k&&f.length?(p=l.default(p),k=l.default(k),null==p||null==k?e=null:(f=f.join("\n"),e=g.makeCue(p+e,k+e,f))):e=null;e&&c.push(e)}return c}},
function(e,b,a){function g(a,b,c){return{cache:p.default(["audio","video"],a)?new u.default:void 0,maxRetry:"image"===a?0:null!=b?b:n.default.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR,maxRetryOffline:null!=c?c:n.default.DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE}}function l(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=a.map(function(a){return a.filter(function(a){return"complete-buffer"===a.type||"active-buffer"===a.type}).map(function(a){return"complete-buffer"===a.type}).startWith(!1).distinctUntilChanged()});
return c.Observable.combineLatest.apply(c.Observable,a).filter(function(a){return a.every(function(a){return a})}).mapTo(void 0)}function f(a){a=a.representations;return a[0]&&a[0].getMimeTypeString()||""}function k(a,b){Object.keys(b.adaptations).map(function(c){if(x.default.isNative(c)){var d=b.adaptations[c]||[];d=d?d[0].representations:[];d.length&&(d=d[0].getMimeTypeString(),a.createSourceBuffer(c,d))}})}Object.defineProperty(b,"__esModule",{value:!0});var c=a(0),d=a(38),h=a(6),n=a(3),m=a(8),
p=a(14),u=a(354),q=a(1),r=a(65),t=a(101),x=a(60),v=a(355),w=a(41);b.default=function(a,b,e,p,n,u,H,F,E,G){function y(a,d){var e=new r.default(function(a,b){return a.start-b.start}),f=new h.Subject,g=b.filter(function(a){var b=a.currentTime;a=a.timeOffset;if(!z.getPeriodForTime(a+b))return!1;b=a+b;a=e.head();var c=e.last();b=null==a||null==c?!0:a.start>b||(c.end||Infinity)<b;return b}).take(1).do(function(b){q.default.info("Current position out of the bounds of the active periods,re-creating buffers.",
a,b.currentTime+b.timeOffset);f.next()}).mergeMap(function(b){b=z.getPeriodForTime(b.currentTime+b.timeOffset);if(null==b)throw new m.MediaError("MEDIA_TIME_NOT_FOUND",null,!0);return y(a,b)});d=A(a,d,f).do(function(a){"periodBufferReady"===a.type?e.add(a.value.period):"periodBufferCleared"===a.type&&e.removeFirst(a.value.period)}).share();return c.Observable.merge(d,g)}function A(a,e,f){q.default.info("creating new Buffer for",a,e);var g=new d.ReplaySubject(1),k=new h.Subject,l=new h.Subject,m=b.filter(function(a){var b=
a.currentTime;a=a.timeOffset;return!!e.end&&b+a>=e.end}),p=k.exhaustMap(function(b){return A(a,b,l)});f=f.take(1).do(function(){k.complete();l.next();l.complete()}).share();m=c.Observable.merge(m,f);var t=C(a,e,g).mergeMap(function(b){var d=b.type;if("full-buffer"===d){d=z.getPeriodAfter(e);if(null==d)return c.Observable.of(w.default.bufferComplete(a));k.next(d)}else"active-buffer"===d&&l.next();return c.Observable.of(b)}).share();g=c.Observable.of(w.default.periodBufferReady(a,e,g)).concat(t).takeUntil(m).concat(c.Observable.of(w.default.periodBufferCleared(a,
e)).do(function(){q.default.info("destroying buffer for",a,e)}));return c.Observable.merge(g,p,f.ignoreElements())}function C(a,d,h){return h.switchMap(function(h){if(null==h)return q.default.info("set no "+a+" Adaptation",d),n.has(a)&&(q.default.info("clearing previous "+a+" SourceBuffer"),n.get(a).removeBuffer({start:d.start,end:d.end||Infinity})),c.Observable.of(w.default.adaptationChange(a,null,d)).concat(t.createFakeBuffer(b,e,{manifest:z,period:d}));q.default.info("updating "+a+" adaptation",
h,d);if(n.has(a)){q.default.info("reusing a previous SourceBuffer for the type",a);var k=n.get(a)}else{var l=f(h);k=n.createSourceBuffer(a,l,"text"===a?E.textTrackOptions:void 0)}l=F.get(k);var m=H.get(k),r=g(a,E.maxRetry,E.maxRetryOffline);r=u.createPipeline(a,r);k=p.createBuffer(b,k,m,r,e,{manifest:z,period:d,adaptation:h}).catch(function(c){if(!x.default.isNative(a))return q.default.error("custom buffer: ",a,"has crashed. Aborting it.",c),n.disposeSourceBuffer(a),G.next(c),t.createFakeBuffer(b,
e,{manifest:z,period:d});q.default.error("native buffer: ",a,"has crashed. Stopping playback.",c);throw c;});return c.Observable.of(w.default.adaptationChange(a,h,d)).concat(c.Observable.merge(k,l))})}var z=a.manifest,B=a.period;k(n,B);var D=new h.Subject,J=new h.Subject;a=x.BUFFER_TYPES.map(function(a){return y(a,B).do(function(a){"periodBufferReady"===a.type?D.next(a.value):"periodBufferCleared"===a.type&&J.next(a.value)}).share()});var O=v.default(D,J).filter(function(a){return!!a}).do(function(a){q.default.info("new active period",
a)}).map(function(a){return w.default.activePeriodChanged(a)}),Q=l.apply(void 0,a).mapTo(w.default.endOfStream());return c.Observable.merge.apply(c.Observable,[O].concat(a,[Q]))}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=function(){function a(){this._cache=new WeakMap}a.prototype.add=function(a,b){var e=a.representation;a.segment.isInit&&this._cache.set(e,b)};a.prototype.get=function(a){var b=a.representation;return a.segment.isInit&&(a=this._cache.get(b),null!=a)?a:null};
return a}();b.default=e},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(0),l=a(1),f=a(65),k=a(60);b.default=function(a,b){var c=new f.default(function(a,b){return a.period.start-b.period.start});a=a.do(function(a){var b=a.period;a=a.type;var d=c.find(function(a){return a.period===b});d||(d={period:b,buffers:new Set},c.add(d));d.buffers.has(a)&&l.default.warn("Buffer type "+a+" already added to the period");d.buffers.add(a)});b=b.do(function(a){var b=a.period;a=a.type;if(c&&
0!==c.length()){var d=c.find(function(a){return a.period===b});d?(d.buffers.delete(a),d.buffers.size||c.removeFirst(d)):l.default.error("ActivePeriodStore: cannot remove, unknown period.")}else l.default.error("ActivePeriodStore: cannot remove, no period is active.")});return g.Observable.merge(a,b).map(function(){if(!c.head())return null;var a=c.find(function(a){return a.buffers.size>=k.BUFFER_TYPES.length});return null!=a?a.period:null}).distinctUntilChanged()}},function(e,b,a){Object.defineProperty(b,
"__esModule",{value:!0});var g=a(5),l=a(0),f=a(54);b.default=function(a,b,d,e){var c=e;d=d.take(1).do(function(){c=0}).ignoreElements();b=b.map(function(b){return g({liveGap:a.isLive?f.getMaximumBufferPosition(a)-b.currentTime:Infinity,timeOffset:c},b)});return l.Observable.merge(b,d)}},function(e,b,a){function g(a,b,e){if(b&&"closed"!==b.readyState){for(var d=b.readyState,h=b.sourceBuffers,g=h.length-1;0<=g;g--){var k=h[g];try{"open"===d&&(c.default.info("removing SourceBuffer from mediaSource",
k),k.abort()),b.removeSourceBuffer(k)}catch(r){c.default.warn("error while disposing SourceBuffer",r)}}h.length&&c.default.warn("not all SourceBuffers could have been removed.")}f.clearElementSrc(a);if(e)try{c.default.debug("revoking previous URL"),URL.revokeObjectURL(e)}catch(r){c.default.warn("error while revoking the media source URL",r)}}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(7),k=a(31),c=a(1);b.setDurationToMediaSource=function(a,b){b=Infinity===b?Number.MAX_VALUE:b;
a.duration!==b&&(c.default.info("set duration",a.duration),a.duration=b)};b.resetMediaSource=g;b.default=function(a){return l.Observable.create(function(b){if(!f.MediaSource_)throw new k.default("MEDIA_SOURCE_NOT_SUPPORTED",null,!0);g(a,null,a.src||null);c.default.info("creating MediaSource");var d=new f.MediaSource_,e=URL.createObjectURL(d);c.default.info("attaching MediaSource URL to video element",e);a.src=e;b.next(d);return function(){g(a,d,e)}})}},function(e,b,a){Object.defineProperty(b,"__esModule",
{value:!0});var g=a(97);b.default=function(a){return g.retryFuncWithBackoff(function(){a.endOfStream()},{totalRetry:10,retryDelay:100,shouldRetry:function(){return"ended"!==a.readyState}}).ignoreElements()}},function(e,b,a){function g(a,b,e,g){if(!isFinite(e)&&!isFinite(g))return l.Observable.empty();var c=[],d=k.getInnerAndOuterTimeRanges(a.getBuffered(),b),h=d.innerRange,q=d.outerRanges;(function(){if(isFinite(e)){for(var a=0;a<q.length;a++){var d=q[a];b-e>=d.end?c.push(d):b>=d.end&&b-e>d.start&&
b-e<d.end&&c.push({start:d.start,end:b-e})}h&&b-e>h.start&&c.push({start:h.start,end:b-e})}})();(function(){if(isFinite(g)){for(var a=0;a<q.length;a++){var d=q[a];b+g<=d.start?c.push(d):b<=d.start&&b+g<d.end&&b+g>d.start&&c.push({start:b+g,end:d.end})}h&&b+g<h.end&&c.push({start:b+g,end:h.end})}})();return l.Observable.from(c.map(function(b){f.default.debug("cleaning range from source buffer",b);return a.removeBuffer(b)})).concatAll().ignoreElements()}Object.defineProperty(b,"__esModule",{value:!0});
var l=a(0),f=a(1),k=a(17);b.default=function(a){var b=a.queuedSourceBuffer;return l.Observable.combineLatest(a.clock$,a.maxBufferBehind$,a.maxBufferAhead$).mergeMap(function(a){return g(b,a[0],a[1],a[2])})}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});e=a(3);var g=a(54),l=e.default.DEFAULT_LIVE_GAP;b.default=function(a,b){if(b){var c=g.getBufferLimits(a),d=c[0];c=c[1];if(null!=b.position)return Math.max(Math.min(b.position,c),d);if(null!=b.wallClockTime)return Math.max(Math.min(a.isLive?
b.wallClockTime-(a.availabilityStartTime||0):b.wallClockTime,c),d);if(null!=b.fromFirstPosition)return a=b.fromFirstPosition,0>=a?d:Math.min(d+a,c);if(null!=b.fromLastPosition)return a=b.fromLastPosition,0<=a?c:Math.max(d,c+a);if(null!=b.percentage)return a=b.percentage,100<a?c:0>a?d:d+ +a/100*(c-d)}return a.isLive?(d=a.suggestedPresentationDelay,g.getMaximumBufferPosition(a)-(null==d?l:d)):g.getMinimumBufferPosition(a)}},function(e,b,a){function g(a,b){var c=b.getUrl();return c?a(c).do(function(a){b.update(a)}).share().mapTo(k.default.manifestUpdate(b)):
(f.default.warn("Cannot refresh the manifest: no url"),l.Observable.empty())}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(1),k=a(41);b.default=function(a,b,e){return function(c){switch(c.type){case "discontinuity-encountered":f.default.warn("explicit discontinuity seek",c.value.nextTime);a.currentTime=c.value.nextTime;break;case "needs-manifest-refresh":return f.default.debug("needs manifest to be refreshed"),g(e,b)}return l.Observable.of(c)}}},function(e,b,a){Object.defineProperty(b,
"__esModule",{value:!0});e=a(3);var g=a(1),l=a(17),f=a(363),k=e.default.MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT,c=e.default.MAX_BUFFERED_DISTANCE,d=e.default.MINIMUM_SEGMENT_SIZE;a=function(){function a(){this.inventory=[]}a.prototype.synchronizeBuffered=function(a){var b=this.inventory;a=l.convertToRanges(a);for(var e=0,g=b[0],h=a.length,k=0;k<h;k++){if(null==g)return;var t=a[k],n=t.start;t=t.end;if(!(t-n<d)){for(var v=e;g&&f.default(g.bufferedEnd,g.end)-n<d;)g=b[++e];var w=-1,y=e-v;0<y&&(e=b[v+y-
1],w=f.default(e.bufferedEnd,e.end),b.splice(v,y),e=v);if(null==g)return;if(t-f.default(g.bufferedStart,g.start)>=d)for(null!=g.bufferedStart&&g.bufferedStart<n?g.bufferedStart=n:null==g.bufferedStart&&(g.bufferedStart=-1!==w&&w>n&&g.start-w<=c?w:g.start-n<=c?n:g.start),g=b[++e];g&&t-f.default(g.bufferedStart,g.start)>=d;)n=b[e-1],null==n.bufferedEnd&&(n.bufferedEnd=n.end),g.bufferedStart=n.bufferedEnd,g=b[++e];if(n=b[e-1])null!=n.bufferedEnd&&n.bufferedEnd>t?n.bufferedEnd=t:null==n.bufferedEnd&&
(n.bufferedEnd=t-n.end<=c?t:n.end)}}g&&b.splice(e,b.length-e)};a.prototype.insert=function(a,b,c,d,e,f){if(null==f)g.default.warn("SegmentBookkeeper: ending time of the segment not defined");else{var h=this.inventory;a={start:e,end:f,bufferedStart:void 0,bufferedEnd:void 0,infos:{segment:d,period:a,adaptation:b,representation:c}};for(b=h.length-1;0<=b;b--)if(c=h[b],c.start<=e){c.end<=e?this.inventory.splice(b+1,0,a):c.start>=e?this.inventory.splice(b,1,a):(null!=c.end&&(c.end=e),this.inventory.splice(b+
1,0,a));return}(h=this.inventory[0])?null==f?h.start===e?this.inventory.splice(0,1,a):this.inventory.splice(0,0,a):h.start>=f?this.inventory.splice(0,0,a):h.end<=f?this.inventory.splice(0,1,a):(h.start=f,this.inventory.splice(0,0,a)):this.inventory.push(a)}};a.prototype.hasPlayableSegment=function(a,b){function c(a,b,c,d){if(!c||null==c.bufferedEnd||null==b.bufferedStart||c.bufferedEnd<b.bufferedStart){if(null==b.bufferedStart)return!1;var e=b.bufferedStart-b.start;if(a.start>b.start){if(c=b.bufferedStart-
a.start,0<c&&e>k)return g.default.debug("The wanted segment has been garbage collected",b),!1}else if(e>k)return g.default.debug("The wanted segment has been garbage collected",b),!1}if(null===b.end)return!1;if(!d||null==d.bufferedStart||null==b.bufferedEnd||d.bufferedStart>b.bufferedEnd){if(null==b.bufferedEnd)return!1;e=b.end-b.bufferedEnd;if(a.end<b.end){if(c=a.end-b.bufferedEnd,0<c&&e>k)return g.default.debug("The wanted segment has been garbage collected",b),!1}else if(e>k)return g.default.debug("The wanted segment has been garbage collected",
b),!1}return!0}var d=b.time,e=b.duration;b=b.timescale;for(var f=this.inventory,h=f.length-1;0<=h;h--){var l=f[h],m=f[h-1],n=f[h+1],y=l.infos.segment,z=d,B=e;y.timescale!==b&&(z=d*y.timescale/b,B=e*y.timescale/b);if(y.time===z&&y.duration===B&&(y=m&&null==m.bufferedEnd||null==l.bufferedStart?!1:n&&null==n.bufferedStart||null==l.bufferedEnd?!1:!0,y&&c(a,l,m,n)))return l}return null};a.prototype.reset=function(){this.inventory=[]};return a}();b.default=a},function(e,b,a){Object.defineProperty(b,"__esModule",
{value:!0});b.default=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];b=0;for(var e=a.length;b<e;){if(null!=a[b])return a[b];b++}}},function(e,b,a){function g(a,b){if(!b)return 0;if(null!=b.position)return b.position;if(null!=b.wallClockTime)return b.wallClockTime;if(null!=b.fromFirstPosition)return b.fromFirstPosition;a=a.duration;return a&&isFinite(a)?b.fromLastPosition?Math.max(0,a+b.fromLastPosition):null!=b.percentage?(b=b.percentage,100<=b?a:0>=b?0:+b/100*a):0:(c.default.warn("startAt.fromLastPosition set but no known duration, beginning at 0."),
0)}Object.defineProperty(b,"__esModule",{value:!0});var l=a(0),f=a(6),k=a(7),c=a(1),d=a(57),h=a(111),n=a(112),m=a(113),p=a(41),u=a(114);b.default=function(a){var b=a.autoPlay,e=a.clock$,q=a.keySystems,v=a.mediaElement,w=a.speed$,y=a.startAt,z=a.url,B=new f.Subject;a=B.map(p.default.warning);k.clearElementSrc(v);c.default.debug("calculating initial time");var A=function(){return g(v,y)};c.default.debug("initial time calculated:",A);A=u.default(v,A,b);b=A.initialSeek$;A=A.loadAndPlay$;q=d.default(v,
q,B);B=h.default(v);w=n.default(v,w,e,{pauseWhenStalled:!0}).map(p.default.speedChanged);e=m.default(v,e).map(p.default.stalled);A=A.mapTo(p.default.loaded());z=k.setElementSrc$(v,z).ignoreElements();b=b.ignoreElements();z=l.Observable.merge(A,b,q,B,w,e,z);return l.Observable.merge(z,a)}},function(e,b,a){function g(a){if(!a)return 0;switch(a.reason){case "seeking":return m;case "not-ready":return p;default:return u}}function l(a,b){var c=a.currentTime,e=a.paused,f=a.playbackRate,g=a.readyState,h=
a.buffered,k=a.ended;return{currentTime:c,buffered:h,duration:a.duration,bufferGap:d.getLeftSizeOfRange(h,c),state:b,playbackRate:f,currentRange:d.getRange(h,c),readyState:g,paused:e,ended:k}}Object.defineProperty(b,"__esModule",{value:!0});var f=a(5),k=a(0),c=a(38);e=a(3);var d=a(17),h=e.default.SAMPLING_INTERVAL_MEDIASOURCE,n=e.default.SAMPLING_INTERVAL_NO_MEDIASOURCE,m=e.default.RESUME_GAP_AFTER_SEEKING,p=e.default.RESUME_GAP_AFTER_NOT_ENOUGH_DATA,u=e.default.RESUME_GAP_AFTER_BUFFERING,q=e.default.STALL_GAP,
r="canplay play progress seeking seeked loadedmetadata canplay ratechange".split(" ");b.default=function(a,b){var d=b.withMediaSource;return k.Observable.create(function(b){function c(c){c=l(a,c&&c.type||"timeupdate");var h;var k=c.state,m=c.currentTime,p=c.bufferGap,t=c.paused,n=c.readyState,r=c.ended,u=e.stalled,v=e.state,x=e.currentTime;var w=c.currentRange;w=null!=w&&c.duration-(p+w.end)<=q;var y=1<=n&&"loadedmetadata"!==k&&!u&&!(w||r),z;d?y&&(p<=q||Infinity===p||1===n)?h=!0:u&&1<n&&Infinity>
p&&(p>g(u)||w||r)&&(z=!0):y&&(!t&&"timeupdate"===k&&"timeupdate"===v&&m===x||"seeking"===k&&Infinity===p)?h=!0:u&&("seeking"!==k&&m!==x||"canplay"===k||Infinity>p&&(p>g(u)||w||r))&&(z=!0);h=h?{reason:"seeking"===k?k:1===n?"not-ready":"buffering",timestamp:Date.now()}:z?null:u;e=f(c,{stalled:h});b.next(e)}var e=f(l(a,"init"),{stalled:null}),k=setInterval(c,d?h:n);r.forEach(function(b){return a.addEventListener(b,c)});b.next(e);return function(){clearInterval(k);r.forEach(function(b){return a.removeEventListener(b,
c)})}}).multicast(function(){return new c.ReplaySubject(1)}).refCount()}},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(3),l=a(115);b.default=function(a,b,c){if(a.ended)return l.PLAYER_STATES.ENDED;if(c){b=g.default.FORCED_ENDED_THRESHOLD;a=Math.abs(a.duration-a.currentTime);if(null!=b&&a<b)return l.PLAYER_STATES.ENDED;switch(c.reason){case "seeking":return l.PLAYER_STATES.SEEKING;default:return l.PLAYER_STATES.BUFFERING}}return b?l.PLAYER_STATES.PLAYING:l.PLAYER_STATES.PAUSED}},
function(e,b,a){function g(a,b,c){if(!b.length)return null===a;for(var e=function(e){var f=c[e];if(null===f)return{value:null===a};e=d(b,function(a){return a.normalizedLanguage===f.normalized&&!!a.isAudioDescription===f.audioDescription});if(void 0!==e)return null===a?{value:!1}:{value:(e.normalizedLanguage||"")===(a.normalizedLanguage||"")&&!!e.isAudioDescription===!!a.isAudioDescription}},f=0;f<c.length;f++){var g=e(f);if("object"===typeof g)return g.value}return!0}function l(a,b){if(!a.length)return null;
for(var c=function(c){var e=b[c];if(null===e)return{value:null};c=d(a,function(a){return(a.normalizedLanguage||"")===e.normalized&&!!a.isAudioDescription===e.audioDescription});if(void 0!==c)return{value:c}},e=0;e<b.length;e++){var f=c(e);if("object"===typeof f)return f.value}return a[0]}function f(a,b,c){if(!b.length)return null===a;for(var e=function(e){var f=c[e];if(null===f)return{value:null===a};e=d(b,function(a){return(a.normalizedLanguage||"")===f.normalized&&!!a.isClosedCaption===f.closedCaption});
if(void 0!==e)return null===a?{value:!1}:{value:(e.normalizedLanguage||"")===(a.normalizedLanguage||"")&&!!e.isClosedCaption===!!a.isClosedCaption}},f=0;f<c.length;f++){var g=e(f);if("object"===typeof g)return g.value}return null===a}function k(a,b){if(!a.length)return null;for(var c=function(c){var e=b[c];if(null===e)return{value:null};c=d(a,function(a){return(a.normalizedLanguage||"")===e.normalized&&!!a.isClosedCaption===e.closedCaption});if(void 0!==c)return{value:c}},e=0;e<b.length;e++){var f=
c(e);if("object"===typeof f)return f.value}return null}function c(a,b){for(var c=0;c<a.length();c++){var d=a.get(c);if(d.period.id===b.id)return d}}Object.defineProperty(b,"__esModule",{value:!0});var d=a(12),h=a(1),n=a(65);e=function(){function a(a){void 0===a&&(a={});var b=a.preferredAudioTracks;a=a.preferredTextTracks;this._periods=new n.default(function(a,b){return a.period.start-b.period.start});this._audioChoiceMemory=new WeakMap;this._textChoiceMemory=new WeakMap;this._preferredAudioTracks=
b||[];this._preferredTextTracks=a||[]}a.prototype.addPeriod=function(a,b,d){var e=c(this._periods,b);if(null!=e){if(null!=e[a]){h.default.warn("LanguageManager: "+a+" already added for period",b);return}e[a]={adaptations:b.adaptations[a]||[],adaptation$:d}}else this._periods.add((f={period:b},f[a]={adaptations:b.adaptations[a]||[],adaptation$:d},f));var f};a.prototype.removePeriod=function(a,b){a:{var c=this._periods;for(var d=0;d<c.length();d++)if(c.get(d).period.id===b.id){c=d;break a}c=void 0}null==
c?h.default.warn("LanguageManager: "+a+" not found for period",b):(c=this._periods.get(c),null==c[a]?h.default.warn("LanguageManager: "+a+" already removed for period",b):(delete c[a],null==c.audio&&null==c.text&&this._periods.removeFirst(c)))};a.prototype.update=function(){this._updateAudioTrackChoices();this._updateTextTrackChoices()};a.prototype.setPreferredAudioTrack=function(a){var b=c(this._periods,a),d=b&&b.audio;if(!d||!b)throw Error("LanguageManager: Given Period not found.");b=this._preferredAudioTracks;
var e=a.adaptations.audio||[],f=this._audioChoiceMemory.get(a);void 0!==f&&g(f,e,b)?d.adaptation$.next(f):(b=l(e,b),this._audioChoiceMemory.set(a,b),d.adaptation$.next(b))};a.prototype.setPreferredTextTrack=function(a){var b=c(this._periods,a),d=b&&b.text;if(!d||!b)throw Error("LanguageManager: Given Period not found.");b=this._preferredTextTracks;var e=a.adaptations.text||[],g=this._textChoiceMemory.get(a);void 0!==g&&f(g,e,b)?d.adaptation$.next(g):(b=k(e,b),this._textChoiceMemory.set(a,b),d.adaptation$.next(b))};
a.prototype.setAudioTrackByID=function(a,b){var e=c(this._periods,a);e=e&&e.audio;if(!e)throw Error("LanguageManager: Given Period not found.");var f=d(e.adaptations,function(a){return a.id===b});if(void 0===f)throw Error("Audio Track not found.");this._audioChoiceMemory.get(a)!==f&&(this._audioChoiceMemory.set(a,f),e.adaptation$.next(f))};a.prototype.setTextTrackByID=function(a,b){var e=c(this._periods,a);e=e&&e.text;if(!e)throw Error("LanguageManager: Given Period not found.");var f=d(e.adaptations,
function(a){return a.id===b});if(void 0===f)throw Error("Text Track not found.");this._textChoiceMemory.get(a)!==f&&(this._textChoiceMemory.set(a,f),e.adaptation$.next(f))};a.prototype.disableAudioTrack=function(a){var b=c(this._periods,a);b=b&&b.audio;if(!b)throw Error("LanguageManager: Given Period not found.");null!==this._audioChoiceMemory.get(a)&&(this._audioChoiceMemory.set(a,null),b.adaptation$.next(null))};a.prototype.disableTextTrack=function(a){var b=c(this._periods,a);b=b&&b.text;if(!b)throw Error("LanguageManager: Given Period not found.");
null!==this._textChoiceMemory.get(a)&&(this._textChoiceMemory.set(a,null),b.adaptation$.next(null))};a.prototype.getChosenAudioTrack=function(a){var b=c(this._periods,a);return null==(b&&b.audio)?null:(a=this._audioChoiceMemory.get(a))?{language:a.language||"",normalized:a.normalizedLanguage||"",audioDescription:!!a.isAudioDescription,id:a.id}:null};a.prototype.getChosenTextTrack=function(a){var b=c(this._periods,a);return null==(b&&b.text)?null:(a=this._textChoiceMemory.get(a))?{language:a.language||
"",normalized:a.normalizedLanguage||"",closedCaption:!!a.isClosedCaption,id:a.id}:null};a.prototype.getAvailableAudioTracks=function(a){var b=c(this._periods,a);b=b&&b.audio;if(null==b)return[];var d=(a=this._audioChoiceMemory.get(a))&&a.id;return b.adaptations.map(function(a){return{language:a.language||"",normalized:a.normalizedLanguage||"",audioDescription:!!a.isAudioDescription,id:a.id,active:null==d?!1:d===a.id}})};a.prototype.getAvailableTextTracks=function(a){var b=c(this._periods,a);b=b&&
b.text;if(null==b)return[];var d=(a=this._textChoiceMemory.get(a))&&a.id;return b.adaptations.map(function(a){return{language:a.language||"",normalized:a.normalizedLanguage||"",closedCaption:!!a.isClosedCaption,id:a.id,active:null==d?!1:d===a.id}})};a.prototype._updateAudioTrackChoices=function(){var a=this,b=this._preferredAudioTracks,c=function(d){if(!(d>=a._periods.length())){var e=a._periods.get(d);if(null==e.audio)c(d+1);else{var f=e.period;e=e.audio;var h=f.adaptations.audio||[],k=a._audioChoiceMemory.get(f);
void 0!==k&&g(k,h,b)?c(d+1):(d=l(h,b),a._audioChoiceMemory.set(f,d),e.adaptation$.next(d),c(0))}}};c(0)};a.prototype._updateTextTrackChoices=function(){var a=this,b=this._preferredTextTracks,c=function(d){if(!(d>=a._periods.length())){var e=a._periods.get(d);if(null==e.text)c(d+1);else{var g=e.period;e=e.text;var h=g.adaptations.text||[],l=a._textChoiceMemory.get(g);void 0!==l&&f(l,h,b)?c(d+1):(d=k(h,b),a._textChoiceMemory.set(g,d),e.adaptation$.next(d),c(0))}}};c(0)};return a}();b.default=e},function(e,
b,a){Object.defineProperty(b,"__esModule",{value:!0});var g=a(5);e=a(3);var l=a(34),f=a(1),k=e.default.DEFAULT_AUTO_PLAY,c=e.default.DEFAULT_INITIAL_BITRATES,d=e.default.DEFAULT_LIMIT_VIDEO_WIDTH,h=e.default.DEFAULT_MAX_BITRATES,n=e.default.DEFAULT_MAX_BUFFER_AHEAD,m=e.default.DEFAULT_MAX_BUFFER_BEHIND,p=e.default.DEFAULT_SHOW_NATIVE_SUBTITLE,u=e.default.DEFAULT_TEXT_TRACK_MODE,q=e.default.DEFAULT_THROTTLE_WHEN_HIDDEN,r=e.default.DEFAULT_WANTED_BUFFER_AHEAD;b.parseConstructorOptions=function(a){if(null==
a.maxBufferAhead)var b=n;else if(b=Number(a.maxBufferAhead),isNaN(b))throw Error("Invalid maxBufferAhead parameter. Should be a number.");if(null==a.maxBufferBehind)var e=m;else if(e=Number(a.maxBufferBehind),isNaN(e))throw Error("Invalid maxBufferBehind parameter. Should be a number.");if(null==a.wantedBufferAhead)var f=r;else if(f=Number(a.wantedBufferAhead),isNaN(f))throw Error("Invalid wantedBufferAhead parameter. Should be a number.");var g=null==a.limitVideoWidth?d:!!a.limitVideoWidth;var k=
null==a.throttleWhenHidden?q:!!a.throttleWhenHidden;if(null==a.videoElement)var l=document.createElement("video");else if(a.videoElement instanceof HTMLMediaElement)l=a.videoElement;else throw Error("Invalid videoElement parameter. Should be a HTMLMediaElement.");if(null==a.initialVideoBitrate)var p=c.video;else if(p=Number(a.initialVideoBitrate),isNaN(p))throw Error("Invalid initialVideoBitrate parameter. Should be a number.");if(null==a.initialAudioBitrate)var t=c.audio;else if(t=Number(a.initialAudioBitrate),
isNaN(t))throw Error("Invalid initialAudioBitrate parameter. Should be a number.");if(null==a.maxVideoBitrate)var u=h.video;else if(u=Number(a.maxVideoBitrate),isNaN(u))throw Error("Invalid maxVideoBitrate parameter. Should be a number.");if(null==a.maxAudioBitrate)var H=h.audio;else if(H=Number(a.maxAudioBitrate),isNaN(H))throw Error("Invalid maxAudioBitrate parameter. Should be a number.");if(null==a.stopAtEnd)a=!0;else if("boolean"===typeof a.stopAtEnd)a=a.stopAtEnd;else throw Error("Invalid stopAtEnd parameter. Should be a boolean.");
return{maxBufferAhead:b,maxBufferBehind:e,limitVideoWidth:g,videoElement:l,wantedBufferAhead:f,throttleWhenHidden:k,initialAudioBitrate:t,initialVideoBitrate:p,maxAudioBitrate:H,maxVideoBitrate:u,stopAtEnd:a}};b.parseLoadVideoOptions=function(a){var b,c;if(a&&null!=a.url)var d=String(a.url);else throw Error("No url set on loadVideo");if(null==a.transport)throw Error("No transport set on loadVideo");var e=String(a.transport);var h=null==a.autoPlay?k:!!a.autoPlay;if(null==a.keySystems)var m=[];else{m=
Array.isArray(a.keySystems)?a.keySystems:[a.keySystems];var n=0;for(b=m;n<b.length;n++){var q=b[n];if("string"!==typeof q.type||"function"!==typeof q.getLicense)throw Error("Invalid key system given: Missing type string or getLicense callback");}}n=a.transportOptions;if(null==a.supplementaryTextTracks)b=[];else for(b=Array.isArray(a.supplementaryTextTracks)?a.supplementaryTextTracks:[a.supplementaryTextTracks],q=0,c=b;q<c.length;q++){var r=c[q];"boolean"!==typeof r.closedCaption&&(r.closedCaption=
!!r.closedCaption);if("string"!==typeof r.language||"string"!==typeof r.mimeType||"string"!==typeof r.url)throw Error("Invalid supplementary text track given. Missing either language, mimetype or url");}if(null==a.supplementaryImageTracks)q=[];else for(q=Array.isArray(a.supplementaryImageTracks)?a.supplementaryImageTracks:[a.supplementaryImageTracks],c=0,r=q;c<r.length;c++){var t=r[c];if("string"!==typeof t.mimeType||"string"!==typeof t.url)throw Error("Invalid supplementary image track given. Missing either mimetype or url");
}if(null==a.textTrackMode)c=u;else{if("native"!==a.textTrackMode&&"html"!==a.textTrackMode)throw Error("Invalid textTrackMode.");c=a.textTrackMode}r=l.normalizeAudioTrack(a.defaultAudioTrack);t=l.normalizeTextTrack(a.defaultTextTrack);var F=null==a.hideNativeSubtitle?!p:!!a.hideNativeSubtitle;if("html"===c){if(null==a.textTrackElement)throw Error('You have to provide a textTrackElement in "html" textTrackMode.');if(a.textTrackElement instanceof HTMLElement)var E=a.textTrackElement;else throw Error("textTrackElement should be an HTMLElement.");
}else null!=a.textTrackElement&&f.default.warn('You have set a textTrackElement without being in an "html" textTrackMode. It will be ignored.');if(null!=a.startAt)if(a.startAt.wallClockTime instanceof Date){var G=a.startAt.wallClockTime.getTime()/1E3;G=g({},a.startAt,{wallClockTime:G})}else G=a.startAt;return{autoPlay:h,defaultAudioTrack:r,defaultTextTrack:t,hideNativeSubtitle:F,keySystems:m,networkConfig:null==a.networkConfig?{}:{manifestRetry:a.networkConfig.manifestRetry,offlineRetry:a.networkConfig.offlineRetry,
segmentRetry:a.networkConfig.segmentRetry},startAt:G,supplementaryImageTracks:q,supplementaryTextTracks:b,textTrackElement:E,textTrackMode:c,transport:e,transportOptions:n,url:d}}}])});
